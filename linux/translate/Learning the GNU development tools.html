<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=GBK"><style id="zoomLevel-styles"></style></head><body style="font-size: 16px !important; line-height: 16.6667px !important;"><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Top" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Up:&nbsp;<a rel="up" accesskey="u" href="#dir" style="font-size: 16px !important; line-height: 16.6667px !important;">(dir)</a>

</div>

<h2 class="unnumbered" style="font-size: 24px !important; line-height: 25px !important;">Top</h2>



<title style="font-size: 16px !important; line-height: 16.6667px !important;">Learning the GNU development tools</title>
<meta http-equiv="Content-Type" content="text/html; charset=GBK" style="font-size: 16px !important;">
<meta name="description" content="Learning the GNU development tools" style="font-size: 16px !important;">
<meta name="generator" content="makeinfo 4.13" style="font-size: 16px !important;">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css" style="font-size: 16px !important;">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>


<h1 class="settitle" style="font-size: 32px !important; line-height: 33.3333px !important;">Learning the GNU development tools</h1>
<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="1" href="#Preface" style="font-size: 16px !important; line-height: 16.6667px !important;">Preface</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="2" href="#Acknowledgements" style="font-size: 16px !important; line-height: 16.6667px !important;">Acknowledgements</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="3" href="#Copying" style="font-size: 16px !important; line-height: 16.6667px !important;">Copying</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="4" href="#Installing-GNU-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing GNU software</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="5" href="#Writing-Good-Programs" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Good Programs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="6" href="#Using-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Using GNU Emacs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="7" href="#Compiling-with-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiling with Makefiles</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="8" href="#The-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="9" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Using-Libtool" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Libtool</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Using-Autotoolset" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Autotoolset</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Using-C-and-C_002b_002b-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using C and C++ effectively</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Using-Fortran-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Fortran effectively</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Internationalization" style="font-size: 16px !important; line-height: 16.6667px !important;">Internationalization</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Maintaining-Documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining Documentation</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Portable-shell-programming" style="font-size: 16px !important; line-height: 16.6667px !important;">Portable shell programming</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Writing-Autoconf-macros" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Autoconf macros</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Legal-issues-with-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Legal issues with Free Software</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Philosophical-issues" style="font-size: 16px !important; line-height: 16.6667px !important;">Philosophical issues</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Licensing-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Licensing Free Software</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#GNU-GENERAL-PUBLIC-LICENSE" style="font-size: 16px !important; line-height: 16.6667px !important;">GNU GENERAL PUBLIC LICENSE</a>

</li></ul>
<p style="font-size: 16px !important; line-height: 16.6667px !important;">--- The Detailed Node Listing ---

</p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Installing GNU Software

</p>
<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Installing-a-GNU-package" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing a GNU package</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#The-Makefile-standards" style="font-size: 16px !important; line-height: 16.6667px !important;">The Makefile standards</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Configuration-options" style="font-size: 16px !important; line-height: 16.6667px !important;">Configuration options</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Doing-a-VPATH-build" style="font-size: 16px !important; line-height: 16.6667px !important;">Doing a VPATH build</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Making-a-binary-distribution" style="font-size: 16px !important; line-height: 16.6667px !important;">Making a binary distribution</a>

</li></ul>
<p style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Good Programs

</p>
<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Why-good-code-is-important" style="font-size: 16px !important; line-height: 16.6667px !important;">Why good code is important</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Choosing-a-good-programming-language" style="font-size: 16px !important; line-height: 16.6667px !important;">Choosing a good programming language</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Developing-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">Developing libraries</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Developing-applications" style="font-size: 16px !important; line-height: 16.6667px !important;">Developing applications</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Free-software-is-good-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Free software is good software</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Invoking-the-gpl-utility" style="font-size: 16px !important; line-height: 16.6667px !important;">Invoking the gpl utility</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Inserting-notices-with-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Inserting notices with Emacs</a>

</li></ul>
<p style="font-size: 16px !important; line-height: 16.6667px !important;">Using GNU Emacs

</p>
<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Introduction-to-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Introduction to Emacs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Installing-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing GNU Emacs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Basic-Emacs-concepts" style="font-size: 16px !important; line-height: 16.6667px !important;">Basic Emacs concepts</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Configuring-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Configuring GNU Emacs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Using-vi-emulation" style="font-size: 16px !important; line-height: 16.6667px !important;">Using vi emulation</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Navigating-source-code" style="font-size: 16px !important; line-height: 16.6667px !important;">Navigating source code</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Using-Emacs-as-an-email-client" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Emacs as an email client</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Handling-patches" style="font-size: 16px !important; line-height: 16.6667px !important;">Handling patches</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Inserting-copyright-notices-with-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Inserting copyright notices with Emacs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Hacker-sanity-with-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Hacker sanity with Emacs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Further-reading-on-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Further reading on Emacs</a>

</li></ul>
<p style="font-size: 16px !important; line-height: 16.6667px !important;">Compiling with Makefiles

</p>
<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Compiling-simple-programs" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiling simple programs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Programs-with-many-source-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Programs with many source files</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Building-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">Building libraries</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Dealing-with-header-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Dealing with header files</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#The-GPL-and-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">The GPL and libraries</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#The-language-runtime-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">The language runtime libraries</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Basic-Makefile-concepts" style="font-size: 16px !important; line-height: 16.6667px !important;">Basic Makefile concepts</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#More-about-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">More about Makefiles</a>

</li></ul>
<p style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system

</p>
<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Introducing-the-GNU-tools" style="font-size: 16px !important; line-height: 16.6667px !important;">Introducing the GNU tools</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Installing-the-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing the GNU build system</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Hello-world-example-with-Autoconf-and-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello world example with Autoconf and Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Understanding-the-hello-world-example" style="font-size: 16px !important; line-height: 16.6667px !important;">Understanding the hello world example</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Using-configuration-headers" style="font-size: 16px !important; line-height: 16.6667px !important;">Using configuration headers</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Maintaining-the-documentation-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining the documentation files</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Organizing-your-project-in-subdirectories" style="font-size: 16px !important; line-height: 16.6667px !important;">Organizing your project in subdirectories</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Applying-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">Applying the GPL</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Handling-version-numbers" style="font-size: 16px !important; line-height: 16.6667px !important;">Handling version numbers</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Hello-world-with-acmkdir" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello world with acmkdir</a>

</li></ul>
<p style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf

</p>
<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Hello-World-revisited" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello World revisited</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#OLD-Using-configuration-headers" style="font-size: 16px !important; line-height: 16.6667px !important;">OLD Using configuration headers</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#The-building-process" style="font-size: 16px !important; line-height: 16.6667px !important;">The building process</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Some-general-advice" style="font-size: 16px !important; line-height: 16.6667px !important;">Some general advice</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Standard-organization-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Standard organization with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Programs-and-Libraries-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Programs and Libraries with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#General-Automake-principles" style="font-size: 16px !important; line-height: 16.6667px !important;">General Automake principles</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Simple-Automake-examples" style="font-size: 16px !important; line-height: 16.6667px !important;">Simple Automake examples</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Libraries-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Libraries with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Dealing-with-built-sources" style="font-size: 16px !important; line-height: 16.6667px !important;">Dealing with built sources</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Embedded-text-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Embedded text with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Installation-standard-directories" style="font-size: 16px !important; line-height: 16.6667px !important;">Installation standard directories</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Scripts-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Scripts with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Emacs-Lisp-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs Lisp with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Guile-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Guile with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Data-files-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Data files with Automake</a>

</li></ul>
<p style="font-size: 16px !important; line-height: 16.6667px !important;">Using Libtool

</p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Using Autotoolset

</p>
<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Introduction-to-Autotoolset" style="font-size: 16px !important; line-height: 16.6667px !important;">Introduction to Autotoolset</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Compiler-configuration-with-the-LF-macros" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiler configuration with the LF macros</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#The-features-of-LF_005fCPP_005fPORTABILITY" style="font-size: 16px !important; line-height: 16.6667px !important;">The features of LF_CPP_PORTABILITY</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Writing-portable-C_002b_002b" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing portable C++</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Hello-world-revisited-again" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello world revisited again</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Invoking-acmkdir" style="font-size: 16px !important; line-height: 16.6667px !important;">Invoking acmkdir</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Handling-Embedded-text" style="font-size: 16px !important; line-height: 16.6667px !important;">Handling Embedded text</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Handling-very-deep-packages" style="font-size: 16px !important; line-height: 16.6667px !important;">Handling very deep packages</a>

</li></ul>
<p style="font-size: 16px !important; line-height: 16.6667px !important;">Using C and C++ effectively

</p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Using Fortran effectively

</p>
<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Introduction-to-Fortran-support" style="font-size: 16px !important; line-height: 16.6667px !important;">Introduction to Fortran support</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Fortran-compilers-and-linkage" style="font-size: 16px !important; line-height: 16.6667px !important;">Fortran compilers and linkage</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Walk-through-a-simple-example" style="font-size: 16px !important; line-height: 16.6667px !important;">Walk through a simple example</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#The-gory-details" style="font-size: 16px !important; line-height: 16.6667px !important;">The gory details</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Portability-problems-with-Fortran" style="font-size: 16px !important; line-height: 16.6667px !important;">Portability problems with Fortran</a>

</li></ul>
<p style="font-size: 16px !important; line-height: 16.6667px !important;">Internationalization

</p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining Documentation

</p>
<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Browsing-documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Browsing documentation</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Writing-proper-manuals" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing proper manuals</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Introduction-to-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">Introduction to Texinfo</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Markup-in-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">Markup in Texinfo</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#GNU-Emacs-support-for-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">GNU Emacs support for Texinfo</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Writing-man-pages" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing man pages</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Writing-documentation-with-LaTeX" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing documentation with LaTeX</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Creating-a-LaTeX-package" style="font-size: 16px !important; line-height: 16.6667px !important;">Creating a LaTeX package</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Further-reading-about-LaTeX" style="font-size: 16px !important; line-height: 16.6667px !important;">Further reading about LaTeX</a>

</li></ul>
<p style="font-size: 16px !important; line-height: 16.6667px !important;">Portable shell programming

</p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Autoconf macros

</p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Legal issues with Free Software

</p>
<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Understanding-Copyright" style="font-size: 16px !important; line-height: 16.6667px !important;">Understanding Copyright</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Software-patents" style="font-size: 16px !important; line-height: 16.6667px !important;">Software patents</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Export-restrictions-on-encryption-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Export restrictions on encryption software</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Freeing-your-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Freeing your software</a>

</li></ul>
<p style="font-size: 16px !important; line-height: 16.6667px !important;">Philosophical issues

</p>
<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#The-Right-to-Read" style="font-size: 16px !important; line-height: 16.6667px !important;">The Right to Read</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#What-is-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">What is Free Software</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Why-software-should-not-have-owners" style="font-size: 16px !important; line-height: 16.6667px !important;">Why software should not have owners</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Why-free-software-needs-free-documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Why free software needs free documentation</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Copyleft_003b-Pragmatic-Idealism" style="font-size: 16px !important; line-height: 16.6667px !important;">Copyleft; Pragmatic Idealism</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#The-X-Windows-Trap" style="font-size: 16px !important; line-height: 16.6667px !important;">The X Windows Trap</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Categories-of-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Categories of software</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Confusing-words" style="font-size: 16px !important; line-height: 16.6667px !important;">Confusing words</a>

</li></ul>
<p style="font-size: 16px !important; line-height: 16.6667px !important;">Licensing Free Software

</p>
<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#What-is-Copyleft" style="font-size: 16px !important; line-height: 16.6667px !important;">What is Copyleft</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Why-you-should-use-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">Why you should use the GPL</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#The-LGPL-vs-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">The LGPL vs the GPL</a>

</li></ul>
<p style="font-size: 16px !important; line-height: 16.6667px !important;">GNU GENERAL PUBLIC LICENSE

</p>
<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Preamble" style="font-size: 16px !important; line-height: 16.6667px !important;">Preamble</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Terms-and-Conditions" style="font-size: 16px !important; line-height: 16.6667px !important;">Terms and Conditions</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Appendix-_002d-How-to-Apply-These-Terms-to-Your-New-Programs" style="font-size: 16px !important; line-height: 16.6667px !important;">Appendix - How to Apply These Terms to Your New Programs</a>

</li></ul>

<!-- =================================================================== -->
<!-- =================================================================== -->
   <div class="shortcontents" style="font-size: 16px !important; line-height: 16.6667px !important;">
<h2 style="font-size: 24px !important; line-height: 25px !important;">Short Contents</h2>
<ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Preface" style="font-size: 16px !important; line-height: 16.6667px !important;">Preface</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Acknowledgements" style="font-size: 16px !important; line-height: 16.6667px !important;">Acknowledgements</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Copying" style="font-size: 16px !important; line-height: 16.6667px !important;">Copying</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Installing-GNU-software" style="font-size: 16px !important; line-height: 16.6667px !important;">1 Installing GNU software</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Writing-Good-Programs" style="font-size: 16px !important; line-height: 16.6667px !important;">2 Writing Good Programs</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Using-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">3 Using GNU Emacs</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Compiling-with-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">4 Compiling with Makefiles</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_The-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">5 The GNU build system</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">6 Using Automake and Autoconf</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Using-Libtool" style="font-size: 16px !important; line-height: 16.6667px !important;">7 Using Libtool</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Using-Autotoolset" style="font-size: 16px !important; line-height: 16.6667px !important;">8 Using Autotoolset</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Using-C-and-C_002b_002b-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">9 Using C and C++ effectively</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Using-Fortran-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">10 Using Fortran effectively</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Internationalization" style="font-size: 16px !important; line-height: 16.6667px !important;">11 Internationalization</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Maintaining-Documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">12 Maintaining Documentation</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Portable-shell-programming" style="font-size: 16px !important; line-height: 16.6667px !important;">13 Portable shell programming</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Writing-Autoconf-macros" style="font-size: 16px !important; line-height: 16.6667px !important;">14 Writing Autoconf macros</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Legal-issues-with-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Appendix A Legal issues with Free Software</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Philosophical-issues" style="font-size: 16px !important; line-height: 16.6667px !important;">Appendix B Philosophical issues</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_Licensing-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Appendix C Licensing Free Software</a></li>
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#toc_GNU-GENERAL-PUBLIC-LICENSE" style="font-size: 16px !important; line-height: 16.6667px !important;">Appendix D GNU GENERAL PUBLIC LICENSE</a></li>
</ul>
</div>

   <div class="contents" style="font-size: 16px !important; line-height: 16.6667px !important;">
<h2 style="font-size: 24px !important; line-height: 25px !important;">Table of Contents</h2>
<ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Top" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Preface" href="#Preface" style="font-size: 16px !important; line-height: 16.6667px !important;">Preface</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Acknowledgements" href="#Acknowledgements" style="font-size: 16px !important; line-height: 16.6667px !important;">Acknowledgements</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Copying" href="#Copying" style="font-size: 16px !important; line-height: 16.6667px !important;">Copying</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Installing-GNU-software" href="#Installing-GNU-software" style="font-size: 16px !important; line-height: 16.6667px !important;">1 Installing GNU software</a>
<ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Installing-a-GNU-package" style="font-size: 16px !important; line-height: 16.6667px !important;">1.1 Installing a GNU package</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#The-Makefile-standards" style="font-size: 16px !important; line-height: 16.6667px !important;">1.2 The Makefile standards</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Configuration-options" style="font-size: 16px !important; line-height: 16.6667px !important;">1.3 Configuration options</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Doing-a-VPATH-build" style="font-size: 16px !important; line-height: 16.6667px !important;">1.4 Doing a VPATH build</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Making-a-binary-distribution" style="font-size: 16px !important; line-height: 16.6667px !important;">1.5 Making a binary distribution</a>
</li></ul>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Writing-Good-Programs" href="#Writing-Good-Programs" style="font-size: 16px !important; line-height: 16.6667px !important;">2 Writing Good Programs</a>
<ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Why-good-code-is-important" style="font-size: 16px !important; line-height: 16.6667px !important;">2.1 Why good code is important</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Choosing-a-good-programming-language" style="font-size: 16px !important; line-height: 16.6667px !important;">2.2 Choosing a good programming language</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Developing-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">2.3 Developing libraries</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Developing-applications" style="font-size: 16px !important; line-height: 16.6667px !important;">2.4 Developing applications</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Free-software-is-good-software" style="font-size: 16px !important; line-height: 16.6667px !important;">2.5 Free software is good software</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Invoking-the-gpl-utility" style="font-size: 16px !important; line-height: 16.6667px !important;">2.6 Invoking the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl</span></samp>¡¯ utility</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Inserting-notices-with-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">2.7 Inserting notices with Emacs</a>
</li></ul>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Using-GNU-Emacs" href="#Using-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">3 Using GNU Emacs</a>
<ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Introduction-to-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">3.1 Introduction to Emacs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Installing-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">3.2 Installing GNU Emacs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Basic-Emacs-concepts" style="font-size: 16px !important; line-height: 16.6667px !important;">3.3 Basic Emacs concepts</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Configuring-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">3.4 Configuring GNU Emacs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Using-vi-emulation" style="font-size: 16px !important; line-height: 16.6667px !important;">3.5 Using vi emulation</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Navigating-source-code" style="font-size: 16px !important; line-height: 16.6667px !important;">3.6 Navigating source code</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Using-Emacs-as-an-email-client" style="font-size: 16px !important; line-height: 16.6667px !important;">3.7 Using Emacs as an email client</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Handling-patches" style="font-size: 16px !important; line-height: 16.6667px !important;">3.8 Handling patches</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Inserting-copyright-notices-with-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">3.9 Inserting copyright notices with Emacs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Hacker-sanity-with-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">3.10 Hacker sanity with Emacs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Further-reading-on-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">3.11 Further reading on Emacs</a>
</li></ul>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Compiling-with-Makefiles" href="#Compiling-with-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">4 Compiling with Makefiles</a>
<ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Compiling-simple-programs" style="font-size: 16px !important; line-height: 16.6667px !important;">4.1 Compiling simple programs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Programs-with-many-source-files" style="font-size: 16px !important; line-height: 16.6667px !important;">4.2 Programs with many source files</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Building-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">4.3 Building libraries</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Dealing-with-header-files" style="font-size: 16px !important; line-height: 16.6667px !important;">4.4 Dealing with header files</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#The-GPL-and-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">4.5 The GPL and libraries</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#The-language-runtime-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">4.6 The language runtime libraries.</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Basic-Makefile-concepts" style="font-size: 16px !important; line-height: 16.6667px !important;">4.7 Basic Makefile concepts</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#More-about-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">4.8 More about Makefiles</a>
</li></ul>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_The-GNU-build-system" href="#The-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">5 The GNU build system</a>
<ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Introducing-the-GNU-tools" style="font-size: 16px !important; line-height: 16.6667px !important;">5.1 Introducing the GNU tools</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Installing-the-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">5.2 Installing the GNU build system</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Hello-world-example-with-Autoconf-and-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">5.3 Hello world example with Autoconf and Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Understanding-the-hello-world-example" style="font-size: 16px !important; line-height: 16.6667px !important;">5.4 Understanding the hello world example</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Using-configuration-headers" style="font-size: 16px !important; line-height: 16.6667px !important;">5.5 Using configuration headers</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Maintaining-the-documentation-files" style="font-size: 16px !important; line-height: 16.6667px !important;">5.6 Maintaining the documentation files</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Organizing-your-project-in-subdirectories" style="font-size: 16px !important; line-height: 16.6667px !important;">5.7 Organizing your project in subdirectories</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Applying-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">5.8 Applying the GPL</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Handling-version-numbers" style="font-size: 16px !important; line-height: 16.6667px !important;">5.9 Handling version numbers</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Hello-world-with-acmkdir" style="font-size: 16px !important; line-height: 16.6667px !important;">5.10 Hello world with acmkdir</a>
</li></ul>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Using-Automake-and-Autoconf" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">6 Using Automake and Autoconf</a>
<ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Hello-World-revisited" style="font-size: 16px !important; line-height: 16.6667px !important;">6.1 Hello World revisited</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#OLD-Using-configuration-headers" style="font-size: 16px !important; line-height: 16.6667px !important;">6.2 OLD Using configuration headers</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#The-building-process" style="font-size: 16px !important; line-height: 16.6667px !important;">6.3 The building process</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Some-general-advice" style="font-size: 16px !important; line-height: 16.6667px !important;">6.4 Some general advice</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Standard-organization-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">6.5 Standard organization with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Programs-and-Libraries-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">6.6 Programs and Libraries with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#General-Automake-principles" style="font-size: 16px !important; line-height: 16.6667px !important;">6.7 General Automake principles</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Simple-Automake-examples" style="font-size: 16px !important; line-height: 16.6667px !important;">6.8 Simple Automake examples</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Libraries-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">6.9 Libraries with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Dealing-with-built-sources" style="font-size: 16px !important; line-height: 16.6667px !important;">6.10 Dealing with built sources</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Embedded-text-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">6.11 Embedded text with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Installation-standard-directories" style="font-size: 16px !important; line-height: 16.6667px !important;">6.12 Installation standard directories</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Scripts-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">6.13 Scripts with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Emacs-Lisp-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">6.14 Emacs Lisp with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Guile-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">6.15 Guile with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Data-files-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">6.16 Data files with Automake</a>
</li></ul>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Using-Libtool" href="#Using-Libtool" style="font-size: 16px !important; line-height: 16.6667px !important;">7 Using Libtool</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Using-Autotoolset" href="#Using-Autotoolset" style="font-size: 16px !important; line-height: 16.6667px !important;">8 Using Autotoolset</a>
<ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Introduction-to-Autotoolset" style="font-size: 16px !important; line-height: 16.6667px !important;">8.1 Introduction</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Compiler-configuration-with-the-LF-macros" style="font-size: 16px !important; line-height: 16.6667px !important;">8.2 Compiler configuration with the <code style="font-size: 12px !important; line-height: 14.1667px !important;">LF</code> macros</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#The-features-of-LF_005fCPP_005fPORTABILITY" style="font-size: 16px !important; line-height: 16.6667px !important;">8.3 The features of  ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">LF_CPP_PORTABILITY</span></samp>¡¯</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Writing-portable-C_002b_002b" style="font-size: 16px !important; line-height: 16.6667px !important;">8.4 Writing portable C++</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Hello-world-revisited-again" style="font-size: 16px !important; line-height: 16.6667px !important;">8.5 Hello world revisited again</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Invoking-acmkdir" style="font-size: 16px !important; line-height: 16.6667px !important;">8.6 Invoking ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Handling-Embedded-text" style="font-size: 16px !important; line-height: 16.6667px !important;">8.7 Handling Embedded text</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Handling-very-deep-packages" style="font-size: 16px !important; line-height: 16.6667px !important;">8.8 Handling very deep packages</a>
</li></ul>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Using-C-and-C_002b_002b-effectively" href="#Using-C-and-C_002b_002b-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">9 Using C and C++ effectively</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Using-Fortran-effectively" href="#Using-Fortran-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">10 Using Fortran effectively</a>
<ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Introduction-to-Fortran-support" style="font-size: 16px !important; line-height: 16.6667px !important;">10.1 Introduction to Fortran support</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Fortran-compilers-and-linkage" style="font-size: 16px !important; line-height: 16.6667px !important;">10.2 Fortran compilers and linkage</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Walk-through-a-simple-example" style="font-size: 16px !important; line-height: 16.6667px !important;">10.3 Walk through a simple example</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#The-gory-details" style="font-size: 16px !important; line-height: 16.6667px !important;">10.4 The gory details</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Portability-problems-with-Fortran" style="font-size: 16px !important; line-height: 16.6667px !important;">10.5 Portability problems with Fortran</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Other-Fortran-dialects" style="font-size: 16px !important; line-height: 16.6667px !important;">10.6 Other Fortran dialects</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Popular-free-software-in-Fortran" style="font-size: 16px !important; line-height: 16.6667px !important;">10.7 Popular free software in Fortran</a>
</li></ul>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Internationalization" href="#Internationalization" style="font-size: 16px !important; line-height: 16.6667px !important;">11 Internationalization</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Maintaining-Documentation" href="#Maintaining-Documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">12 Maintaining Documentation</a>
<ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Browsing-documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">12.1 Browsing documentation</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Writing-proper-manuals" style="font-size: 16px !important; line-height: 16.6667px !important;">12.2 Writing proper manuals</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Introduction-to-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">12.3 Introduction to Texinfo</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Markup-in-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">12.4 Markup in Texinfo</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#GNU-Emacs-support-for-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">12.5 GNU Emacs support for Texinfo</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Writing-man-pages" style="font-size: 16px !important; line-height: 16.6667px !important;">12.6 Writing man pages</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Writing-documentation-with-LaTeX" style="font-size: 16px !important; line-height: 16.6667px !important;">12.7 Writing documentation with LaTeX</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Creating-a-LaTeX-package" style="font-size: 16px !important; line-height: 16.6667px !important;">12.8 Creating a LaTeX package</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Further-reading-about-LaTeX" style="font-size: 16px !important; line-height: 16.6667px !important;">12.9 Further reading about LaTeX</a>
</li></ul>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Portable-shell-programming" href="#Portable-shell-programming" style="font-size: 16px !important; line-height: 16.6667px !important;">13 Portable shell programming</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Writing-Autoconf-macros" href="#Writing-Autoconf-macros" style="font-size: 16px !important; line-height: 16.6667px !important;">14 Writing Autoconf macros</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Legal-issues-with-Free-Software" href="#Legal-issues-with-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Appendix A Legal issues with Free Software</a>
<ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Understanding-Copyright" style="font-size: 16px !important; line-height: 16.6667px !important;">A.1 Understanding Copyright</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Software-patents" style="font-size: 16px !important; line-height: 16.6667px !important;">A.2 Software patents</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Export-restrictions-on-encryption-software" style="font-size: 16px !important; line-height: 16.6667px !important;">A.3 Export restrictions on encryption software</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Freeing-your-software" style="font-size: 16px !important; line-height: 16.6667px !important;">A.4 Freeing your software</a>
</li></ul>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Philosophical-issues" href="#Philosophical-issues" style="font-size: 16px !important; line-height: 16.6667px !important;">Appendix B Philosophical issues</a>
<ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#The-Right-to-Read" style="font-size: 16px !important; line-height: 16.6667px !important;">B.1 The Right to Read</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#What-is-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">B.2 What is Free Software</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Why-software-should-not-have-owners" style="font-size: 16px !important; line-height: 16.6667px !important;">B.3 Why software should not have owners</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Why-free-software-needs-free-documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">B.4 Why free software needs free documentation</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Copyleft_003b-Pragmatic-Idealism" style="font-size: 16px !important; line-height: 16.6667px !important;">B.5 Copyleft; Pragmatic Idealism</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#The-X-Windows-Trap" style="font-size: 16px !important; line-height: 16.6667px !important;">B.6 The X Windows Trap</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Categories-of-software" style="font-size: 16px !important; line-height: 16.6667px !important;">B.7 Categories of software</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Confusing-words" style="font-size: 16px !important; line-height: 16.6667px !important;">B.8 Confusing words</a>
</li></ul>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_Licensing-Free-Software" href="#Licensing-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Appendix C Licensing Free Software</a>
<ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#What-is-Copyleft" style="font-size: 16px !important; line-height: 16.6667px !important;">C.1 What is Copyleft</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Why-you-should-use-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">C.2 Why you should use the GPL</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#The-LGPL-vs-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">C.3 The LGPL vs the GPL</a>
</li></ul>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a name="toc_GNU-GENERAL-PUBLIC-LICENSE" href="#GNU-GENERAL-PUBLIC-LICENSE" style="font-size: 16px !important; line-height: 16.6667px !important;">Appendix D GNU GENERAL PUBLIC LICENSE</a>
<ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Preamble" style="font-size: 16px !important; line-height: 16.6667px !important;">D.1 Preamble</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Terms-and-Conditions" style="font-size: 16px !important; line-height: 16.6667px !important;">D.2 TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Appendix-_002d-How-to-Apply-These-Terms-to-Your-New-Programs" style="font-size: 16px !important; line-height: 16.6667px !important;">D.3 Appendix: How to Apply These Terms to Your New Programs</a>
</li></ul>
</li></ul>
</div>

<!-- Copyright (C) 1998 Eleftherios Gkioulekas <lf@amath.washington.edu> -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Preface" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Acknowledgements" style="font-size: 16px !important; line-height: 16.6667px !important;">Acknowledgements</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="unnumbered" style="font-size: 24px !important; line-height: 25px !important;">Preface</h2>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">The purpose of this document is to introduce you to the GNU build system,
and show you how to use it to write good code. 
It also discusses peripheral
topics such as how to use GNU Emacs as a source code navigator, how
to write good software, and the philosophical concerns behind the free
software movement. The intended reader should
be a software developer who knows his programming languages, and
wants to learn how to package his programs in a way that follows the
GNU coding standards.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">This manual introduces you to the GNU build system and shows you how
to develop high-quality

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">This manual shows you how to develop high-quality software on GNU using
the GNU build system that conforms to the GNU coding standards. 
These techniques are also useful for software development on GNU/Linux
and most variants of the Unix system. In fact, one of the reasons
for the elaborate GNU build system was to make software portable between
GNU and other similar operating systems. 
We also discuss peripheral topics such as how to use GNU
Emacs as an IDE (integrated development environment), and the various
practical, legal and philosophical concerns behind software development.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">When we speak of the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">GNU build system</dfn> we refer primarily to the
following four packages:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Autoconf</strong> produces a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">configuration shell script</dfn>, named
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>, which probes the installer platform for portability related
information which is required to customize makefiles, configuration header
files, and other application specific files. Then it proceeds to generate
customized versions of these files from generic templates. This way, the
user will not need to customize these files manually. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Automake</strong> produces makefile templates, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp> to be used
by Autoconf, from a very high level specification stored in a file called
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>. Automake produces makefiles that conform to the GNU
makefile standards, taking away the extraordinary effort required to produce
them by hand. Automake requires Autoconf in order to be used properly. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Libtool</strong> makes it possible to compile position independent code and
build shared libraries in a portable manner. It does not require either
Autoconf, or Automake and can be used independently. Automake however supports
libtool and interoperates with it in a seamless manner. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Autotoolset</strong>
<em style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: Add content</em>
</li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system has two goals. The first is to simplify the development
of portable programs. The second is to simplify the building of programs that
are distributed as source code. The first goal is achieved by the automatic
generation of a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> shell script. The second goal is achieved
by the automatic generation of Makefiles and other shell scripts that are
typically used in the building process. This way the developer can concentrate
on debugging his source code, instead of his overly complex Makefiles. 
And the installer can compile and install the program directly from the
source code distribution by a simple and automatic procedure.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system needs to be installed only when you are developing
programs that are meant to be distributed. To build a program from
distributed source code, you only need a working <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code>, a compiler,
a shell,
and sometimes standard Unix utilities like <code style="font-size: 12px !important; line-height: 14.1667px !important;">sed</code>, <code style="font-size: 12px !important; line-height: 14.1667px !important;">awk</code>,
<code style="font-size: 12px !important; line-height: 14.1667px !important;">yacc</code>, <code style="font-size: 12px !important; line-height: 14.1667px !important;">lex</code>. The objective is to make software installation
as simple and as automatic as possible for the installer. Also, by
setting up the GNU build system such that it creates programs that don't
require the build system to be present during their installation, it
becomes possible to use the build system to bootstrap itself.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Some tasks that are simplified by the GNU build system include:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">Building multi directory software packages. It is much more difficult to use
raw <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code> recursively. Having simplified this step, the developer
is encouraged to organize his source code in a deep directory tree rather than
lump everything under the same directory. Developers that use raw <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code>
often can't justify the inconvenience of recursive make and prefer to
disorganize their source code. With the GNU tools this is no longer necessary. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Automatic configuration. You will never have to tell your users that they
need to edit your Makefile. You yourself will not have to edit your Makefiles
as you move new versions of your code back and forth between different
machines. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Automatic makefile generation. Writing makefiles involves a lot of repetition,
and in large projects it will get on your nerves. The GNU build system
instead requires you to write <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> files that are much more terse
and easy to maintain. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Support for test suites. You can very easily write test suite code, and
by adding one extra line in your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> make a <code style="font-size: 12px !important; line-height: 14.1667px !important;">check</code>
target available such that you can compile and run the entire test suite
by running <code style="font-size: 12px !important; line-height: 14.1667px !important;">make check</code>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Automatic distribution building. The GNU build tools are meant to be used
in the development of <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">free software</dfn>, therefore if you have a working
build system in place for your programs, you can create a source code
distribution out of
it by running <code style="font-size: 12px !important; line-height: 14.1667px !important;">make distcheck</code>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Shared libraries. Building shared libraries becomes as easy as building
static libraries. 
</li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">The Autotoolset package complements the GNU build system by providing the
following additional features:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">Automatic generation of legal notices that are needed in order to
apply the GNU GPL license. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Automatic generation of directory trees for new software packages, such that
they conform to the GNITS standard (more or less). 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Some rudimentary portability framework for C++ programs. There is a lot
of room for improvement here, in the future. Also a framework for
embedding text into your executable and handling include files across
multiple directories. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Support for writing portable software that uses both Fortran and C++. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Additional support for writing software documentation in Texinfo, but also in
LaTeX. 
</li></ul>
   Autotoolset is still under development and there may still be bugs. At the
moment Autotoolset doesn't do shared libraries, but that will change in the
future.

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">This effort began by my attempt to write a tutorial for Autoconf. It involved
into <em style="font-size: 16px !important; line-height: 16.6667px !important;">¡°Learning Autoconf and Automake¡±</em>. Along the way I developed
Autotoolset to deal with things that annoyed me or to cover needs from my
own work. Ultimately I want this document to be both a unified introduction of
the GNU build system as well as documentation for the Autotoolset package.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">I believe that knowing these tools and having this know-how is very important,
and should not be missed from engineering or science students who will one
day go out and do software development for academic or industrial research. 
Many students are incredibly
undertrained in software engineering and write a lot of bad code. 
This is very very sad because of all people, it is them that have the
greatest need to write portable, robust and reliable code. I found from
my own experience that moving away from Fortran and C, and towards C++
is the first step in writing better code. The second step is to use
the sophisticated GNU build system and use it properly, as described
in this document. 
Ultimately, I am hoping that this document will help
people get over the learning curve of the second step, so they can be
productive and ready to study the reference manuals that are distributed
with all these tools.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">This manual of course is still under construction. When I am done constructing
it some paragraph somewhere will be inserted with the traditional run-down of
summaries about each chapter. I write this manual in a highly non-linear
way, so while it is under construction you will find that some parts
are better-developed than others. If you wish to contribute sections of
the manual that I haven't written or haven't yet developed fully, please
contact me.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Chapters 1,2,3,4 are okay. Chapter 5 is okay to, but needs a little more
work. I removed the other chapters to minimize confusion, but the sources
for them are still being distributed as part of the Autotoolset package
for those that found them useful. The other chapters need a lot of rewriting
and they would do more harm than good at this point to the unsuspecting reader. 
Please contact me if you have any suggestions
for improving this manual.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Remarks by Marcelo: I am currently updating this manual to the last release
of the autoconf/automake tools.

<!-- Copyright (C) 1998 Eleftherios Gkioulekas <lf@amath.washington.edu> -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Acknowledgements" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Copying" style="font-size: 16px !important; line-height: 16.6667px !important;">Copying</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Preface" style="font-size: 16px !important; line-height: 16.6667px !important;">Preface</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="unnumbered" style="font-size: 24px !important; line-height: 25px !important;">Acknowledgements</h2>

<p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This document and the Autotools package have originally been written by
Eleftherios Gkioulekas. Many people have further contributed to this
effort, directly or indirectly, in various way. Here is a list of these
people. Please help me keep it complete and exempt of errors.

     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Philosophical-issues" style="font-size: 16px !important; line-height: 16.6667px !important;">Philosophical issues</a>, and <a href="#Licensing-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Licensing Free Software</a>,
were written by Richard Stallman. Richard has also contributed many useful
review comments and helped me with the legal paperwork. 
The appendix <em style="font-size: 16px !important; line-height: 16.6667px !important;">Philosophical issues</em>
has been written by Richard Stallman. 
(see <a href="#Philosophical-issues" style="font-size: 16px !important; line-height: 16.6667px !important;">Philosophical issues</a>)
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The chapter on Fortran, and the Autotools support for developing software
that is partly written in Fortran is derived from the work of John Eaton
on GNU Octave, which I mainly generalized for use in other programs. 
(see <a href="#Using-Fortran-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Fortran effectively</a>). 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Mark Galassi was the first person, to the best of my knowledge, who tried to
write an Autoconf tutorial. It is thanks to his work that I was inspired to
begin this work. 
</li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: <em style="font-size: 16px !important; line-height: 16.6667px !important;">I need to start keeping track of acknowledgements here</em>

<!-- Copyright (C) 1998 Eleftherios Gkioulekas <lf@amath.washington.edu> -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Copying" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Installing-GNU-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing GNU software</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Acknowledgements" style="font-size: 16px !important; line-height: 16.6667px !important;">Acknowledgements</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="unnumbered" style="font-size: 24px !important; line-height: 25px !important;">Copying</h2>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">This book that you are now reading is actually free. The information
in it is freely available to anyone. The machine readable source code
for the book is freely distributed on the internet and anyone may take
this book and make as many copies as they like. (take a moment to
check the copying permissions on the Copyright page). If you paid money
for this book, what you actually paid for was the book's nice printing and
binding, and the publisher's associated costs to produce it.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The following notice refers to the Autotoolset package, which includes this
documentation, as well as the source code for utilities like <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>
and for additional Autoconf macros. The complete <em style="font-size: 16px !important; line-height: 16.6667px !important;">GNU development tools</em>
involves other packages also, such as <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Autoconf</dfn>, <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Automake</dfn>,
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Libtool</dfn>, <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Make</dfn>, <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs</dfn>, <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Texinfo</dfn>,
the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">GNU C and C++ compilers</dfn>
and a few other accessories. These packages are free software, and you
can obtain them from the Free Software Foundation. For details on doing so,
please visit their web site <code style="font-size: 12px !important; line-height: 14.1667px !important;">http://www.fsf.org/</code>. Although Autotoolset
has been designed to work with the GNU build system, it is not yet an
official part of the GNU project.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The Autotoolset package is also ¡°free¡±; this means that everyone is free to
use it and free to redistribute it on a free basis. The Autotoolset package is
not in the public domain; it is copyrighted and there are restrictions
on its distribution, but these restrictions are designed to permit
everything that a good cooperating citizen would want to do. 
What is not allowed is to try to prevent others from further sharing
any version of this package that they might get from you.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Specifically, we want to make sure that you have the right to give
away copies of the programs that relate to <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Autotoolset</dfn>, that you receive
source code or else can get it if you want it, that you can change these
programs or use pieces of them in new free programs, and that you know
you can do these things.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To make sure that everyone has such rights, we have to forbid you to
deprive anyone else of these rights.  For example, if you distribute
copies of the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Autotoolset</dfn>-related code, you must give the recipients all
the rights that you have.  You must make sure that they, too, receive or
can get the source code.  And you must tell them their rights.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Also,  for our own protection, we must make certain that everyone
finds out that there is no warranty for the programs that relate to
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Autotoolset</dfn>.  If these programs are modified by someone else and passed
on, we want their recipients to know that what they have is not what we
distributed, so that any problems introduced by others will not reflect
on our reputation.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The precise conditions of the licenses for the programs currently
being distributed that relate to <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Autotoolset</dfn> are found in the General
Public Licenses that accompany them.

<!-- The chapters -->
<!-- Copyright (C) 1998 Eleftherios Gkioulekas <lf@amath.washington.edu> -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
<!-- ============================================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Installing-GNU-software" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Writing-Good-Programs" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Good Programs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Copying" style="font-size: 16px !important; line-height: 16.6667px !important;">Copying</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="chapter" style="font-size: 24px !important; line-height: 25px !important;">1 Installing GNU software</h2>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Free software is distributed in source code distributions. Many of these
programs are difficult to install because they use system dependent features,
and they require the user to edit makefiles and configuration headers. 
By contrast, the software distributed by the GNU project is
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">autoconfiguring</dfn>; it is possible to compile it from source code and
install it automatically, without any tedious user intervention.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In this chapter we discuss how to compile and install autoconfiguring software
written by others. In the subsequent chapters we discuss how to use the
development tools that allow you to make your software autoconfiguring as
well.

</p><ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="1" href="#Installing-a-GNU-package" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing a GNU package</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="2" href="#The-Makefile-standards" style="font-size: 16px !important; line-height: 16.6667px !important;">The Makefile standards</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="3" href="#Configuration-options" style="font-size: 16px !important; line-height: 16.6667px !important;">Configuration options</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="4" href="#Doing-a-VPATH-build" style="font-size: 16px !important; line-height: 16.6667px !important;">Doing a VPATH build</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="5" href="#Making-a-binary-distribution" style="font-size: 16px !important; line-height: 16.6667px !important;">Making a binary distribution</a>
</li></ul>

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Installing-a-GNU-package" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#The-Makefile-standards" style="font-size: 16px !important; line-height: 16.6667px !important;">The Makefile standards</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Installing-GNU-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing GNU software</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Installing-GNU-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing GNU software</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">1.1 Installing a GNU package</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Autoconfiguring software is distributed with packaged source code
distributions. These are big files with filenames of the form:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     <var style="font-size: 12px !important; line-height: 14.1667px !important;">package</var>-<var style="font-size: 12px !important; line-height: 14.1667px !important;">version</var>.tar.gz
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">For example, the file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf-2.57.tar.gz</span></samp> contains
version 2.57 of GNU Autoconf. 
We often call these
files <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">source distributions</dfn>; sometimes we simply call them
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">packages</dfn>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The steps for installing an autoconfiguring source code distribution are
simple, and if the distribution is not buggy, can be carried out without
substantial user intervention.
     </p><ol start="1" style="font-size: 16px !important; line-height: 16.6667px !important;" type="1">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">First, you have to unpack the package to a directory:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % gunzip foo-1.0.tar.gz
          % tar xf foo-1.0.tar
</pre>
     <p style="font-size: 16px !important; line-height: 16.6667px !important;">This will create the directory <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo-1.0</span></samp> which contains the package's
source code and documentation. Look for the files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">README</span></samp> to see
if there's anything that you should do next. The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">README</span></samp> file might
suggest that you need to install other packages before installing this one,
or it might suggest that you have to do unusual things to install this
package. If the source distribution conforms to the GNU coding standards,
you will find many other documentation files like <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">README</span></samp>. 
See <a href="#Maintaining-the-documentation-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining the documentation files</a>, for an explanation of what
these files mean. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Configure the source code. Once upon a time that used to mean that you have
to edit makefiles and header files. In the wonderful world of Autoconf,
source distributions provide a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> script that will do that
for you automatically. To run the script type:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % cd foo-1.0
          % ./configure
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Now you can compile the source code. Type:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % make
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and if the program is big, you can make some coffee. After the program
compiles, you can run its regression test-suite, if it has one,
by typing
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % make check
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If everything is okey, you can install the compiled distribution with:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % su
          # make install
</pre>
     </li></ol>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp> program launches the shell commands necessary for compiling,
testing and installing the package from source code. However, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>
has no knowledge of what it is really doing. It takes its orders from
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">makefiles</dfn>, files called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp> that have to be present
in every subdirectory of your source code directory tree. From the installer
perspective,
the makefiles define a set of <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">targets</dfn> that correspond to things
that the installer wants to do. The default target is always compiling the
source code, which is what gets invoked when you simply run <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code>. 
Other targets, such as ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">install</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">check</span></samp>¡¯ need to be mentioned
explicitly. Because <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp> takes its orders from the makefile in
the current directory, it is important to run it from the correct
directory. See <a href="#Compiling-with-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiling with Makefiles</a>, for the full story behind
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> program is a shell script that probes your system
through a set of tests to
determine things that it needs to know, and then uses the results
to generate <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp> files from templates stored
in files called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp>. In the early days of the GNU project,
developers used to write <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> scripts by hand. Now, no-one
ever does that any more. Now, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> scripts are automatically
generated by GNU Autoconf from an input file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>. 
GNU Autoconf is part of the GNU build system and we first introduce
in in <a href="#The-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system</a>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">As it turns out, you don't have to write the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp> templates
by hand either. Instead you can use another program, GNU Automake, to
generate <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp> templates from higher-level descriptions
stored in files called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>. In these files you describe
what is being created by your source code, and Automake computes the
makefile targets for compiling, installing and uninstalling it. Automake
also computes targets for compiling and running test suites, and targets
for recursively calling <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code> in subdirectories. The details about
Automake are first introduced in <a href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="The-Makefile-standards" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Configuration-options" style="font-size: 16px !important; line-height: 16.6667px !important;">Configuration options</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Installing-a-GNU-package" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing a GNU package</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Installing-GNU-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing GNU software</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">1.2 The Makefile standards</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">The <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">GNU coding standards</dfn> are a document that describes the requirements
that must be satisfied by all GNU programs. These requirements are driven
mainly by technical considerations, and they are excellent advice for
writing good software. The <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">makefile standards</dfn>, a part of the
GNU coding standards, require that your
makefiles do a lot more than simply compile and install the software.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">One requirement is <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">cleaning targets</dfn>; these targets remove the files
that were generated while installing the package and restore the source
distribution to a previous state. There are three cleaning targets that
corresponds to three levels of cleaning: <code style="font-size: 12px !important; line-height: 14.1667px !important;">clean</code>, <code style="font-size: 12px !important; line-height: 14.1667px !important;">distclean</code>,
<code style="font-size: 12px !important; line-height: 14.1667px !important;">maintainer-clean</code>.
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">clean</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Cleans up all the files that were generated by <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code> and
<code style="font-size: 12px !important; line-height: 14.1667px !important;">make check</code>, but not the files that were generated by running
<code style="font-size: 12px !important; line-height: 14.1667px !important;">configure</code>. This targets cleans the build, but does not undo the
source configuration by the configure script. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">distclean</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Cleans up all the files generated by <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code> and <code style="font-size: 12px !important; line-height: 14.1667px !important;">make check</code>,
but also cleans the files that were generated by running <code style="font-size: 12px !important; line-height: 14.1667px !important;">configure</code>. 
As a result, you can not invoke any other make targets until you run
the configure script again. This target reverts your source directory tree
back to the state in which it was when you first unpacked it. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">maintainer-clean</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Cleans up all the files that <code style="font-size: 12px !important; line-height: 14.1667px !important;">distclean</code> cleans. However it also removes
files that the developers have automatically generated with the GNU build
system. Because users shouldn't need the entire GNU build system to install
a package, these files should not be removed in the final source distribution. 
However, it is occasionally useful for the maintainer to remove and
regenerate these files. 
</dd></dl>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">Another type of cleaning that is required is erasing the package itself from
the installation directory; <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">uninstalling</dfn> the package. To uninstall
the package, you must call
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % make uninstall
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">from the top level directory of the source distribution. This will work only
if the source distribution is configured first. It will work best only
if you do it from the same source distribution, with the same configuration,
that you've used to install the package in the first place.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">When you install GNU software, archive the source code to all the packages
that you install in a directory like <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/src</span></samp> or <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local/src</span></samp>. 
To do that, first run <code style="font-size: 12px !important; line-height: 14.1667px !important;">make clean</code> on the source distribution, and then
use a recursive copy to copy it to <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/src</span></samp>. The presence of a
source distribution in one of these directories should be a signal to you
that the corresponding package is currently installed.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Francois Pinard came up with a cute rule for remembering what the cleaning
targets do:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">If <code style="font-size: 12px !important; line-height: 14.1667px !important;">configure</code> or <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code> did it, <code style="font-size: 12px !important; line-height: 14.1667px !important;">make distclean</code> undoes it. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code> did it, <code style="font-size: 12px !important; line-height: 14.1667px !important;">make clean</code> undoes it. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If <code style="font-size: 12px !important; line-height: 14.1667px !important;">make install</code> did it, <code style="font-size: 12px !important; line-height: 14.1667px !important;">make uninstall</code> undoes it. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If <em style="font-size: 16px !important; line-height: 16.6667px !important;">you</em> did it, <code style="font-size: 12px !important; line-height: 14.1667px !important;">make maintainer-clean</code> undoes it. 
</li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">GNU standard compliant makefiles also have a target for generating <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">tags</dfn>. 
Tags are files, called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">TAGS</span></samp>, that are used by GNU Emacs to allow
you to navigate your source distribution more efficiently. 
More specifically, Emacs uses tags to take you from a place where a C function
is being used in a file, to the file and line number where the function is
defined. To generate the tags call:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % make tags
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Tags are particularly useful when you are not the original author of the
code you are working on, and you haven't yet memorized where everything is. 
See <a href="#Navigating-source-code" style="font-size: 16px !important; line-height: 16.6667px !important;">Navigating source code</a>, for all the details about navigating large
source code trees with Emacs.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Finally, in the spirit of free redistributable code, there must be targets for
cutting a source code distribution. If you type
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % make dist
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">it will rebuild the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo-1.0.tar.gz</span></samp> file that you started with. 
If you modified the source, the modifications will be included in the
distribution (and you should probably change the version number). 
Before putting a distribution up on FTP, you can test its integrity
with:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % make distcheck
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This makes the distribution, then unpacks it in a temporary subdirectory
and tries to configure it, build it, run the test-suite, and check if the
installation script works. If everything is okey then you're told that
your distribution is ready.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Writing reliable makefiles that support all of these targets is a very
difficult undertaking. This is why we prefer to generate our makefiles
instead with GNU Automake.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Configuration-options" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Doing-a-VPATH-build" style="font-size: 16px !important; line-height: 16.6667px !important;">Doing a VPATH build</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#The-Makefile-standards" style="font-size: 16px !important; line-height: 16.6667px !important;">The Makefile standards</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Installing-GNU-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing GNU software</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">1.3 Configuration options</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>¡¯ script accepts many command-line flags that modify
its behaviour and the configuration of your source distribution. To obtain
a list of all the options that are available type
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % ./configure --help
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">on the shell prompt.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The most useful parameter that the installer controls during configuration
is the directory where they want the package to be installed. 
During installation, the following files go to the following directories:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     Executables   ==&gt; /usr/local/bin
     Libraries     ==&gt; /usr/local/lib
     Header files  ==&gt; /usr/local/include
     Man pages     ==&gt; /usr/local/man/man?
     Info files    ==&gt; /usr/local/info
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local</span></samp> directory is called the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">prefix</dfn>. The default
prefix is always <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local</span></samp> but you can set it to anything you like
when you call ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>¡¯ by adding a ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">--prefix</span></samp>¡¯ option. 
For example, suppose that you are not a privileged user, so you can not
install anything in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local</span></samp>, but you would still like to install
the package for your own use. Then you can tell the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>¡¯
script to install the package in your home directory
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">/home/</span><var style="font-size: 12px !important; line-height: 14.1667px !important;">username</var></samp>¡¯:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % ./configure --prefix=/home/<var style="font-size: 12px !important; line-height: 14.1667px !important;">username</var>
     % make
     % make check
     % make install
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">--prefix</span></samp>¡¯ argument tells ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>¡¯ where you want to
install your package, and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>¡¯ will take that into account and
build the proper makefile automatically.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If you are installing the package on a filesystem that is shared by computers
that run variations of GNU or Unix, you need to install the files that
are independent of the operating system in a shared directory, but separate
the files that are dependent on the operating systems in different
directories. Header files and documentation can be shared. However,
libraries and executables must be installed separately. Usually the scheme
used to handle such situations is:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     Executables   ==&gt; /usr/local/<var style="font-size: 12px !important; line-height: 14.1667px !important;">system</var>/bin
     Libraries     ==&gt; /usr/local/<var style="font-size: 12px !important; line-height: 14.1667px !important;">system</var>/lib
     Header files  ==&gt; /usr/local/include
     Man pages     ==&gt; /usr/local/man/man<var style="font-size: 12px !important; line-height: 14.1667px !important;">n</var>
     Info files    ==&gt; /usr/local/info
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The directory <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/var/local/</span><var style="font-size: 12px !important; line-height: 14.1667px !important;">system</var></samp> is called the
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">executable prefix</dfn>, and it is usually a subdirectory of the prefix. 
In general, it can be any directory. If you don't specify the executable
prefix, it defaults to being equal to the prefix. To change that,
use the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">--exec-prefix</span></samp>¡¯ flag. 
For example, to configure for a GNU/Linux system, you would run:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % configure --exec-prefix=/usr/local/linux
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">To configure for GNU/Hurd, you would run:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % configure --exec-prefix=/usr/local/hurd
</pre>
   <p style="font-size: 16px !important; line-height: 16.6667px !important;">In general, there are many directories where a package may want to install
files. Some of these directories are controlled by the prefix, where
others are controlled by the executable prefix. 
See <a href="#Installation-standard-directories" style="font-size: 16px !important; line-height: 16.6667px !important;">Installation standard directories</a>, for a complete discussion of
what these directories are, and what they are for.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Some packages allow you to enable or disable certain features while you
configure the source code. They do that with flags of the form:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">        --with-<var style="font-size: 12px !important; line-height: 14.1667px !important;">package</var>   --enable-<var style="font-size: 12px !important; line-height: 14.1667px !important;">feature</var>
     --without-<var style="font-size: 12px !important; line-height: 14.1667px !important;">package</var>  --disable-<var style="font-size: 12px !important; line-height: 14.1667px !important;">feature</var>
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The <code style="font-size: 12px !important; line-height: 14.1667px !important;">--enable</code> flags usually control whether to enable certain
optional features of the package. Support for international languages,
debugging features, and shared libraries are features that are usually
controlled by these options. 
The <code style="font-size: 12px !important; line-height: 14.1667px !important;">--with</code> flags instead control whether to compile and install
certain optional components of the package. 
The specific flags that are available for a particular source distribution
should be documented in the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">README</span></samp> file.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Finally, <code style="font-size: 12px !important; line-height: 14.1667px !important;">configure</code> scripts can be passed parameters via environment
variables. One of the things that <code style="font-size: 12px !important; line-height: 14.1667px !important;">configure</code> does is decide what
compiler to use and what flags to pass to that compiler. You can
overrule the decisions that <code style="font-size: 12px !important; line-height: 14.1667px !important;">configure</code> makes by setting the flags
<code style="font-size: 12px !important; line-height: 14.1667px !important;">CC</code> and <code style="font-size: 12px !important; line-height: 14.1667px !important;">CFLAGS</code>. For example, to specify that you want the
package to compile with full optimization and without any debugging
symbols (which is a bad idea, yet people want to do it):
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % export CFLAGS="-O3"
     % ./configure
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">To tell <code style="font-size: 12px !important; line-height: 14.1667px !important;">configure</code> to use the system's native compiler instead of
<code style="font-size: 12px !important; line-height: 14.1667px !important;">gcc</code>, and compile without optimization and with debugging symbols:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % export CC="cc"
     % export CFLAGS="-g"
     % ./configure
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This assumes that you are using the <code style="font-size: 12px !important; line-height: 14.1667px !important;">bash</code> shell as your default shell. 
If you use the <code style="font-size: 12px !important; line-height: 14.1667px !important;">csh</code> or <code style="font-size: 12px !important; line-height: 14.1667px !important;">tcsh</code> shells, you need to assign
environment variables with the <code style="font-size: 12px !important; line-height: 14.1667px !important;">setenv</code> command instead. For example:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % setenv CFLAGS "-O3"
     % ./configure
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Similarly, the flags <code style="font-size: 12px !important; line-height: 14.1667px !important;">CXX</code>, <code style="font-size: 12px !important; line-height: 14.1667px !important;">CXXFLAGS</code> control the C++ compiler.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Doing-a-VPATH-build" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Making-a-binary-distribution" style="font-size: 16px !important; line-height: 16.6667px !important;">Making a binary distribution</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Configuration-options" style="font-size: 16px !important; line-height: 16.6667px !important;">Configuration options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Installing-GNU-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing GNU software</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">1.4 Doing a VPATH build</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Autoconfiguring source distributions also support vpath builds. In a
vpath build, the source distribution is stored in a, possibly read-only,
directory, and the actual building takes place in a different directory
where all the generated files are being stored. We call the first
directory, the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">source tree</dfn>, and the second directory the
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">build tree</dfn>. The build tree may be a subdirectory of the source tree,
but it is better if it is a completely separate directory.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If you, the developer, use the standard features of the GNU build system, you
don't need to do anything special to allow your packages to support vpath
builds. The only exception to this is when you define your own make rules
(see <a href="#General-Automake-principles" style="font-size: 16px !important; line-height: 16.6667px !important;">General Automake principles</a>). Then you have to follow certain
conventions to allow vpath to work correctly.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">You, the installer, however do need to do something special. You need
to install and use GNU make. Most Unix make utilities do not support
vpath builds, or their support doesn't work. GNU make is extremely portable,
and if vpath is important to you, there is no excuse for not installing it.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Suppose that <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/sources/foo-0.1</span></samp> contains a source distribution,
and you want to build it in the directory <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/build/foo-0.1</span></samp>. 
Assuming that both directories exist, all you have to do is:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % cd /build/foo-0.1
     % /sources/foo-0.1/configure <var style="font-size: 12px !important; line-height: 14.1667px !important;">...options...</var>
     % make
     % make check
     % su
     # make install
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The configure script and the generated makefiles will take care of the rest.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">vpath builds are preferred by some people for the following reasons:
     </p><ol start="1" style="font-size: 16px !important; line-height: 16.6667px !important;" type="1">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">They prevent the build process form cluttering your source directory
with all sorts of build files. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">To remove a build, all you have to do is remove the build directory. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You can build the same source multiple times using different options. 
This is very useful if you would like to write a script that will
run the test suite for a package while the package is configured in
many different ways (e.g. different features, different compiler optimization,
and so on). It is also useful if you would like to do the same with releasing
binary distributions of the source.
        </li></ol>
Some developers like to use vpath builds all the time. Others use them
only when necessary. 
In general, if a source distribution builds with a vpath build, it also
builds under the ordinary build. The opposite is not true however. 
This is why the <code style="font-size: 12px !important; line-height: 14.1667px !important;">distcheck</code> target checks if your distribution is
correct by attempting a vpath build.

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Making-a-binary-distribution" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Doing-a-VPATH-build" style="font-size: 16px !important; line-height: 16.6667px !important;">Doing a VPATH build</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Installing-GNU-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing GNU software</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">1.5 Making a binary distribution</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">After compiling a source distribution, instead of installing it, you can
make a snapshot of the files that it would install and package that
snapshot in a tarball. It is often convenient to the installers to
install from such snapshots rather than compile from source, especially
when the source is extremely large, or when the amount of packages that
they need to install is large.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To create a binary distribution run the following commands as root:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     # make install DESTDIR=/tmp/dist
     # tar -C /tmp/dist -cvf <var style="font-size: 12px !important; line-height: 14.1667px !important;">package</var>-<var style="font-size: 12px !important; line-height: 14.1667px !important;">version</var>.tar
     # gzip -9 <var style="font-size: 12px !important; line-height: 14.1667px !important;">package</var>-<var style="font-size: 12px !important; line-height: 14.1667px !important;">version</var>.tar
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The variable <code style="font-size: 12px !important; line-height: 14.1667px !important;">DESTDIR</code> specifies a directory, alternative to root,
for installing the compiled package. The directory tree under that directory
is the exact same tree that would have normally been installed. 
Why not just specify a different prefix? Because very often, the prefix
that you use to install the software affects the contents of the files
that actually get installed.

<!-- More discussion needed for making deb and rpm files -->
   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Please note that under the terms of the GNU General Public License,
if you distribute your software as a binary distribution, you also
need to provide the corresponding source distribution. The simplest way
to comply with this requirement is to distribute both distributions
together.

<!-- ============================================================================ -->
<!-- Copyright (C) 1998 Eleftherios Gkioulekas <lf@amath.washington.edu> -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Writing-Good-Programs" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Using-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Using GNU Emacs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Installing-GNU-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing GNU software</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="chapter" style="font-size: 24px !important; line-height: 25px !important;">2 Writing Good Programs</h2>

<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="1" href="#Why-good-code-is-important" style="font-size: 16px !important; line-height: 16.6667px !important;">Why good code is important</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="2" href="#Choosing-a-good-programming-language" style="font-size: 16px !important; line-height: 16.6667px !important;">Choosing a good programming language</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="3" href="#Developing-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">Developing libraries</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="4" href="#Developing-applications" style="font-size: 16px !important; line-height: 16.6667px !important;">Developing applications</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="5" href="#Free-software-is-good-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Free software is good software</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="6" href="#Invoking-the-gpl-utility" style="font-size: 16px !important; line-height: 16.6667px !important;">Invoking the gpl utility</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="7" href="#Inserting-notices-with-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Inserting notices with Emacs</a>
</li></ul>

<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Why-good-code-is-important" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Choosing-a-good-programming-language" style="font-size: 16px !important; line-height: 16.6667px !important;">Choosing a good programming language</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Writing-Good-Programs" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Good Programs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Writing-Good-Programs" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Good Programs</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">2.1 Why good code is important</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">When you work on a software project, one of your short-term goals is to
solve a problem at hand. If you are doing this because someone asked you
to solve the problem, then all you need to do to look good in per eyes is to
deliver a program that works. Nevertheless, regardless of how little
person may appreciate this, doing just that is not good enough. 
Once you have code that gives the right answer to a specific set of problems,
you will want to make improvements to it. As you make these improvements,
you would like to have proof that your code's known reliability hasn't
regressed. Also, tomorrow you will want to move on to a different
set of related problems by repeating as little work as possible. Finally,
one day you may want to
pass the project on to someone else or recruit another developer to help you
out with certain parts. You need to make it possible for the
other person to get up to speed without reinventing your efforts. 
To accomplish these equally important goals you need to write
<em style="font-size: 16px !important; line-height: 16.6667px !important;">good</em> code.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Choosing-a-good-programming-language" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Developing-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">Developing libraries</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Why-good-code-is-important" style="font-size: 16px !important; line-height: 16.6667px !important;">Why good code is important</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Writing-Good-Programs" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Good Programs</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">2.2 Choosing a good programming language</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">To write a good software, you must use the appropriate programming language
and use it well. To make your software free, it should be possible to
compile it with free tools on a free operating system. Therefore, you
should avoid using programming languages that do not have a free compiler.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The C programming language is the native language of GNU, and the GNU coding
standards
encourage you to program in C. The main advantages of C are that it can be
compiled with the system's native compiler, many people know C, and it is
easy to learn. Nevertheless, C has weaknesses: it forces you to manually manage
memory allocation, and any mistakes you might make can lead to very
difficult bugs. Also C forces you to program at a low level. Sometimes it is
desirable to program at a low level, but there are also cases where you want
to build on a higher level.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">For projects where you would like a higher-level <em style="font-size: 16px !important; line-height: 16.6667px !important;">compiled</em> language,
the recommended choice is to use C++. 
The GNU project distributes a free C++ compiler and nowadays most GNU systems
that have a C compiler also have the free C++ compiler. The main advantage of
C++ is that it will automatically manage dynamic memory allocation for you. 
C++ also has a lot of powerful features that allow you to program at a
higher level than C, bringing you closer to the algorithms and the concepts
involved, and making it easier to write robust programs. At the same time,
C++ does not hide low-level details from you and you have the freedom to
do the same low-level hacks that you had in C, if you choose to. 
In fact C++ is 99% backwards compatible with C and it is very easy
to mix C and C++ code. Finally, C++ is
an industry standard. As a result, it has been used to solve a variety of
real-world problems and its specification has evolved
for many years to make it a powerful and mature
language that can tackle such problems effectively. The C++ specification
was frozen and became an ANSI standard in 1998.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">One of the disadvantages of C++ is that C++ object files compiled by
different C++ compilers can not be linked together. 
In order to compile C++ to machine language, a lot of compilation issues
need to be deferred to the linking stage. Because object file formats
are not traditionally sophisticated enough to handle these issues, C++
compilers do various ugly kludges. The problem is that different compilers
do these kludges differently, making object files across compilers
incompatible. This is not a terrible problem, since object files are
incompatible across different platforms anyways. It is only a problem
when you want to use more than one compiler on the same platform. 
Another disadvantage of C++ is that it is harder
to interface a C++ library to another language, than it is to interface
a C library. Finally not as many people know C++ as well as they know C,
and C++ is a very extensive and difficult language to master. 
However these disadvantages must be weighted against the advantages. 
There is a price to using C++ but the price comes with a reward.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If you need a higher-level <em style="font-size: 16px !important; line-height: 16.6667px !important;">interpreted</em> language, then the recommended
choice is to use Guile. Guile is the GNU variant of Scheme, a LISP-like
programming language. Guile is an interpreted language, and you can write
full programs in Guile, or use the Guile interpreter interactively. 
Guile is compatible with the R4RS standard but
provides a lot of GNU extensions. The GNU extensions are so extensive that
it is possible to write entire applications in Guile. Most of the low-level
facilities that are available in C, are also available in Guile.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">What makes the Guile implementation of
Scheme special is not the extensions themselves, but the fact that it
it is very easy for any developer to add their own extensions to Guile, by
implementing them in C. 
By combining C and Guile you
leverage the advantages of both compiled and interpreted languages. 
Performance critical functionality can be implemented in C and
higher-level software development can be done in Guile. 
Also, because Guile is interpreted, when you make your C code available
through an extended Guile interpreter, then the user can also use the
functionality of that code interactively through the interpreter.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The idea of extensible interpreted languages is not new. 
Other examples of extensible interpreted languages are Perl, Python and Tcl. 
What sets Guile apart from these languages is the elegance of Scheme. 
Scheme is the holy grail in the quest for a programming language that
can be extended to support any programming paradigm by using the least
amount of syntax. Scheme has natural support for both arbitrary precision
integer arithmetic and floating point arithmetic. The simplicity of
Scheme syntax, and the completeness of Guile, make it very easy to
implement specialized scripting languages simply by translating them to
Scheme. In Scheme algorithms and data are interchangeable. As a result,
it is easy to write Scheme programs that manipulate Scheme source code. 
This makes Scheme an ideal language for writing programs that manipulate
algorithms instead of data, such as programs that do symbolic algebra. 
Because Scheme can manipulate its own source code, a Scheme program can
save its state by writing Scheme source code into a file, and by parsing
it later to load it back up again. This feature alone is one reason why
engineers should use Guile to configure and drive numerical simulations.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Some people like to use Fortran 77. 
This is in many ways a good language for developing the
computational core of scientific applications. We do have free compilers
for Fortran 77, so using it does not restrict our freedom. 
(see <a href="#Using-Fortran-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Fortran effectively</a>)
Also, Fortran 77 is an aggressively optimized language, and this makes it
very attractive to engineers that want to write code optimized for speed. 
Unfortunately,
Fortran 77 can not do well <em style="font-size: 16px !important; line-height: 16.6667px !important;">anything</em> except array-oriented
numerical computations. 
Managing input/output is unnecessarily difficult with Fortran,
and there's even computational areas, such as infinite precision integer
arithmetic and symbolic computation that are not supported.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">There are many variants of Fortran like Fortran 90, and HPF. 
Fortran 90 attempts, quite miserably, to make Fortran 77 more like
C++. HPF allows engineers to write numerical code that runs on parallel
computers. These variants should be avoided for two reasons:
     </p><ol start="1" style="font-size: 16px !important; line-height: 16.6667px !important;" type="1">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">There are no free compilers for Fortran 90 or HPF. 
If you happen to use a proprietary
operating system, you might as well make use of proprietary compilers
if they generate highly optimized code and that is important to you. 
Nevertheless, in order for your software to be freed, it should be
possible to compile it with free tools on a free operating system. 
Because it is possible to make parallel computers using GNU/Linux
(see the Beowulf project), parallelized software can also be free. 
Therefore both Fortran 90 and HPF should be avoided. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Another problem with these variants is that they are ad hoc languages
that have been invented to enable Fortran to do things that it can not
do by design. Eventually, when engineers will like to do things that Fortran
90 can't do either, it will be necessary to extend Fortran again, rewrite the
compilers and produce yet another variant. What engineers need is a
programming language that has the ability to self extend itself by writing
software in the same programming language. The C++ programming language
can do this without loss of performance. The departmentalization of
disciplines in academia has made it very difficult for such a project
to take off. Despite that, there is ongoing research in this area. 
(for example, see the Blitz++ project)
        </li></ol>
It is almost impossible to write good programs entirely in Fortran, so
please use Fortran only for the numerical core of your application
and do the bookkeeping tasks, including input/output using a more appropriate
language.

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">If you have written a program entirely in Fortran, please do not ask anyone
else to maintain your code, unless person is like you and also knows only
Fortran. If Fortran is the only language that you know, then please learn
at least C and C++ and use Fortran only when necessary. Please do not
hold the opinion that contributions in science and engineering
are ¡°true¡± contributions and software development is just a ¡°tool¡±. 
This bigoted attitude is behind the thousands of lines of ugly unmaintainable
code that goes around in many places. Good software development can be
an important contribution in its own right, and regardless of what your
goals are, please appreciate it and encourage it. To maximize the benefits
of good software, please make your software free. 
(<strong style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: Cross reference copyright section in this chapter</strong>)

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Developing-libraries" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Developing-applications" style="font-size: 16px !important; line-height: 16.6667px !important;">Developing applications</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Choosing-a-good-programming-language" style="font-size: 16px !important; line-height: 16.6667px !important;">Choosing a good programming language</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Writing-Good-Programs" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Good Programs</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">2.3 Developing libraries</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">The key to better code is to focus away from developing
monolithic throw-away hacks that do only one job, and focus on developing
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">libraries</dfn> (<strong style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: cross reference</strong>). Break down the original
problem to parts, and the parts to smaller parts, until you get down to simple
subproblems that can be easily tested, and from which you can construct
solutions for both the original problem and future variants. Every library
that you write is a legacy that you can share with other developers, that
want to solve similar problems. Each library will allow these other developers
to focus on their problem and not have to reinvent the parts that are common
with your work from scratch. You should definitely make libraries out of
subproblems that are likely to be broadly useful. 
Please be very liberal in what you consider ¡°broadly useful¡±. 
Please program in a defensive way that renders reusable as much code as
possible, regardless of whether or not you plan to reuse it in the near future. 
The final application should merely have to assemble all the libraries
together and make their functionality accessible to the user through a
good interface.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">It is very important for each of your libraries to have a complete
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">test suite</dfn>. The purpose of the test suite is to detect bugs
in the library and to prove to you or convince you, the developer, that the
library works. A test suite is composed of a collection of test programs
that link with your libraries and experiment with the features
provided by the library. These test programs should return with
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     exit(0);
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">if they do not detect anything wrong with the library and with
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     exit(1);
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">if they detect problems. The test programs should not be installed with
the rest of the package. They are meant to be run after your software
is compiled and before it is installed. Therefore, they should be written
so that they can run using the compiled but uninstalled files of the library. 
Test programs should not output messages by default. They should run
completely quietly and communicate with the environment in a yes or no
fashion using the <code style="font-size: 12px !important; line-height: 14.1667px !important;">exit</code> code. However, it is useful for test programs
to output debugging information when they fail during development. Statements
that output such information should be surrounded by conditional
directives like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #if INSPECT_ERRORS
      printf("Division by zero: %d / %d\n",a,b);
     #endif
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This way it becomes easy to switch them on or off upon demand. The preferred
way to manipulate a macro like this <code style="font-size: 12px !important; line-height: 14.1667px !important;">INSPECT_ERRORS</code> is by adding
a switch to your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> script. You can do this by adding the
following lines to <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     AC_ARG_WITH(inspect,
       [  --with-inspect           Inspect test suite errors],
       [ AC_DEFINE(INSPECT_ERRORS, 1, "Inspect test suite errors")],
       [ AC_DEFINE(INSPECT_ERRORS, 0, "Inspect test suite errors")])
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">After the
library is debugged, the debug statements should not be removed. If a
future version of the library regresses and an old test begins to fail
again, it will be useful to be able to reactivate the same error messages
that were useful in debugging the test when it was first put together,
and it may be necessary to add a few new ones.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The best time to write each test program is <em style="font-size: 16px !important; line-height: 16.6667px !important;">as soon as it is possible!</em>. 
You should not be lazy, and you should not just keep throwing in code after
code after code. The minute there is enough code in there to put together some
kind of test program, <em style="font-size: 16px !important; line-height: 16.6667px !important;">just do it!</em> When you write new code,
it is easy to think that you are producing work with every new line of code
that is written. The reality is that you <em style="font-size: 16px !important; line-height: 16.6667px !important;">know</em> you have produced new
work
every time you write working a test program for new features, and
<em style="font-size: 16px !important; line-height: 16.6667px !important;">not a minute before</em>. 
Another time when you should definitely write a test program is when you
find a bug while ordinarily using the library. Then, write a test program
that triggers the bug, fix the bug, and keep the test in your test suite. 
This way, if a future modification reintroduces the same bug it will be
detected.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Please document your library as you go. The best time to update your
documentation is immediately after you get new test programs checking out new
futures. You might feel that you are too busy to write documentation, but
the truth of the matter is that you will <em style="font-size: 16px !important; line-height: 16.6667px !important;">always</em> be too busy. 
In fact, if you are a busy person, you are likely to have many other
obligations bugging you around for your attention. There may be times that
you have to stay away from a project for a large amount of time. 
If you have consistently been maintaining documentation, it will help you
refocus on your project even after many months of absence.

</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Developing-applications" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Free-software-is-good-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Free software is good software</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Developing-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">Developing libraries</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Writing-Good-Programs" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Good Programs</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">2.4 Developing applications</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;"><dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Applications</dfn> are complete executable programs that can be run by the
end-user. With library-oriented development the actual functionality
is developed by writing libraries and debugged by developing test-suites
for each library. With command-line oriented applications, the application
source code parses the arguments that are passed to it by the user,
and calls up the right functions in the library to carry out the user's
requests. With GUI
<a rel="footnote" href="#fn-1" name="fnd-1" style="font-size: 16px !important; line-height: 16.6667px !important;"><sup style="font-size: 13.3333px !important; line-height: 15px !important;">1</sup></a>
applications, the application source code creates the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">widgets</dfn> that
compose the interface, binds them to <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">actions</dfn>, and then enters an
event loop. Each action is implemented in terms of the functionality
provided by the appropriate library.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">It should be possible to implement applications by using relatively few
application-specific source files, since most of the functionality is
actually done in libraries. In some cases, the application is simple
enough that it would be an overkill to package its functionality as
a library. Nevertheless, in such cases please separate the source code
that handles actual functionality from the source code that handles
the user interface. Also, please always separate the code that handles
input/output with the code that does actual computations. 
If these aspects of your source code are sufficiently separated then you make
it easier for other people to reuse parts of your code in their applications. 
You also make it easier of yourself to switch to library-oriented
development when your application grows and is no longer ¡°simple enough¡±.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Library-oriented development allows you to write good and robust applications. 
In return it requires discipline. Sometimes you may need to add
experimental functionality that is not available through your libraries. 
The right thing to do is to extend the appropriate library. 
The easy thing to do is to implement it as part of your application-specific
source code. If the feature is experimental and undergoing many changes,
it may be best to go with the easy approach at first. Still, when
the feature matures, please migrate it to the appropriate library, document
it, and take it out of the application source code. What we mean by
discipline is doing these migrations, when the time is right, despite
pressures from ¡°real life¡±, such as deadlines, pointy-haired bosses,
and nuclear terrorism. A rule of thumb for deciding
when to migrate code to a library is when you find yourself cut-n-pasting
chunks of code from application to application. If you do not do the right
thing, your code will become increasingly harder to debug, harder to
maintain, and less reliable.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Applications should also be documented, especially the ones that are
command-line oriented. Application documentation should be thorough in
explaining to the user all the things that he needs to know to use
the application effectively and should be distributed separately
from the application itself. Nevertheless, applications should recognize
the <code style="font-size: 12px !important; line-height: 14.1667px !important;">--help</code> switch and output a synopsis of how
the application is used. Applications should also recognize the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">--version</code> switch and state their version number. The easiest
way to make applications understand these two switches is to use the
GNU Argp library (<em style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: cross reference</em>).

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Free-software-is-good-software" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Invoking-the-gpl-utility" style="font-size: 16px !important; line-height: 16.6667px !important;">Invoking the gpl utility</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Developing-applications" style="font-size: 16px !important; line-height: 16.6667px !important;">Developing applications</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Writing-Good-Programs" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Good Programs</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">2.5 Free software is good software</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">One of the reasons why you should write good code is because it allows
you to make your code robust, reliable and most useful to your needs. 
Another reason is to make it useful to other people too, and make it
easier for them to work with your code and reuse it for their own work. 
In order for this to be possible, you need to give worry about a few
obnoxious legal issues.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Invoking-the-gpl-utility" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Inserting-notices-with-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Inserting notices with Emacs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Free-software-is-good-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Free software is good software</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Writing-Good-Programs" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Good Programs</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">2.6 Invoking the ¡®<samp style="font-size: 14.0333px !important; line-height: 16.6667px !important;"><span class="samp" style="font-size: 14.0333px !important; line-height: 16.6667px !important;">gpl</span></samp>¡¯ utility</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining these legalese notices can be quite painful after some time. 
To ease the burden, Autotools distributes a utility called ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl</span></samp>¡¯. 
This utility will conveniently generate for you all the legal wording you
will ever want to use. It is important to know that this application is
not approved in any way by the Free Software Foundation. By this I mean
that I haven't asked their opinion of it yet.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To create the file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">COPYING</span></samp> type:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gpl -l COPYING
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">If you want to include a copy of the GPL in your documentation, you can
generate a copy in texinfo format like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gpl -lt gpl.texi
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Also, every time you want to create a new file, use the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl</span></samp>¡¯ to
generate the copyright notice. If you want it covered by the GPL use the
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">standard notice</dfn>. If you want to invoke the Guile-like permissions, then
also use the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">library notice</dfn>. If you want to grant unlimited permissions,
meaning no copyleft, use the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">special notice</dfn>. 
The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl</span></samp>¡¯ utility takes many different flags to take into account
the different commenting conventions.
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">For a C file, create the standard notice with
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % gpl -c file.c
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">the library notice with
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % gpl -cL file.c
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and the special notice with
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % gpl -cS file.c
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">For a C++ file, create the standard notice with
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % gpl -cc file.cc
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">the library notice with
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % gpl -ccL file.cc
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and the special notice with
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % gpl -ccS file.cc
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">For a shells script (BASH, Perl) that uses hash marks for commenting,
create the standard notice with
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % gpl -sh foo.pl
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">the library notice with
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % gpl -shL foo.tcl
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and the special notice with
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % gpl -shS foo.pl
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">It does not make sense to use the library notice, if no executable is being
formed from this file. If however, you parse that file into C code that is
then compiled into object code, then you may consider using the library
notice on it instead of the special notice. One of the features provided
by Autotools allows you to embed text, such as Tcl scripts, into the
executable. In that case, you can use the library notice to license the
original text. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">For files that define autoconf macros:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % gpl -m4 file.m4
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">In general, we exempt autoconf macro files from the GNU GPL because the terms
of autoconf also exclude its output, the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>¡¯ script, from the
GPL. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">For <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>, or files that describe targets:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % gpl -am Makefile.am
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">For these we also exempt them from the GPL because they are so trivial
that it makes no sense to add copyleft protection. 
</p></li></ul>

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Inserting-notices-with-Emacs" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Invoking-the-gpl-utility" style="font-size: 16px !important; line-height: 16.6667px !important;">Invoking the gpl utility</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Writing-Good-Programs" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Good Programs</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">2.7 Inserting notices with Emacs</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">If you are using <em style="font-size: 16px !important; line-height: 16.6667px !important;">GNU Emacs</em>, then you can insert these copyright notices
on-demand while you're editing your source code. Autotools bundles two
Emacs packages: <code style="font-size: 12px !important; line-height: 14.1667px !important;">gpl</code> and <code style="font-size: 12px !important; line-height: 14.1667px !important;">gpl-copying</code> which provide you with
equivalents of the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl</span></samp>¡¯ command that can be run under Emacs. These
packages will be byte-compiled and installed automatically for you while
installing Autotools.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To use these packages, in your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp> you must declare your identity
by adding the following commands:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     (setq user-mail-address "me@here.com")
     (setq user-full-name "My Name")
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Then you must require the packages to be loaded:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     (require 'gpl)
     (require 'gpl-copying)
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">These packages introduce a set of Emacs commands all of which are prefixed
as <code style="font-size: 12px !important; line-height: 14.1667px !important;">gpl-</code>. To invoke any of these commands press <code style="font-size: 12px !important; line-height: 14.1667px !important;">M-x</code>, type
the name of the command and press enter.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The following commands will generate notices for your source code:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl-c</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Insert the standard GPL copyright notice using C commenting. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl-cL</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">lnsert the standard GPL copyright notice using C commenting,
followed by a Guile-like library exception. This notice is used by
the Guile library. You may want to use it for libraries that you write
that implement some type of a standard that you wish to encourage. 
You will be prompted for the name of your package. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl-cc</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Insert the standard GPL copyright notice using C++ commenting. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl-ccL</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Insert the standard GPL copyright notice using C++ commenting,
followed by a Guile-like library exception. You will be prompted for the
name of your package
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl-sh</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Insert the standard GPL copyright notice using shell commenting
(i.e. has marks). 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl-shL</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Insert the standard GPL copyright notice using shell commenting,
followed by a Guile-like library exception. This can be useful for
source files, like Tcl files, which are executable code that gets linked
in to form an executable, and which use hash marks for commenting. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl-shS</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Insert the standard GPL notice using shell commenting, followed by the
special Autoconf exception. This is useful for small shell scripts that
are distributed as part of a build system. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl-m4</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Insert the standard GPL copyright notice using m4 commenting (i.e. dnl)
and the special Autoconf exception. This is the preferred notice for new
Autoconf macros. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl-el</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Insert the standard GPL copyright notice using Elisp commenting. This
is useful for writing Emacs extension files in Elisp. 
</dd></dl>
   The following commands will generate notices for your source code:
     <dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl-insert-copying-texinfo</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Insert a set of paragraphs very similar to the ones appearing
at the Copying section of this manual. It is a good idea to include
this notice in an <code style="font-size: 12px !important; line-height: 14.1667px !important;">unnumbered</code> chapter titled ¡°Copying¡± in the
Texinfo documentation of your source code. You will be prompted for the
title of your package. That title will substitute the word <em style="font-size: 16px !important; line-height: 16.6667px !important;">Autotools</em>
as it appears in the corresponding section in this manual. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl-insert-license-texinfo</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Insert the full text of the GNU General Public License in Texinfo format. 
If your documentation is very extensive, it may be a good idea to include
this notice either at the very beginning of your manual, or at the end. 
You should include the full license, if you plan to distribute the manual
separately from the package as a printed book. 
</dd></dl>

<!-- Copyright (C) 1998 Eleftherios Gkioulekas <lf@amath.washington.edu> -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
<!-- ============================================================================ -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Using-GNU-Emacs" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Compiling-with-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiling with Makefiles</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Writing-Good-Programs" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Good Programs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="chapter" style="font-size: 24px !important; line-height: 25px !important;">3 Using GNU Emacs</h2>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs is an environment for running Lisp programs that manipulate text
interactively. To call Emacs merely an <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">editor</dfn> does not do it
justice, unless you redefine the word ¡°editor¡± to the broadest meaning
possible. Emacs is so extensive, powerful and flexible, that you can almost
think of it as a self-contained ¡°operating system¡± in its own right.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs is a very important part of the GNU development tools
because it provides an integrated environment for software development. 
The simplest thing you can do with Emacs is edit your source code. 
However, you can do a lot more than that. You can run a debugger,
and step through your program while Emacs shows you the corresponding
sources that you are stepping through. You can browse on-line Info
documentation and man pages, download and read your email off-line, and
follow discussions on newsgroups. Emacs is particularly helpful with writing
documentation with the Texinfo documentation system. You will find it harder
to use Texinfo, if you don't use Emacs. It is also very helpful with editing
files on remote machines over FTP, especially when your connection to the
internet is over a slow modem. 
Finally, and most importantly, Emacs
is <em style="font-size: 16px !important; line-height: 16.6667px !important;">programmable</em>. You can write Emacs functions in Emacs Lisp to
automate any chore that you find particularly useful in your own
work. Because Emacs Lisp is a full programming language, there is no
practical limit to what you can do with it.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If you already know a lot about Emacs, you can skip this chapter and move on. 
If you are a ¡°vi¡± user, then we will assimilate you:
See <a href="#Using-vi-emulation" style="font-size: 16px !important; line-height: 16.6667px !important;">Using vi emulation</a>, for details. 
<a rel="footnote" href="#fn-2" name="fnd-2" style="font-size: 16px !important; line-height: 16.6667px !important;"><sup style="font-size: 13.3333px !important; line-height: 15px !important;">2</sup></a>
This chapter will be most useful to the novice user who would like to
set per Emacs up and running for software development, however it is
not by any means comprehensive. See <a href="#Further-reading-on-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Further reading on Emacs</a>, for
references to more comprehensive Emacs documentation.

</p><ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="1" href="#Introduction-to-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Introduction to Emacs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="2" href="#Installing-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing GNU Emacs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="3" href="#Basic-Emacs-concepts" style="font-size: 16px !important; line-height: 16.6667px !important;">Basic Emacs concepts</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="4" href="#Configuring-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Configuring GNU Emacs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="5" href="#Using-vi-emulation" style="font-size: 16px !important; line-height: 16.6667px !important;">Using vi emulation</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="6" href="#Navigating-source-code" style="font-size: 16px !important; line-height: 16.6667px !important;">Navigating source code</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="7" href="#Using-Emacs-as-an-email-client" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Emacs as an email client</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="8" href="#Handling-patches" style="font-size: 16px !important; line-height: 16.6667px !important;">Handling patches</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="9" href="#Inserting-copyright-notices-with-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Inserting copyright notices with Emacs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Hacker-sanity-with-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Hacker sanity with Emacs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Further-reading-on-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Further reading on Emacs</a>
</li></ul>

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Introduction-to-Emacs" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Installing-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing GNU Emacs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Using GNU Emacs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Using GNU Emacs</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">3.1 Introduction to Emacs</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs is an environment for running Lisp programs that manipulate text
interactively. Because Emacs is completely programmable, it can be used to
implement not only editors, but a full
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">integrated development environment</dfn> for software development. Emacs can
also browse info documentation, run email clients, a newsgroup reader,
a sophisticated xterm, and an understanding psychotherapist.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Under the X window system, Emacs controls multiple x-windows
called <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">frames</dfn>. Each frame has a menu bar and the main editing area. 
The editing area is divided into <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">windows</dfn> with horizontal bars. 
You can grab these bars and move them around with the first mouse button. 
<a rel="footnote" href="#fn-3" name="fnd-3" style="font-size: 16px !important; line-height: 16.6667px !important;"><sup style="font-size: 13.3333px !important; line-height: 15px !important;">3</sup></a>
Each window is bound to a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">buffer</dfn>. A buffer is an Emacs data structure
that contains text. Most editing commands operate on buffers, modifying
their contents. When a buffer is bound to a window, then you can see its
contents as they are being changed. It is possible for a buffer to be bound
to two windows, on different frames or on the same frame. Then whenever
a change is made to the buffer, it is reflected on both windows. It is
not necessary for a buffer to be bound to a window, in order to operate on
it. In a typical Emacs session you may be manipulating more buffers than
the windows that you have on your screen.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">A buffer can be <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">visiting</dfn> files. In that case, the contents of the
buffer reflect the contents of a file that is being edited. But buffers
can be associated with anything you like, so long as you program
it up. For example, under the Dired directory editor, a buffer is bound
to a directory, showing you the contents of the directory. When you
press &lt;Enter&gt; while the cursor is over a file name, Emacs creates
a new buffer, visits the file, and rebinds the window with that buffer. 
From the user's perspective, by pressing &lt;Enter&gt; he ¡°opened¡± the
file for editing. If the file has already been ¡°opened¡± then Emacs
simply rebinds the existing buffer for that file.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs uses a variant of LISP, called Emacs LISP, as its programming language. 
Every time you press a key, click the mouse, or select an entry from the
menu bar, an Emacs LISP function is evaluated. The <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">mode</dfn> of the
buffer determines, among many other things, what function to evaluate. 
This way, every buffer can be associated with functionality that defines
what you do in that buffer. For example you can program your buffer to edit
text, to edit source code, to read news, and so on. You can also run
LISP functions directly on the current buffer by typing <code style="font-size: 12px !important; line-height: 14.1667px !important;">M-x</code> and
the name of the function that you want to run. 
<a rel="footnote" href="#fn-4" name="fnd-4" style="font-size: 16px !important; line-height: 16.6667px !important;"><sup style="font-size: 13.3333px !important; line-height: 15px !important;">4</sup></a>

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">What is known as the ¡°Emacs editor¡± is the default implementation of
an editor under the Emacs system. If you prefer the vi editor, then you
can instead run a vi clone, Viper (see <a href="#Using-vi-emulation" style="font-size: 16px !important; line-height: 16.6667px !important;">Using vi emulation</a>). 
The main reason why you should use Emacs, is not the particular editor,
but the way Emacs integrates editing with all the other functions that
you like to do as a software developer. For example:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">You can edit multiple files under one program. From the user
perspective, you can edit two different parts of a file under two different
x-windows. And when you revisit a file, the cursor is placed where it was
the last time you were editing the file. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You can quickly browse a directory and navigate from file to file. 
You can also do simple operations on files, without needing to go to
a shell. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You can transparently edit files over FTP. This is extremely valuable
if you are editing source code on a remote computer and you are connected
through a modem link. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You can have a running shell for typing unix commands, and access the same
shell from any Emacs frame. 
You can use that shell to run ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">reconf</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>¡¯ and
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯. You can also save the contents of your session to a file. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Color is used to highlight syntactic information about the text. 
This makes browsing more pleasing to the eye, and it can also help you
catch syntactic mistakes. Emacs understands the syntax of most types
of files you are likely to edit and will color them up for you accordingly. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">When you edit source code under Emacs, it will automatically be formatted
for you to conform to the GNU coding standards. At your request,
appropriate copyright notices can be inserted. 
(see <a href="#Inserting-notices-with-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Inserting notices with Emacs</a>)
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">When you make changes to a file, Emacs can automatically warp you to the
appropriate <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ChangeLog</span></samp> file to record your changes. It will
handle formatting details for you allowing you to focus on content. 
(see <a href="#Maintaining-the-documentation-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining the documentation files</a>)
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs is invaluably helpful for writing Texinfo documentation. In fact,
it is excruciatingly painful to maintain Texinfo documentation without
using Emacs. 
(see <a href="#GNU-Emacs-support-for-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">GNU Emacs support for Texinfo</a>)
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You can run the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">gdb</span></samp> debugger under Emacs and use it to step
through your code. As you do that, Emacs will show you on a separate buffer
the code that is currently being stepped through. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You can read email and newsgroups. If you are connected over a modem,
all your editing is done locally, so you do not get bogged down by the
speed of your connection. 
You can apply patches that you get through email or news
to your source code directly, without needing to save the message to a file. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs currently supports almost every international language, even
languages that do not use the Roman alphabet, like Greek, Chinese, Hebrew,
Tibetan,etc. 
</li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">All of these features make Emacs a very powerful, albeit unusual,
integrated development environment. 
Many users of proprietary operating
systems, like Lose95
<a rel="footnote" href="#fn-5" name="fnd-5" style="font-size: 16px !important; line-height: 16.6667px !important;"><sup style="font-size: 13.3333px !important; line-height: 15px !important;">5</sup></a>,
complain that GNU (and Unix) does not have an integrated development
environment. As a matter of fact it does. All of the above features make Emacs
a very powerful IDE.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs has its own very extensive documentation
(see <a href="#Further-reading-on-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Further reading on Emacs</a>). In this manual we will only go over
the fundamentals for using Emacs effectively
as an integrated development environment.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Installing-GNU-Emacs" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Basic-Emacs-concepts" style="font-size: 16px !important; line-height: 16.6667px !important;">Basic Emacs concepts</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Introduction-to-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Introduction to Emacs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Using GNU Emacs</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">3.2 Installing GNU Emacs</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">If Emacs is not installed on your system, you will need to get a source
code distribution and compile it yourself. Installing Emacs is not
difficult. If Emacs is already installed on your GNU/Linux system,
you might still need to reinstall it: you might not have the most
recent version, you might have XEmacs instead, you might not have
support for internationalization, or your Emacs might not have compiled
support for reading mail over POP (a feature very useful to developers
that hook up over modem). If any of these is the case, then uninstall
that version of Emacs, and reinstall Emacs from a source code distribution.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The entire Emacs source code is distributed in three separate files:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">emacs-21.2.tar.gz</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This is the main Emacs distribution. If you do not care about
international language support, you can install this by itself. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">leim-21.2.tar.gz</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This supplements the Emacs distribution with support for multiple languages. 
If you develop internationalized software, it is likely that you will need
this. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">intlfonts-1.1.tar.gz</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This file contains the fonts that Emacs uses to support international
languages. If you want international language support, you will
definitely need this. 
</dd></dl>
   Get a copy of these three files, place them under the same directory
and unpack them with the following commands:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gunzip emacs-21.2.tar.gz
     % tar xf emacs-21.2.tar
     % gunzip leim-21.2.tar.gz
     % tar xf leim-21.2.tar
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Both tarballs will unpack under the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">emacs-21.2</span></samp> directory. 
When this is finished, configure the source code with the following commands:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % cd emacs-21.2
     % ./configure --with-pop --with-gssapi
     % make
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">--with-pop</span></samp>¡¯ flag is almost always
a good idea, especially if you are running Emacs from a home computer
that is connected to the internet over modem. It will let you use Emacs
to download your email from your internet provider and read it off-line
(see <a href="#Using-Emacs-as-an-email-client" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Emacs as an email client</a>). Most internet providers use
GSSAPI-authenticated POP. If you need to support other authentication
protocols however, you may also want to add one of the following flags:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">--with-kerberos</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">support Kerberos-authenticated POP
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">--with-kerberos5</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">support Kerberos version 5 authenticated POP
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">--with-hesiod</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">support Hesiod to get the POP server host
</dd></dl>
   Then compile and install Emacs with:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     $ make
     # make install
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs is a very large program, so this will take a while.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To install <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">intlfonts-1.1.tar.gz</span></samp> unpack it, and follow
the instructions in the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">README</span></samp> file. Alternatively, you may find it
more straightforward to install it from a Debian package. Packages for
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">intlfonts</span></samp> exist as of Debian 2.1.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Basic-Emacs-concepts" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Configuring-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Configuring GNU Emacs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Installing-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing GNU Emacs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Using GNU Emacs</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">3.3 Basic Emacs concepts</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">In this section we describe what Emacs is and what it does. We will not
yet discuss how to make Emacs work. That discussion is taken up in the
subsequent sections, starting with <a href="#Configuring-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Configuring GNU Emacs</a>. This
section instead covers the fundamental ideas that you need to understand
in order to make sense out of Emacs.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">You can run Emacs from a text terminal, such as a vt100 terminal, but it is
usually nicer to run Emacs under the X-windows system. 
To start Emacs type
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % emacs &amp;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">on your shell prompt. The seasoned GNU developer usually sets up per
X configuration such that it starts Emacs when person logs in. Then,
person uses that Emacs process for all of per work until person logs out. 
To quit Emacs press <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">C-x C-c</kbd>, or select
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     Files ==&gt; Exit Emacs
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">from the menu. The notation <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">C-c</kbd> means <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">&lt;CTRL&gt;-c</kbd>. The
separating dash ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-</span></samp>¡¯ means that you press the key after the dash while
holding down the key before the dash. 
Be sure to quit Emacs before logging out, to ensure that your work
is properly saved. If there are any files that you haven't yet saved,
Emacs will prompt you and ask you if you want to save them, before quiting. 
If at any time you want Emacs to stop doing what it's doing, press
<kbd style="font-size: 12px !important; line-height: 14.1667px !important;">C-g</kbd>.

<!-- FIXME: describe minibuffer and what the other mouse-buttons do -->
   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Under the X window system, Emacs controls multiple x-windows which are
called <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">frames</dfn>. Each frame has a menu bar and the main editing area. 
The editing area is divided into <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">windows</dfn>
<!--  -->
<a rel="footnote" href="#fn-6" name="fnd-6" style="font-size: 16px !important; line-height: 16.6667px !important;"><sup style="font-size: 13.3333px !important; line-height: 15px !important;">6</sup></a>
<!--  -->
by horizontal bars, called <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">status bars</dfn>. Every status bar contains
concise information about the status of the window <em style="font-size: 16px !important; line-height: 16.6667px !important;">above</em> the status
bar. The minimal editing area has at least one big window, where editing
takes place, and a small one-line window called the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">minibuffer</dfn>. 
Emacs uses the minibuffer to display brief messages and to prompt the user
to enter commands or other input. The minibuffer has no status bar of
its own.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Each window is bound to a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">buffer</dfn>. A buffer is an Emacs data structure
that contains text. Most editing commands operate on buffers, modifying
their contents. When a buffer is bound to a window, then you can see its
contents as they are being changed. It is possible for a buffer to be bound
to two windows, on different frames or on the same frame. Then whenever
a change is made to the buffer, it is reflected on both windows. It is
not necessary for a buffer to be bound to a window, in order to operate on
it. In a typical Emacs session you may be manipulating more buffers than
the windows that you actually have on your screen.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">A buffer can be <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">visiting</dfn> files. In that case, the contents of the
buffer reflect the contents of a file that is being edited. But buffers
can be associated with anything you like, so long as you program
it up. For example, under the Dired directory editor, a buffer is bound
to a directory, showing you the contents of the directory. When you
press &lt;RET&gt; while the cursor is over a file name, Emacs creates
a new buffer, visits the file, and rebinds the window with that buffer. 
From the user's perspective, by pressing &lt;RET&gt; person ¡°opened¡± the
file for editing. If the file has already been ¡°opened¡± then Emacs
simply rebinds the existing buffer for that file.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Sometimes Emacs will divide a frame to two or more windows. 
You can switch from one window to another by clicking the 1st mouse button,
while the mouse is inside the destination window. 
To resize these windows, grab the status bar with the
1st mouse button and move it up or down. Pressing the 2nd mouse
button, while the mouse is on a status bar, will <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">bury</dfn> the window bellow
the status bar. 
Pressing the 3rd mouse button will <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">bury</dfn> the window above the
status bar, instead. Buried windows are not killed; they still exist and you
can get back to them by selecting them from the menu bar, under:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     Buffers ==&gt; <var style="font-size: 12px !important; line-height: 14.1667px !important;">name-of-buffer</var>
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Buffers, with some exceptions, are usually named after the filenames of
the files that they correspond to.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Once you visit a file for editing, then all you need to do is to edit it! 
The best way to learn how to edit files using the standard Emacs <em style="font-size: 16px !important; line-height: 16.6667px !important;">editor</em>
is by working through the on-line Emacs tutorial. To start the on-line tutorial
type <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">C-h t</kbd> or select:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     Help ==&gt; Emacs Tutorial
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">If you are a vi user, or you simply prefer to use `vi' key bindings, then
read <a href="#Using-vi-emulation" style="font-size: 16px !important; line-height: 16.6667px !important;">Using vi emulation</a>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In Emacs, every <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">event</dfn> causes a Lisp function to be executed. 
An <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">event</dfn> can be any keystroke, mouse movement, mouse clicking or
dragging, or a menu bar selection. The function implements the appropriate
response to the event. Almost all of these functions are written in a
variant of Lisp called Emacs Lisp. The actual Emacs program, the executable,
is an Emacs Lisp interpreter with the implementation of frames, buffers,
and so on. However, the actual functionality that makes Emacs usable is
implemented in Emacs Lisp.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Sometimes, Emacs will bind a few words of text to an Emacs function. 
For example, when you use Emacs to browse Info documentation, certain
words that corresponds to hyperlinks to other nodes are bound to a function
that makes Emacs follow the hyperlink. When such a binding is actually
installed, moving the mouse over the bound text highlights it momentarily. 
While the text is highlighted, you can invoke the binding by clicking the
2nd mouse button.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Sometimes, an Emacs function might go into an infinite loop, or it might
start doing something that you want to stop. You can <strong style="font-size: 16px !important; line-height: 16.6667px !important;">always</strong> make
Emacs abort
<a rel="footnote" href="#fn-7" name="fnd-7" style="font-size: 16px !important; line-height: 16.6667px !important;"><sup style="font-size: 13.3333px !important; line-height: 15px !important;">7</sup></a>
the function it is currently running by pressing <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">C-g</kbd>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs functions are usually spawned by Emacs itself in response to an
event. However, the user can also spawn an Emacs function by typing:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     &lt;ALT&gt;-x <var style="font-size: 12px !important; line-height: 14.1667px !important;">function-name</var> &lt;RET&gt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">These functions can also be aborted with <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">C-g</kbd>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">It is standard in Emacs documentation to refer to the &lt;ALT&gt; key with
the letter ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">M</span></samp>¡¯. So, in the future, we will be referring to function
invocations as:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     M-x <var style="font-size: 12px !important; line-height: 14.1667px !important;">function-name</var>
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Because Emacs functionality is implemented in an <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">event-driven</dfn> fashion,
the Emacs developer has to write Lisp functions that implement functionality,
and then bind these functions to events. Tables of such bindings are
called <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">keymaps</dfn>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs has a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">global keymap</dfn>, which is in effect
at all times, and then it has specialized keymaps depending on what
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">editing mode</dfn> you use. Editing modes are selected when you visit a
file depending on the name of the file. So, for example, if you visit a
C file, Emacs goes into the C mode. If you visit <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp>, Emacs
goes into makefile mode. The reason for associating different modes
with different types of files is that the user's editing needs depend
on the type of file that person is editing.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">You can also enter a mode by running the Emacs function that
initializes the mode. 
Here are the most commonly used modes:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">M-x c-mode</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Mode for editing C programs according to the GNU coding standards. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">M-x c++-mode</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Mode for editing C++ programs
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">M-x sh-mode</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Mode for editing shell scripts. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">M-x m4-mode</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Mode for editing Autoconf macros. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">M-x texinfo-mode</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Mode for editing documentation written in the Texinfo formatting language. 
See <a href="#Introduction-to-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">Introduction to Texinfo</a>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">M-x makefile-mode</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Mode for editing makefiles. 
</dd></dl>
   As a user you shouldn't have to worry too much about the modes. The defaults
do the right thing. However, you might want to enhance Emacs to suit your
needs better.

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Configuring-GNU-Emacs" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Using-vi-emulation" style="font-size: 16px !important; line-height: 16.6667px !important;">Using vi emulation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Basic-Emacs-concepts" style="font-size: 16px !important; line-height: 16.6667px !important;">Basic Emacs concepts</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Using GNU Emacs</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">3.4 Configuring GNU Emacs</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">To use Emacs effectively for software development you need to configure it. 
Part of the configuration needs to be done in your X-resources file. 
On a Debian GNU/Linux system, the X-resources can be configured by editing
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     /etc/X11/Xresources
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">In many systems, you can configure X-resources by editing a file called
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.Xresources</span></samp> or <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.Xdefaults</span></samp> on your home directory, but
that is system-dependent. The configuration that I use on my system
is:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     ! Emacs defaults
     emacs*Background: Black
     emacs*Foreground: White
     emacs*pointerColor: White
     emacs*cursorColor: White
     emacs*bitmapIcon: on
     emacs*font: fixed
     emacs*geometry: 80x40
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">In general I favor dark backgrounds and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">fixed</span></samp>¡¯ fonts. Dark backgrounds
make it easier to sit in front of the monitor for a prolonged period of
time. ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">fixed</span></samp>¡¯ fonts looks nice and it's small enough to make efficient
use of your screen space. Some people might prefer larger fonts however.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">When Emacs starts up, it looks for a file called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp> at the user's
home directory, and evaluates its contents through the Emacs Lisp
interpreter. You can customize and modify Emacs' behaviour by
adding commands, written in Emacs Lisp, to this file. Here's a brief
outline of the ways in which you can customize Emacs:

     </p><ol start="1" style="font-size: 16px !important; line-height: 16.6667px !important;" type="1">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">A common change to the standard configuration is
assigning <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">global variables</dfn> to non-default
values. Many Emacs features and behaviours can be controlled and
customized this way. 
This is done with the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">setq</span></samp>¡¯ command, which accepts the
following syntax:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (setq <var style="font-size: 12px !important; line-height: 14.1667px !important;">variable</var> <var style="font-size: 12px !important; line-height: 14.1667px !important;">value</var>)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">For example:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (setq viper-mode t)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">You can access on-line documentation for global variables by running:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          M-x describe-variable
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">In some cases, Emacs depends on the values of shell
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">environment variables</dfn>. These can be manipulated with ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">setenv</span></samp>¡¯:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (setenv "<var style="font-size: 12px !important; line-height: 14.1667px !important;">variable</var>" "<var style="font-size: 12px !important; line-height: 14.1667px !important;">value</var>")
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">For example:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (setenv "INFOPATH" "/usr/info:/usr/local/info")
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">setenv</span></samp>¡¯ does not affect the shell that invoked Emacs, but it does
affect Emacs itself, and shells that are run under Emacs.

     </p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Another way to enhance your Emacs configuration is by modifying the
global keymap. This can be done with the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">global-set-key</span></samp>¡¯ command,
which follows the following syntax:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (global-set-key [<var style="font-size: 12px !important; line-height: 14.1667px !important;">key sequence</var>] '<var style="font-size: 12px !important; line-height: 14.1667px !important;">function</var>)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">For example, adding:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (global-set-key [F12 d] 'doctor)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">to <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp> makes the key sequence <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">F12 d</kbd> equivalent to
running ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">M-x doctor</span></samp>¡¯. Emacs has many functions that provide all
sorts of features. To find out about specific functions, consult
the <cite style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs user manual</cite>. Once you know that a function exists,
you can also get on-line documentation for it by running:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          M-x describe-function
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">You can also write your own functions in Emacs Lisp.

     </p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">It is not always good to introduce bindings to the global map. Any bindings
that are useful only within a certain mode should be added only to the local
keymap of that mode. Consider for example the following Emacs Lisp function:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (defun texi-insert-@example ()
            "Insert an @example @end example block"
            (interactive)
            (beginning-of-line)
            (insert "\n@example\n")
            (save-excursion
              (insert "\n")
              (insert "@end example\n")
              (insert "\n@noindent\n")))
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">We would like to bind this function to the key ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">F9</span></samp>¡¯, however we
would like this binding to be in effect only when we are within
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">texinfo-mode</span></samp>¡¯. To do that, first we must define a hook function
that establishes the local bindings using ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">define-key</span></samp>¡¯:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (defun texinfo-elef-hook ()
            (define-key texinfo-mode-map [F9] 'texi-insert-@example))
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The syntax of ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">define-key</span></samp>¡¯ is similar to ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">global-set-key</span></samp>¡¯
except it takes the name of the local keymap as an additional
argument. The local keymap of any ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><var style="font-size: 12px !important; line-height: 14.1667px !important;">name</var><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-mode</span></samp>¡¯ is
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><var style="font-size: 12px !important; line-height: 14.1667px !important;">name</var><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-mode-map</span></samp>¡¯. Finally, we must ask ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">texinfo-mode</span></samp>¡¯
to call the function ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">texinfo-elef-hook</span></samp>¡¯. To do that use the
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">add-hook</span></samp>¡¯ command:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (add-hook 'texinfo-mode-hook 'texinfo-elef-hook)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">In some cases, Emacs itself will provide you with a few optional hooks
that you can attach to your modes.

     </p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You can write your own modes! If you write a program whose use involves
editing some type of input files, it is very much appreciated by the
community if you also write an Emacs mode for that file and distribute
it with your program.
        </li></ol>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">With the exception of simple customizations, most of the more complicated
ones require that you write new Emacs Lisp functions, distribute them
with your software and somehow make them visible to the installer's
Emacs when person installs your software. 
See <a href="#Emacs-Lisp-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs Lisp with Automake</a>, for more details on how to include
Emacs Lisp packages to your software.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Here are some simple customizations that you might want to add to your
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp> file:

     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">Set your default background and foreground color for all your Emacs frames:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (set-background-color "black")
          (set-foreground-color "white")
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">You can change the colors to your liking. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Tell Emacs your name and your email address. This is particularly useful
when you work on an off-line home system but you want Emacs to use the email
address of your internet provider, and your real name. Specifying your real
name is necessary if you call yourself ¡°Skeletor¡± or ¡°Dude¡± on your
home computer.
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (setq user-mail-address "karl@whitehouse.com")
          (setq user-full-name "President Karl Marx")
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Make sure the name is your real name, and the email address that you
include can receive email 24 hours per day. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Add a few toys to the status bar. These commands tell Emacs to display a
clock, and the line and column number of your cursor's position at all times.
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (display-time)
          (line-number-mode 1)
          (column-number-mode 1)
</pre>
     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">When you use the mouse to cut and paste text with Emacs, mouse button 1
will select text and mouse button 2 will paste it. Unfortunately,
when you click mouse button 2, emacs will first move the cursor at the
location of the mouse, and then insert the text in that location. 
If you are used to editing with vi under xterm, you will instead prefer
to position the cursor yourself, and use mouse button 2 to simply cause
the text to be pasted without changing the position of the cursor. If you
prefer this behaviour, then add the following line to your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp>:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (global-set-key [mouse-2] 'yank)
</pre>
     <p style="font-size: 16px !important; line-height: 16.6667px !important;">By default, selected text in Emacs buffers is highlighted with blue color. 
However, you can also select and paste into an Emacs buffer text that
you select from other applications, like your web browser, or your xterm. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Use <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">font-lock</dfn>. Font-lock decorates your edited text with colors that
make it easier to read text with complicated syntax, such as software
source codes. This is one of the coolest features of Emacs. To use it, add
the following lines to your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp>:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (global-font-lock-mode t)
          (setq font-lock-maximum-size nil)
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">To get rid of the scrollbar at the left of your Emacs window, type
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (setq scroll-bar-mode nil)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The only reason that the scrollbar is default is to make Emacs more similar
to what lusers are used to. It is assumed that seasoned hacker, who will
be glad to see the scrollbar bite it, will figure out how to make it go away. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">With most versions of Emacs, you should add the following to your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp>
to make sure that editing <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> takes you to <code style="font-size: 12px !important; line-height: 14.1667px !important;">m4-mode</code>
and editing <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> takes you to <code style="font-size: 12px !important; line-height: 14.1667px !important;">makefile-mode</code>.
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (setq auto-mode-alist
            (append '(
              ("configure.in" . m4-mode)
              ("\\.m4\\'" . m4-mode)
              ("\\.am\\'" . makefile-mode))
             auto-mode-alist))
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">You will have to edit such files if you use the GNU build system. 
See <a href="#The-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system</a>, for more details. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If you have installed Emacs packages in non-standard directories,
you need to add them to the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">load-path</span></samp>¡¯ variable. For example,
here's how to add a couple of directories:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (setq load-path
                (append "/usr/share/emacs/site-lisp"
                        "/usr/local/share/emacs/site-site"
                        (expand-file-name "~lf/lisp")
                        load-path))
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Note the use of ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">expand-file-name</span></samp>¡¯ for dealing with non-absolute
directories. If you are a user in an account where you don't have root
privilege, you are very likely to need to install your Emacs packages
in a non-standard directory. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">See <a href="#Using-vi-emulation" style="font-size: 16px !important; line-height: 16.6667px !important;">Using vi emulation</a>, if you would like to customize Emacs to run
a vi editor under the Emacs system. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">See <a href="#Navigating-source-code" style="font-size: 16px !important; line-height: 16.6667px !important;">Navigating source code</a>, for more details on how to customize Emacs to
make navigating a source code directory tree easier. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">See <a href="#Using-Emacs-as-an-email-client" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Emacs as an email client</a>, if you would like to set up Emacs to
process your email. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Autotoolset distributes two Emacs packages. One for handling copyright notices,
and another one for handling Texinfo documentation. 
See <a href="#Inserting-copyright-notices-with-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Inserting copyright notices with Emacs</a>, and
See <a href="#GNU-Emacs-support-for-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">GNU Emacs support for Texinfo</a>, for more details. 
</li></ul>
   Emacs now has a graphical user interface to customization that will
write <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp> for you automatically. To use it, select:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     Help ==&gt; Customize ==&gt; Browse Customization Groups
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">from the menu bar. You can also manipulate some common settings from:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     Help ==&gt; Options
</pre>
   <!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Using-vi-emulation" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Navigating-source-code" style="font-size: 16px !important; line-height: 16.6667px !important;">Navigating source code</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Configuring-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Configuring GNU Emacs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Using GNU Emacs</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">3.5 Using vi emulation</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Many hackers prefer to use the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">vi</span></samp>¡¯ editor. The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">vi</span></samp>¡¯ editor is
the standard editor on Unix. It is also always available on GNU/Linux. 
Many system administrators find it necessary to use vi, especially when they
are in the middle of setting up a system in which Emacs has not been
installed yet. Besides that, there are many compelling reasons why people
like vi.
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">Vi requires only two special keys: the &lt;SHIFT&gt; key and the &lt;ESC&gt;
key. All the other keys that you need are standard on all keyboards. 
You do not need &lt;CTRL&gt;,&lt;ALT&gt;,the cursor keys or any of the function
keys. Some terminals that miss the escape key, usually have the control
key and you can get escape with:
<kbd style="font-size: 12px !important; line-height: 14.1667px !important;">&lt;CTRL&gt;-[</kbd> <!-- } -->
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Vi was designed to deal with terminals that connect to mainframes over
a very slow line. So it has been optimized to allow you to do the most
editing possible with the fewest keystrokes. This allows users to edit
text very efficiently. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Vi allows your fingers to stay at the center of the keyboard, with the
occasional hop to the escape key. It does not require you to stretch your
fingers in funny control combinations, which makes typing less tiring
and more comfortable. 
</li></ul>
   Because most rearrangements of finger habits are not as optimal as the
vi finger habits, most vi users react very unpleasantly to other editors. 
For the benefit of these users, in this section we describe how to
run a vi editor under the Emacs system. Similarly, users of other editors
find the vi finger habits strange and unintuitive. For the benefit of
these users we describe briefly how to use the vi editor, so they can
try it out if they like.

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">The vi emulation package for the Emacs system is called <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Viper</dfn>. 
To use Viper, add the following lines in your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp>:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     (setq viper-mode t)
     (setq viper-inhibit-startup-message 't)
     (setq viper-expert-level '3)
     (require 'viper)
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">We recommend expert level 3, as the most balanced blend
of the vi editor with the Emacs system. Most editing modes are aware of
Viper, and when you begin editing the text you are immediately thrown into
Viper. Some modes however do not do that. In some modes, like the Dired mode,
this is very appropriate. In other modes however, especially custom modes
that you have added to your system, Viper does not know about them, so
it does not configure them to enter Viper mode by default. To tell a
mode to enter Viper by default, add a line like the following to
your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp> file:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     (add-hook 'm4-mode-hook 'viper-mode)
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The modes that you are most likely to use during software development are
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     c-mode  , c++-mode , texinfo-mode
     sh-mode , m4-mode  , makefile-mode
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Sometimes, Emacs will enter Viper mode by default in modes where you prefer
to get Emacs modes. In some versions of Emacs, the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">compilation-mode</code> is such a mode. To tell a mode <strong style="font-size: 16px !important; line-height: 16.6667px !important;">not</strong> to
enter Viper by default, add a line like the following to your
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp> file:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     (add-hook 'compilation-mode-hook 'viper-change-state-to-emacs)
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The Emacs distribution has a Viper manual. For more details on setting
Viper up, you should read that manual.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The vi editor has these things called <em style="font-size: 16px !important; line-height: 16.6667px !important;">editing modes</em>. An editing
mode defines how the editor responds to your keystrokes. Vi has three
editing modes: <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">insert mode</dfn>, <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">replace mode</dfn> and <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">command mode</dfn>. 
If you run Viper, there is also the Emacs mode. Emacs indicates which
mode you are in by showing one of
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">&lt;I&gt;</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">&lt;R&gt;</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">&lt;V&gt;</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">&lt;E&gt;</span></samp>¡¯ on the statusbar
correspondingly for the Insert, Replace, Command and Emacs modes. 
Emacs also shows you the mode by the color of the cursor. This makes it
easy for you to keep track of which mode you are in.
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Insert mode</dfn>:
When you are in insert mode, the editor simply <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">inserts</dfn> the things that
you type into the text that is being edited. If there are any characters
in front of your cursor, these characters are pushed ahead and they are
not overwritten. Under Viper, when you are in insert mode, the color
of your cursor is green. The only key that has special meaning, while you
are in insert mode is &lt;ESC&gt;. If you press the escape key, you are taken
to <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">command mode</dfn>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Replace mode</dfn>:
When you are in replace mode, the editor replaces the text under the cursor
with the text that is being typed. So, you want insert mode when you want
to write over what's already written. Under Viper, when you are in
replace mode, the color of your cursor is red. The &lt;ESC&gt; will take you
to <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">command mode.</dfn>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Command mode</dfn>:
When you are in command mode, every letter key that you press is a command
and has a special meaning. Some of these keys allow you to navigate the
text. Other keys allow you to enter either insert or replace mode. 
And other keys do various special things. Under Viper, when you are in
command mode, the color of your cursor is white. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs mode</dfn>:
When you are in Emacs mode, then Viper is turned off on the specific
buffer, and Emacs behaves as the default Emacs editor. 
You can switch between Emacs mode and Command mode by pressing
<kbd style="font-size: 12px !important; line-height: 14.1667px !important;">&lt;CTRL&gt;-z</kbd>. So to go to Emacs mode, from Insert of Replace mode, you
need to go through Command mode. When you are dealing with a buffer that
runs a special editing mode, like Dired,
Emacs defines a specialized ¡°command mode¡± for manipulating that buffer,
that can be completely different from the canonical Viper command mode. 
You want to be in that mode to access the intended functionality. Occasionally
however, you may like to hop to viper's command mode to navigate the buffer,
do a search or save the buffer's contents. When you hop to one of the
other three modes, the buffer will suddenly be just text to your editor. 
</li></ul>
   While you are in Command mode, you can prepend keystrokes with a number. 
Then the subsequent keystroke will be executed as many times as the number. 
We now list the most important keystrokes that are available to you,
while you are in Viper's command mode:
     <ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">The following keystrokes allow you to navigate the cursor around your text
without making any changes on the text itself
          <dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">h</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">moves one character to the left
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">j</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">moves down one line
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">k</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">moves up one line
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">l</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">moves one character to the left
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">w</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">moves forward one word
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">5w</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">moves forward five words (get the idea?) 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">b</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">moves back one word
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">0</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">moves to the beginning of the current line
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">$</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">moves to the end of the current line
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">G</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">moves to the last line in the file
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">1G</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">moves to the first line in the file
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">:10</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">moves to line 10 in the file (get the idea?) 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">{</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">moves up one paragraph
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">}</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">moves down one paragraph
</dd></dl>
     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The following keystrokes allow you to delete text
          <dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">x</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Deletes the character under the cursor
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">dd</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Deletes the current line
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">4dd</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Deletes four lines
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">dw</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Deletes the current word
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">8dw</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Deletes the next eight words
</dd></dl>
     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The following keystrokes allow you to enter Insert mode
          <dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">a</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Append text after the cursor position
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">i</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Insert text at the current cursor position
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">o</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Insert text on a new line bellow the current line
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">O</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Insert text on a new line above the current line
</dd></dl>
     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The following keystrokes allow you to enter Replace mode.
          <dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">R</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Replace text at the cursor position and stay in Replace mode. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">s</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Replace (substitute) only the character at the cursor position, and
enter Insert mode for all subsequent characters. 
</dd></dl>
     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The following commands handle file input/output. All of these commands
are prepended by the <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">:</kbd> character. The <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">:</kbd> character is used
for commands that require many characters to be properly expressed. 
The full text of these commands is entered in the minibuffer. Under viper,
the minibuffer itself can run under insert, replace and command mode. 
By default you get insert mode, but you can switch to command mode
by pressing &lt;ESC&gt;.
          <dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">:w</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Save the file to the disk
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">:w!</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Force the file to be saved to disk even when file permissions do not allow
it but you have the power to overrule the permissions. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">:w </kbd><var style="font-size: 16px !important; line-height: 16.6667px !important;">filename</var><kbd style="font-size: 12px !important; line-height: 14.1667px !important;"> &lt;RET&gt;</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Save the file to the disk under a specific filename. 
When you press &lt;SPACE&gt; Emacs inserts the full pathname of the current
directory for you, which you can edit if you like. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">:w! </kbd><var style="font-size: 16px !important; line-height: 16.6667px !important;">filename</var><kbd style="font-size: 12px !important; line-height: 14.1667px !important;"> &lt;RET&gt;</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Force the file to be saved to the disk under a specific filename. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">:r </kbd><var style="font-size: 16px !important; line-height: 16.6667px !important;">filename</var><kbd style="font-size: 12px !important; line-height: 14.1667px !important;"> &lt;RET&gt;</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Paste a file from the disk at the cursor's current position. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">:W</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Save all the files on all the Emacs buffers that correspond to open files. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">:q</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Kill the buffer. This does not quite the editor at expert level 3. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">:q!</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Kill the buffer even if the contents are not saved. Use with caution! 
</dd></dl>
     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The following commands handle search and replace
          <dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">/</kbd><var style="font-size: 16px !important; line-height: 16.6667px !important;">string</var><kbd style="font-size: 12px !important; line-height: 14.1667px !important;"> &lt;RET&gt;</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Search for <var style="font-size: 16px !important; line-height: 16.6667px !important;">string</var>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">n</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Go to the next occurence of <var style="font-size: 16px !important; line-height: 16.6667px !important;">string</var>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">N</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Go to the previous occurence of <var style="font-size: 16px !important; line-height: 16.6667px !important;">string</var>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">:%s/</kbd><var style="font-size: 16px !important; line-height: 16.6667px !important;">string1</var><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">/</kbd><var style="font-size: 16px !important; line-height: 16.6667px !important;">string2</var><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">/g &lt;RET&gt;</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Replace all occurences of <var style="font-size: 16px !important; line-height: 16.6667px !important;">string1</var> with <var style="font-size: 16px !important; line-height: 16.6667px !important;">string2</var>. 
Use this with extreme caution! 
</dd></dl>
     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The following commands handle <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">undo</dfn>
          <dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">u</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Undo the previous change. Press again to undo the undo
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">.</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Press this if you want to repeat the undo further. 
</dd></dl>
     </li></ul>
   These are enough to get you started. Getting used to dealing with the modes
and learning the commands is a matter of building finger habits. It may take
you a week or two before you become comfortable with Viper. When Viper
becomes second nature to you however, you won't want to tolerate what you
used to use before.

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Navigating-source-code" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Using-Emacs-as-an-email-client" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Emacs as an email client</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-vi-emulation" style="font-size: 16px !important; line-height: 16.6667px !important;">Using vi emulation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Using GNU Emacs</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">3.6 Navigating source code</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">When you develop software, you need to edit many files at the same time,
and you need an efficient way to switch from one file to another. 
The most general solution in Emacs is by going through <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Dired</dfn>, the
Emacs Directory Editor.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To use Dired effectively, we recommend that you add the following
customizations to your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp> file:
First, add
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     (add-hook 'dired-load-hook (function (lambda () (load "dired-x"))))
     (setq dired-omit-files-p t)
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">to activate the extended features of <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Dired</dfn>. 
Then add the following key-bindings to the global keymap:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     (global-set-key [f1] 'dired)
     (global-set-key [f2] 'dired-omit-toggle)
     (global-set-key [f3] 'shell)
     (global-set-key [f4] 'find-file)
     (global-set-key [f5] 'compile)
     (global-set-key [f6] 'visit-tags-table)
     (global-set-key [f8] 'add-change-log-entry-other-window)
     (global-set-key [f12] 'make-frame)
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">If you use viper (see <a href="#Using-vi-emulation" style="font-size: 16px !important; line-height: 16.6667px !important;">Using vi emulation</a>), you should also add the
following customization to your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp>:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     (add-hook 'compilation-mode-hook 'viper-change-state-to-emacs)
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">With these bindings, you can navigate from file to file or switch between
editing and the shell simply by pressing the right function keys. 
Here's what these key bindings do:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f1</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Enter the directory editor. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f2</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Toggle the omission of boring files. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f3</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Get a shell at the current Emacs window. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f4</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Jump to a file, by filename. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f5</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Run a compilation job. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f6</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Load a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">TAGS</span></samp> file. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f8</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Update the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ChangeLog</span></samp> file. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f12</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Make a new frame. 
</dd></dl>
   When you first start Emacs, you should create a few frames with <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f12</kbd>
and move them around on your screen. Then press <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f1</kbd> to enter the
directory editor and begin navigating the file system. To select a
file for editing, move the cursor over the filename and press enter. 
You can select the same file from more than one emacs window, and edit
different parts of it in every different window, or use the mouse to
cut and paste text from one part of the file to another. 
If you want to take a direct jump to a specific file, and you know the
filename of that file, it may be faster to press <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f4</kbd> and enter the
filename rather than navigate your way there through the directory editor.

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">To go down a directory, move the cursor over the directory filename and
press <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">RET</kbd>. To go up a few directories, press <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f1</kbd> and when you
are prompted for the new directory, with the current directory as the
default choice, erase your way up the hierarchy and press &lt;RET&gt;. 
To jump to a substantially different directory that you have
visited recently, press <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f1</kbd> and then when prompted for the destination
directory name, use the cursor keys to select the directory that you want
among the list of directories that you have recently visited.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">While in the directory navigator, you can use the cursor keys to move
to another file. Pressing &lt;&lt;RET&gt;&gt; will bring that file up for editing. 
However there are many other things that Dired will let you do instead:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">Z</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Compress the file. If already compressed, uncompress it. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">L</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Parse the file through the Emacs Lisp interpreter. Use this
only on files that contain Emacs Lisp code. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">I, N</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Visit the current file as an Info file, or as a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">man page</dfn>. 
See <a href="#Browsing-documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Browsing documentation</a>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">d</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Mark the file for deletion
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">u</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Remove a mark on the file for deletion
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">x</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Delete all the files marked for deletion
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">C </kbd><var style="font-size: 16px !important; line-height: 16.6667px !important;">destination</var><kbd style="font-size: 12px !important; line-height: 14.1667px !important;"> &lt;RET&gt;</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Copy the file to <var style="font-size: 16px !important; line-height: 16.6667px !important;">destination</var>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">R </kbd><var style="font-size: 16px !important; line-height: 16.6667px !important;">filename</var><kbd style="font-size: 12px !important; line-height: 14.1667px !important;"> &lt;RET&gt;</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Rename the file to <var style="font-size: 16px !important; line-height: 16.6667px !important;">filename</var>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">+ </kbd><var style="font-size: 16px !important; line-height: 16.6667px !important;">directoryname</var><kbd style="font-size: 12px !important; line-height: 14.1667px !important;"> &lt;RET&gt;</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Create a directory with name <var style="font-size: 16px !important; line-height: 16.6667px !important;">directoryname</var>. 
</dd></dl>
   Dired has many other features. See the <cite style="font-size: 16px !important; line-height: 16.6667px !important;">GNU Emacs User Manual</cite>,
for more details.

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs provides another method for jumping from file to file: <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">tags</dfn>. 
Suppose that you are editing a C program whose source code is distributed
in many files, and while editing the source for the function <code style="font-size: 12px !important; line-height: 14.1667px !important;">foo</code>,
you note that it is calling another function <code style="font-size: 12px !important; line-height: 14.1667px !important;">gleep</code>. If you move
your cursor on <code style="font-size: 12px !important; line-height: 14.1667px !important;">gleep</code>, then Emacs will let you jump to the file
where <code style="font-size: 12px !important; line-height: 14.1667px !important;">gleep</code> is defined by pressing <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">M-.</kbd>. You can also jump to
other occurences in your code where <code style="font-size: 12px !important; line-height: 14.1667px !important;">gleep</code> is invoked by pressing
<kbd style="font-size: 12px !important; line-height: 14.1667px !important;">M-,</kbd>. In order for this
to work, you need to do two things: you need to generate a tags
file, and you need to tell emacs to load the file. If your source code
is maintained with the GNU build system, you can create that tags files
by typing:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % make tags
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">from the top-level directory of your source tree. Then load the tags
file in Emacs by navigating Dired to the top-level directory of your
source code, and pressing <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f6</kbd>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">While editing a file, you may want to hop to the shell prompt to run a
program. You can do that at any time, on any frame, by pressing
<kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f3</kbd>. To get out of the shell, and back into the file that you were
editing, enter the directory editor by pressing <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f1</kbd>, and then
press <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">&lt;RET&gt;</kbd> repeatedly. The default selections will take you back
to the file that you were most recently editing on that frame.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">One very nice feature of Emacs is that it understands tar files. 
If you have a tar file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo.tar</span></samp> and you select it under Dired,
then Emacs will load the entire file, parse it, and let you edit the
individual files that it includes directly. This only works, however,
when the tar file is not compressed. Usually tar files are distributed
compressed, so you should uncompress them first with <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">Z</kbd> before
entering them. Also, be careful not to load an extremely huge tar file. 
Emacs may mean ¡°eating memory and constantly swapping¡± to some people, but
don't push it!

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Another very powerful feature of Emacs is the Ange-FTP package: it allows
you to edit files on other computers, remotely, over an FTP connection. 
From a user perspective, remote files behave just like local files. 
All you have to do is press <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f1</kbd> or <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f4</kbd> and request a directory
or file with filename following this form:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     /<var style="font-size: 12px !important; line-height: 14.1667px !important;">username</var>@<var style="font-size: 12px !important; line-height: 14.1667px !important;">host</var>:/<var style="font-size: 12px !important; line-height: 14.1667px !important;">pathname</var>
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Then Emacs will access for you the file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/</span><var style="font-size: 12px !important; line-height: 14.1667px !important;">pathname</var></samp> on the
remote machine <var style="font-size: 16px !important; line-height: 16.6667px !important;">host</var> by logging in over FTP as <var style="font-size: 16px !important; line-height: 16.6667px !important;">username</var>. 
You will be prompted for a password, but that will happen only once per
host. Emacs will then
download the file that you want to edit and let you make your changes locally. 
When you save your changes, Emacs will use an FTP connection again to upload
the new version back to the remote machine, replacing the older version of
the file there. When you develop software on a remote computer, this feature
can be very useful, especially if your connection to the Net is over
a slow modem line. This way you can edit remote files just like you do
with local files. You will still have to telnet to the remote computer
to get a shell prompt. In Emacs, you can do this with <code style="font-size: 12px !important; line-height: 14.1667px !important;">M-x telnet</code>. 
An advantage to telneting under Emacs is that it records your session,
and you can save it to a file to browse it later.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">While you are making changes to your files, you should also be keeping
a diary of these changes in a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ChangeLog</span></samp> file
(see <a href="#Maintaining-the-documentation-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining the documentation files</a>). Whenever you are done
with a modification that you would like to log, press <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f8</kbd>,
<em style="font-size: 16px !important; line-height: 16.6667px !important;">while the cursor is still at the same file</em>, and preferably near the
modification (for example, if you are editing a C program, be inside the
same C function). Emacs will split the frame
to two windows. The new window brings up your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ChangeLog</span></samp> file. 
Record your changes and click on the status bar that separates the two
windows with the 2nd mouse button to get rid of the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ChangeLog</span></samp> file. 
Because updating the log is a frequent chore, this Emacs help is
invaluable.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If you would like to compile your program, you can use the shell prompt
to run ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯. However, the Emacs way is to use the <code style="font-size: 12px !important; line-height: 14.1667px !important;">M-x compile</code>
command. Press <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f5</kbd>. Emacs will prompt you for the command that you
would like to run. You can enter something like: ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>¡¯,
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make dvi</span></samp>¡¯, and so on
(see <a href="#Installing-a-GNU-package" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing a GNU package</a>). The directory on which this command
will run is the current directory of the current buffer. If your current
buffer is visiting a file, then your command will run on the same directory
as the file. If your current buffer is the directory editor, then your
command will run on that directory. When you press <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">&lt;RET&gt;</kbd>, Emacs will
split the frame into another window, and it will show you the command's
output on that window. If there are error messages, then Emacs converts
these messages to hyperlinks and you can follow them by pressing <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">&lt;RET&gt;</kbd>
while the cursor is on them, or by clicking on them with the 2nd mouse button. 
When you are done, click on the status bar with the 2nd mouse button to
get the compilation window off your screen.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Using-Emacs-as-an-email-client" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Handling-patches" style="font-size: 16px !important; line-height: 16.6667px !important;">Handling patches</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Navigating-source-code" style="font-size: 16px !important; line-height: 16.6667px !important;">Navigating source code</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Using GNU Emacs</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">3.7 Using Emacs as an email client</h3>

<!-- Hackers get lots of email -->
<!-- Explain about GNUS and RMAIL. -->
<!-- How to configure RMAIL -->
<!-- Running RMAIL -->
<!-- key bindings for sending/reading mail -->
<!-- all about labeling mail. advice on what labels are nice to use -->
<!-- saving mail to other files -->
<!-- replying to spam -->
<p style="font-size: 16px !important; line-height: 16.6667px !important;">You can use Emacs to read your email. If you maintain free software, or
in general maintain a very active internet life, you will get a lot of
email. The Emacs mail readers have been designed to address the needs
of software developers who get endless tons of email every day.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs has two email programs: Rmail and Gnus. Rmail is simpler to learn,
and it is similar to many other mail readers. The philosophy behind Rmail
is that instead of separating messages to different folders, you attach
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">labels</dfn> to each message but leave the messages on the same folder. 
Then you can tell Rmail to browse only messages that have specific labels. 
Gnus, on the other hand, has a rather eccentric approach to email. It is
a news-reader, so it makes your email look like another newsgroup! 
This is actually very nice if you are subscribed to many mailing lists
and want to sort your email messages automatically. To learn more about
Gnus, read the excellent Gnus manual. In this manual, we will only describe
Rmail.

<!-- FIXME: This should change. I should learn GNUS and see how one can -->
<!-- combine the two readers to sort out mailing list mail from -->
<!-- communication mail -->
   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">When you start Rmail, it moves any new mail from your mailboxes to the file
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">~/RMAIL</span></samp> in your home directory. So, the
first thing you need to tell Rmail is where your mailboxes are. 
To do that, add the following to your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp>:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     (require 'rmail)
     (setq rmail-primary-inbox-list
           (list <var style="font-size: 12px !important; line-height: 14.1667px !important;">"mailbox1"</var> <var style="font-size: 12px !important; line-height: 14.1667px !important;">"mailbox2"</var> ...))
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">If your mailboxes are on a filesystem that is mounted to your computer,
then you just have to list the corresponding filenames. 
If your mailbox
is on a remote computer, then you have to use the POP protocol to
download it to your own computer. In order for this to work, the remote
computer must support POP. Many hobbyist developers receive their email
on an internet provider computer that is connected to the network 24/7
and download it on their personal computer whenever they dial up.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">For example, if <code style="font-size: 12px !important; line-height: 14.1667px !important;">karl@whitehouse.gov</code> is your email address at your
internet provider, and they support POP, you would have to add the
following to your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp>:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     (require 'rmail)
     (setq rmail-primary-inbox-list
           (list "po:karl"))
     (setenv "MAILHOST" "whitehouse.gov")
     (setq rmail-pop-password-required t)
     (setq user-mail-address "karl@whitehouse.gov")
     (setq user-full-name "President Karl Marx")
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The string <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">"po:</span><var style="font-size: 12px !important; line-height: 14.1667px !important;">username</var><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">"</span></samp> is used to tell the POP daemon which
mailbox you want to download. The environment variable <code style="font-size: 12px !important; line-height: 14.1667px !important;">MAILHOST</code>
tells Emacs which machine to connect to, to talk with a POP daemon. 
We also tell Emacs to prompt in the minibuffer to request
the password for logging in with the POP daemon. The alternative is to
hardcode the password into the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp> file, but doing so is not
a very good idea: if the security of your home computer is compromised, the
cracker also gets your password for another system. Emacs will remember the
password however, after the first time you enter it, so you won't have to
enter it again later, during the same Emacs session. Finally, we tell Emacs
our internet provider's email address and our ¡°real name¡± in the internet
provider's account. This way, when you send email from your home computer,
Emacs will spoof it to make it look like it was sent from the internet
provider's computer.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In addition to telling Rmail where to find your email, you may also
want to add the following configuration options:
     </p><ol start="1" style="font-size: 16px !important; line-height: 16.6667px !important;" type="1">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">Quote messages that you respond to with the <code style="font-size: 12px !important; line-height: 14.1667px !important;">&gt;</code> prefix:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (setq mail-yank-prefix "&gt;")
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Send yourself a blind copy of every message
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (setq mail-self-blind t)
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Alternatively, archive all your outgoing messages to a separate file:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (setq mail-archive-file-name "/home/<var style="font-size: 12px !important; line-height: 14.1667px !important;">username</var>/mail/sent-mail")
</pre>
     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">To have Rmail insert your signature in every message that you send:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (setq mail-signature t)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and add the actual contents of your signature to <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.signature</span></samp>
at your home directory.
        </p></li></ol>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">Once Rmail is configured, to start downloading your email, run
<code style="font-size: 12px !important; line-height: 14.1667px !important;">M-x rmail</code> in Emacs. Emacs will load your mail, prompt you for
your POP password if necessary, and download your email from the internet
provider. Then, Emacs will display the first new message. You may quickly
navigate by pressing <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">n</kbd> to go to the next message or <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">p</kbd> to go
to the previous message. 
It is much better however to tell Emacs to compile a summary of your messages
and let you to navigate your mailbox using the summary. To do that, press
<kbd style="font-size: 12px !important; line-height: 14.1667px !important;">h</kbd>. Emacs will split your frame to two windows: one window will
display the current message, and the other window the summary. A highlighted
bar in the summary indicates what the current message is. Emacs will also
display any labels that you have associated with your messages. 
While the current buffer is the summary, you can navigate from message
to message with the cursor keys (<kbd style="font-size: 12px !important; line-height: 14.1667px !important;">up</kbd> and <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">down</kbd> in particular). 
You can also run any of the following commands:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">h</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">display a summary of all the messages
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">s</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">save any changes made to the mail box
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">&lt;</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">go to the first message in the summary
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">&gt;</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">go to the last message in the summary
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">g</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">download any new email
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">r</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">reply to a message
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">forward a message
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">m</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">compose a new message
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">d</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">delete the current message
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">u</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">undelete the current message
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">x</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">expunge messages marked for deletion
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">a </kbd><var style="font-size: 16px !important; line-height: 16.6667px !important;">label</var><kbd style="font-size: 12px !important; line-height: 14.1667px !important;"> &lt;RET&gt;</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">add the label <var style="font-size: 16px !important; line-height: 16.6667px !important;">label</var> to the current message
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">k </kbd><var style="font-size: 16px !important; line-height: 16.6667px !important;">label</var><kbd style="font-size: 12px !important; line-height: 14.1667px !important;"> &lt;RET&gt;</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">remove the label <var style="font-size: 16px !important; line-height: 16.6667px !important;">label</var> from the current message
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">l </kbd><var style="font-size: 16px !important; line-height: 16.6667px !important;">label</var><kbd style="font-size: 12px !important; line-height: 14.1667px !important;"> &lt;RET&gt;</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">display a summary only of the messages with label <var style="font-size: 16px !important; line-height: 16.6667px !important;">label</var>
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">o </kbd><var style="font-size: 16px !important; line-height: 16.6667px !important;">folder</var><kbd style="font-size: 12px !important; line-height: 14.1667px !important;"> &lt;RET&gt;</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">add the current message to another folder
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">w </kbd><var style="font-size: 16px !important; line-height: 16.6667px !important;">filename</var><kbd style="font-size: 12px !important; line-height: 14.1667px !important;"> &lt;RET&gt;</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">write the body of the current message to a file
</dd></dl>
   Other than browsing email, here is some things that you will want to do:
     <ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Compose a message</strong>: To compose a message press <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">m</kbd>. Emacs
will take you to a new buffer where you can write the actual contents of your
message. Emacs separates this buffer with a line that says:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          --text follows this line--
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Before this line you may edit the message's headers. After this line,
you edit the actual body of the of the message. 
When you are done composing the message, you can do one of the following:
          </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">C-c C-w</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Insert the signature
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">C-c C-y</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Quote (yank) the current message
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">C-c C-c</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Send the message
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><kbd style="font-size: 12px !important; line-height: 14.1667px !important;">Mail ==&gt; Cancel</kbd></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Cancel the message
</dd></dl>
     These commands are also available when you reply to or forward email messages. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Reply to a message</strong>: To reply to a message press <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">r</kbd>. 
Emacs will do the same thing that it does when you ask it to compose a
message. The only difference is that it writes the headers of the
message for you automatically such that the response is sent to all the
people that have received the original message. You may edit the headers
to add or remove recipient email addresses. 
Emacs will not quote the message that you respond to by default. 
To quote it use <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">C-c C-y</kbd>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Forward a message</strong>: To forward a message press <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">f</kbd>. 
Emacs will write the headers for you and it will also quote the message
that you are forwarding, however it will not prefix it with ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">&gt;</span></samp>¡¯
(or whatever character you use to prefix messages that you reply to). 
The quoted message is clearly delimited with markers that indicate that
it is the forwarded message. You can add commentary, preferably, before
the markers so that the recipient can see it before seeing the forwarded
message. 
</li></ul>
   In every one of these three cases you may need to edit the message's headers. 
The most commonly used header entries that Emacs recognizes are:
     <dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">To:</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">list address of the recipient to whom the message is directed
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">Cc:</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">list addresses of other recipients that need to receive courtesy copies
of the message
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">BCC:</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">list addresses of other recipients to send a copy to, without showing their
email address on the actual message
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">FCC:</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">list folders (filenames) where you would like the outgoing message to be
appended to
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">Subject:</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">the subject field for the message
</dd></dl>
   The fields ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">To:</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">CC:</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">BCC:</span></samp>¡¯ and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">FCC:</span></samp>¡¯ can also
have continuation lines: any subsequent lines that begin with a space
are considered part of the field.

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Handling-patches" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Inserting-copyright-notices-with-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Inserting copyright notices with Emacs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-Emacs-as-an-email-client" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Emacs as an email client</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Using GNU Emacs</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">3.8 Handling patches</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;"><em style="font-size: 16px !important; line-height: 16.6667px !important;">Believe
 it or not, I really don't know how to do that. I need a volunteer to 
explain this to me so I can explain it then in this section</em>

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Inserting-copyright-notices-with-Emacs" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Hacker-sanity-with-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Hacker sanity with Emacs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Handling-patches" style="font-size: 16px !important; line-height: 16.6667px !important;">Handling patches</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Using GNU Emacs</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">3.9 Inserting copyright notices with Emacs</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">When you develop free software, you must place copyright notices at
every file that invokes the General Public License. If you don't place
any notice whatsoever, then the legal meaning is that you refuse
to give any permissions whatsoever, and the software consequently is not
free. For more details see <a href="#Applying-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">Applying the GPL</a>. 
Many hackers, who don't take the law seriously, complain that adding the
copyright notices takes too much typing. Some of these people live in
countries where copyright is not really enforced. Others simply ignore it.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">There is an Emacs package, called ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl</span></samp>¡¯, which is currently distributed
with Autotoolset, that makes it possible to insert and maintain copyright
notices with minimal work. To use this package,
in your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp> you must declare your identity
by adding the following commands:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     (setq user-mail-address "me@here.com")
     (setq user-full-name "My Name")
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Then you must require the packages to be loaded:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     (require 'gpl)
     (require 'gpl-copying)
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This package introduces the following commands:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">gpl</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Insert the standard GPL copyright notice using appropriate commenting. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">gpl-fsf</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Toggle FSF mode. Causes the <code style="font-size: 12px !important; line-height: 14.1667px !important;">gpl</code> command to insert a GPL
notice for software that is assigned to the Free Software Foundation. 
The <code style="font-size: 12px !important; line-height: 14.1667px !important;">gpl</code> command autodetects what type of file you are editing,
from the filename, and uses the appropriate commenting. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">gpl-personal</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Toggle personal mode. Causes the <code style="font-size: 12px !important; line-height: 14.1667px !important;">gpl</code> command to insert a
GPL notice for software in which you keep the copyright. 
</dd></dl>
   If you are routinely assigning your software to an organization other
than the Free Software Foundation, then insert:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     (setq gpl-organization "<var style="font-size: 12px !important; line-height: 14.1667px !important;">name</var>")
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">after the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">require</span></samp>¡¯ statements in your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp>.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Hacker-sanity-with-Emacs" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Further-reading-on-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Further reading on Emacs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Inserting-copyright-notices-with-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Inserting copyright notices with Emacs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Using GNU Emacs</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">3.10 Hacker sanity with Emacs</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Every once in a while, after long heroic efforts in front of the computer
monitor, a software developer will need to some counseling to feel
better about herself. In RL (real life) counseling is very expensive and
it also involves getting up from your computer and transporting yourself
to another location, which decreases your productivity. Emacs can help you. 
Run <code style="font-size: 12px !important; line-height: 14.1667px !important;">M-x doctor</code>, and you will talk to a psychiatrist for free.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Many people say that hackers work too hard and they should go out for
a walk once in a while. In Emacs, it is possible to do that without
getting up from your chair. To enter an alternate universe, run
<code style="font-size: 12px !important; line-height: 14.1667px !important;">M-x dunnet</code>. Aside from being a refreshing experience, it is also
a very effective way to procrastinate away work that you don't want to do. 
Why do today, what you can postpone for tomorrow?

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Further-reading-on-Emacs" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Hacker-sanity-with-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Hacker sanity with Emacs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Using GNU Emacs</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">3.11 Further reading on Emacs</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">This chapter should be enough to get you going with GNU Emacs. This is
really all you need to know to use Emacs to develop software. However,
the more you learn about Emacs, the more effectively you will be able to use
it, and there is still a lot to learn; a lot more than we can fit in this
one chapter. In this section we refer to other manuals that you can read
to learn more about Emacs. Unlike many proprietary manuals that you are
likely to find in bookstores, these manuals are <em style="font-size: 16px !important; line-height: 16.6667px !important;">free</em>
(see <a href="#Why-free-software-needs-free-documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Why free software needs free documentation</a>). 
Whenever possible, please contribute to the GNU project by ordering
a bound copy of the free documentation from the Free Software Foundation, or
by contributing a donation.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The Free Software Foundation publishes the following manuals on Emacs:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><cite style="font-size: 16px !important; line-height: 16.6667px !important;">The Emacs Editor</cite></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This manual tells you all there is to know about all the spiffy
things that Emacs can do, except for a few things here and there that
are so spiffy that they get to have their own separate manual. The printed
version, published by the Free Software Foundation, features our hero,
Richard Stallman, riding a gnu. It also includes the GNU Manifesto. 
The machine readable source for the manual is distributed with GNU Emacs. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><cite style="font-size: 16px !important; line-height: 16.6667px !important;">Programming in Emacs Lisp</cite></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">A wonderful introduction to Emacs Lisp, written by Robert Chassell. 
If you want to learn programming in Emacs Lisp, start by reading this manual. 
You can order this manual as a bound book from the Free Software Foundation. 
You can also download a machine readable copy of the manual from any
GNU ftp site. Look for <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">elisp-manual-20-2.5.tar.gz</span></samp>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><cite style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU Emacs Lisp Reference Manual</cite></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This is a comprehensive reference manual for the Emacs Lisp language. 
You can also order this manual as a bound book from the Free Software
Foundation. 
You can also download a machine readable copy of the manual from any
GNU ftp site. Look for <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">emacs-lisp-intro-1.05.tar.gz</span></samp>. 
</dd></dl>
   The following manuals are also distributed with the GNU Emacs source code
and they make for some very fun reading:
     <dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><cite style="font-size: 16px !important; line-height: 16.6667px !important;">Gnus Manual</cite></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Gnus is the Emacs newsreader. You can also use it to sort out your email,
especially if you are subscribed to twenty mailing lists and receive
tons of email every day. This manual will tell you all you need to know
about Gnus to use it effectively. (<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">gnus.dvi</span></samp>)
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><cite style="font-size: 16px !important; line-height: 16.6667px !important;">CC Mode</cite></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The Emacs C editing mode will help you write C code that is beautifully
formatted and consistent with the GNU coding standards. If you develop
software for an organization that follows different coding standards,
you will have to customize Emacs to use their standards instead. If they
are lame and haven't given you Elisp code for their standards, then this
manual will show you how to roll your own. (<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">cc-mode.dvi</span></samp>)
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><cite style="font-size: 16px !important; line-height: 16.6667px !important;">Common Lisp Extensions</cite></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs has a package that introduces many Common Lisp extensions to Emacs Lisp. 
This manual describes what extensions are available and how to use them. 
(<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">cl.dvi</span></samp>)
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><cite style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Customization Definitions</cite></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Recent versions of Emacs have an elaborate user-friendly customization
interface that will let users customize Emacs and update their
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp> files automatically for them. If you are writing large
Emacs packages, it is very easy to add a customization interface to them. 
This manual explains how to do it. 
(<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">customize.dvi</span></samp>)
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><cite style="font-size: 16px !important; line-height: 16.6667px !important;">The Emacs Widget Library</cite></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">It is possible to insert actual widgets in an Emacs buffer that are
bound to Emacs Lisp functions. This feature of Emacs is used, for example,
in the newly introduced customization interface. This manual documents
the Elisp API for using these widgets in your own Elisp packages. 
(<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">widget.dvi</span></samp>)
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><cite style="font-size: 16px !important; line-height: 16.6667px !important;">RefTeX User Manual</cite></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">If you are writing large documents with LaTeX that contain a lot of
cross references, then the RefTeX package will make your life easier. 
(<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">reftex.dvi</span></samp>)
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><cite style="font-size: 16px !important; line-height: 16.6667px !important;">Ediff User's Manual</cite></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Ediff is a comprehensive package for dealing with patches under Emacs. 
If you receive a lot of patches to your software projects from contributors,
you can use Ediff to apply them to your source code. 
(<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ediff.dvi</span></samp>)
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><cite style="font-size: 16px !important; line-height: 16.6667px !important;">Supercite User's Manual</cite></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">If you think that quoting your responses to email messages with
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">&gt;</span></samp>¡¯ is for lamers and you want to be elite, then use Supercite. 
(<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">sc.dvi</span></samp>)
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><cite style="font-size: 16px !important; line-height: 16.6667px !important;">Viper Is a Package for Emacs Rebels</cite></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This manual has more than you will ever need to know about Viper, the
Emacs vi emulation. <a href="#Using-vi-emulation" style="font-size: 16px !important; line-height: 16.6667px !important;">Using vi emulation</a>, actually describes all
the features of Viper that you will ever really need. But still, it's
a good reading for a long airplane trip. 
(<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">viper.dvi</span></samp>)
</dd></dl>

<!-- ============================================================================ -->
<!-- Copyright (C) 1998 Eleftherios Gkioulekas <lf@amath.washington.edu> -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Compiling-with-Makefiles" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#The-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-GNU-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Using GNU Emacs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="chapter" style="font-size: 24px !important; line-height: 25px !important;">4 Compiling with Makefiles</h2>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">In this chapter we describe how to use the compiler to compile simple software
and libraries, and how to use makefiles.

</p><ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="1" href="#Compiling-simple-programs" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiling simple programs</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="2" href="#Programs-with-many-source-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Programs with many source files</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="3" href="#Building-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">Building libraries</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="4" href="#Dealing-with-header-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Dealing with header files</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="5" href="#The-GPL-and-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">The GPL and libraries</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="6" href="#The-language-runtime-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">The language runtime libraries</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="7" href="#Basic-Makefile-concepts" style="font-size: 16px !important; line-height: 16.6667px !important;">Basic Makefile concepts</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="8" href="#More-about-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">More about Makefiles</a>
</li></ul>

<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Compiling-simple-programs" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Programs-with-many-source-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Programs with many source files</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Compiling-with-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiling with Makefiles</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Compiling-with-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiling with Makefiles</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">4.1 Compiling simple programs</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">It is very easy to compile simple C programs on the GNU system. For example,
consider the famous ¡°Hello world¡± program:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello.c</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #include &lt;stdio.h&gt;
          int
          main ()
          {
            printf ("Hello world\n");
          }
</pre>
     </dd></dl>
   The simplest way to compile this program is to type:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gcc hello.c
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">on your shell. The resulting executable file is called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">a.out</span></samp>
and you can run it from the shell like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % ./a.out
     Hello world
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">To cause the executable to be stored under a different filename pass the
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-o</span></samp>¡¯ flag to the compiler:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gcc hello.c -o hello
     % ./hello
     Hello world
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Even with simple one-file hacks like this, the GNU compiler can accept
many options that modify its behaviour:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-g</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-g</span></samp>¡¯ flag causes the compiler to output debugging information
to the executable. This way, you can step your program through a debugger
if it crashes. 
(<em style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: Crossreference</em>)
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-O, -O2, -O3</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-O</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-O2</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-O3</span></samp>¡¯ flags activate <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">optimization</dfn>. 
The numbers are called <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">optimization levels</dfn>. 
 When you compile your program with optimization
enabled, the compiler applies certain algorithms to the machine code output
to make it go faster. The cost is that your program compiles much more slowly
and that although you can step it through a debugger if you used the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-g</span></samp>¡¯
flag, things will be a little strange. During development the programmer
usually uses no optimization, and only activates it when person is about to
run the program for a production run. A good advice: always test your code
with optimization activated as well. 
If optimization breaks your code, then this is telling you that you have
a memory bug. Good luck finding it. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-Wall</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-Wall</span></samp>¡¯ flag tells the compiler to issue warnings when it sees
bad programming style. Some of these warning catch actual bugs, but
occasionally some of the warnings complain about something correct that you
did on purpose. For this reason this flag is feature is not activated
by default. 
</dd></dl>
   Here are some variations of the above example:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gcc -g -O3 hello.c hello
     % gcc -g -Wall hello.c -o hello
     % gcc -g -Wall -O3 hello.c -o hello
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">To run a compiled executable in the current directory just type its
name, prepended by ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">./</span></samp>¡¯. In general, once you compile a useful
program, you should <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">install</dfn> it so that it can be run from any current
directory, simply by typing its name without prepending ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">./</span></samp>¡¯. 
To install an executable, you need to move it to a standard directory
such as <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/bin</span></samp> or <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local/bin</span></samp>. If you don't have
permissions to install files there, you can instead install them on
your home directory at <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/home/username/bin</span></samp> where <code style="font-size: 12px !important; line-height: 14.1667px !important;">username</code>
is your username. When you write the name of an executable, the shell
looks for the executable in a set of directories listed in the environment
variable ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">PATH</span></samp>¡¯. To add a nonstandard directory to your path do
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % export PATH="$PATH:/home/username/bin"
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">if you are using the Bash shell, or
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % setenv PATH "$PATH:/home/username/bin"
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">if you are using a different shell.

<!-- ============================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Programs-with-many-source-files" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Building-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">Building libraries</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Compiling-simple-programs" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiling simple programs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Compiling-with-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiling with Makefiles</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">4.2 Programs with many source files</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Now let's consider the case where you have a much larger program made
of source files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo1.c</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo2.c</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo3.c</span></samp> and
header files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">header1.h</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">header2.h</span></samp>. 
One way to compile the program is like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gcc foo1.c foo2.c foo3.c -o foo
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This is fine when you have only a few files to deal with. Eventually,
when you have more than a few dozen files, it becomes wasteful to
compile all of the files, all the time, every time you make a change
in only one of the files. For this reason, the compiler allows
you to compile every file separately into an intermediate file
called <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">object file</dfn>, and link all the object files together at the end. 
This can be done with the following commands:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gcc -c foo1.c
     % gcc -c foo2.c
     % gcc -c foo3.c
     % gcc foo1.o foo2.o foo3.o -o foo
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The first three commands generate the object files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo1.o</span></samp>,
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo2.o</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo3.o</span></samp> and the last command links them together
to the final executable file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo</span></samp>. The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">*.o</span></samp> suffix is reserved
for use only by object files.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If you make a change only in
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo1.c</span></samp>, then you can rebuild <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo</span></samp> like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gcc -c foo1.c
     % gcc foo1.o foo2.o foo3.o -o foo
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The object files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo2.o</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo3.o</span></samp> do not need to be
rebuilt since only <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo1.c</span></samp> changed, so it is not necessary to
recompile them.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Object files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">*.o</span></samp> contain definitions of variables
and subroutines written out in <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">assembly</dfn>
(machine language ¡°pseudo code¡±). Most of
these definitions will eventually be embedded in the final executable
program at a specific address. At this stage however these memory addresses
are not known so they are being referred to symbolically. These
symbolic references are called <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">symbols</dfn>. It is possible to list
the symbols defined in an object file with the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">nm</span></samp>¡¯ command. 
For example:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % nm xmalloc.o
              U error
              U malloc
              U realloc
     00000000 D xalloc_exit_failure
     00000000 t xalloc_fail
     00000004 D xalloc_fail_func
     00000014 R xalloc_msg_memory_exhausted
     00000030 T xmalloc
     00000060 T xrealloc
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The first column lists the symbol's address within the object file, when
the symbol is actually defined in that object file. 
The second column lists the symbol type. The third column is the symbolic
name of the symbol. In the final executable, these names become
irrelevant. 
The following types commonly occur:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">T</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">A function definition
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">t</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">A private function definition. Such functions are defined in C with
the keyword <code style="font-size: 12px !important; line-height: 14.1667px !important;">static</code>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">D</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">A global variable
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">R</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">A read-only (<code style="font-size: 12px !important; line-height: 14.1667px !important;">const</code>) global variable
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">U</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">A symbol used but not defined in this object file. 
</dd></dl>
   For more details, see the <cite style="font-size: 16px !important; line-height: 16.6667px !important;">Binutils manual</cite>.

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">The job of the compiler is to translate all the C source files to
object files containing a corresponding set of symbolic definitions. 
It is the job of another program, the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">linker</dfn>, to put the object files
together, resolve and evaluate all the symbolic addresses, and build
a complete machine language program that can actually be executed. 
When you ask ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gcc</span></samp>¡¯ to link the object files into an executable, the
compiler is actually running the linker to do the job.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">During the process of linking, all the machine language instructions that
refer to a specific memory address need to be modified to use the correct
addresses within the executable, as opposed to the addresses within their
object file. This becomes an issue when you want to your program to load
and link compiled object files during run-time instead of compile-time. 
To make such <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">dynamic linking</dfn> possible, your symbols need to be
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">relocatable</dfn>. This means that your symbols definitions must be
correct no matter where you place them in memory. There should be no
memory addresses that need to be modified. One way to do this is by
referring to memory addresses within the object file by giving an offset
from the referring address. Memory addresses outside the object file must
be treated as <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">interlibrary dependencies</dfn> and you must tell the compiler
what you expect them to be when you attempt to build relocatable machine code. 
Unfortunately some flavours of Unix do not handle interlibrary dependencies
correctly. Fortunately, all of this mess can be dealt with in a uniform
way, to the extent that this is possible, by using GNU Libtool. 
See <a href="#Using-Libtool" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Libtool</a>, for more details.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">On GNU and Unix, all compiled languages compile to object files,
and it is possible, in principle, to link object files that have originated
from source files written in different programming languages. For example
it is possible to link source code written in Fortran together with
source code written in C or C++. In such cases, you need to know how the
compiler converts the names with which the program language calls its
constructs (such as variable, subroutines, etc.) to symbol names. 
Such conversions, when they actually happen, are called
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">name-mangling</dfn>. Both C++ and Fortran do name-mangling. C however is
a very nice language, because it does absolutely no name-mangling. 
This is why when you want to write code that you want to export to
many programming languages, it is best to write it in C. 
See <a href="#Using-Fortran-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Fortran effectively</a>, for more details on how to deal with
the name-mangling done by Fortran compilers.

<!-- ============================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Building-libraries" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Dealing-with-header-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Dealing with header files</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Programs-with-many-source-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Programs with many source files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Compiling-with-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiling with Makefiles</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">4.3 Building libraries</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">In many cases a collection of object files form a logical unit that is used
by more than one executable. On both GNU and Unix systems, it is possible
to collect such object files and form a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">library</dfn>. On the GNU system,
to create a library, you use the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ar</span></samp> command:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     ar cru libfoo.a foo1.o foo2.o foo3.o
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This will create a file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libfoo.a</span></samp> from the object files
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo1.o</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo2.o</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo3.o</span></samp>. The suffix
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">*.a</span></samp> is reserved for object file libraries. 
Before using the library, it needs to be ¡°blessed¡± by a program
called ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">ranlib</span></samp>¡¯:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % ranlib libfoo.a
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU system, and most Unix systems require that you run <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ranlib</span></samp>,
but there have been some Unix systems where doing so is not necessary. 
In fact there are Unix systems, like some versions of SGI's Irix, that don't
even have the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">ranlib</span></samp>¡¯ command!

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The reason for this is historical. Originally <code style="font-size: 12px !important; line-height: 14.1667px !important;">ar</code>
was meant to be used merely for packaging files together. The more
well known program <code style="font-size: 12px !important; line-height: 14.1667px !important;">tar</code> is a descendant of <code style="font-size: 12px !important; line-height: 14.1667px !important;">ar</code> that was designed
to handle making such archives on a tape device. Now that tape devices are
more or less obsolete, <code style="font-size: 12px !important; line-height: 14.1667px !important;">tar</code> is playing the role that was originally
meant for <code style="font-size: 12px !important; line-height: 14.1667px !important;">ar</code>. As for <code style="font-size: 12px !important; line-height: 14.1667px !important;">ar</code>, way back, some people thought to
use it to package <code style="font-size: 12px !important; line-height: 14.1667px !important;">*.o</code> files. However the linker wanted a symbol table
to be passed along with the archive. So the <code style="font-size: 12px !important; line-height: 14.1667px !important;">ranlib</code>
program was written to generate that table and add it to the <code style="font-size: 12px !important; line-height: 14.1667px !important;">*.a</code> file. 
Then some Unix vendors thought that if they incorporated <code style="font-size: 12px !important; line-height: 14.1667px !important;">ranlib</code>
to <code style="font-size: 12px !important; line-height: 14.1667px !important;">ar</code> then users wouldn't have to worry about forgetting to call
<code style="font-size: 12px !important; line-height: 14.1667px !important;">ranlib</code>. So they provided <code style="font-size: 12px !important; line-height: 14.1667px !important;">ranlib</code> but it did nothing. Some
of the more evil ones dropped it all-together breaking many people's scripts.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Once you have a library, you can link it with other object files just
as if it were an object file itself. For example
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gcc bar.o libfoo.a -o foo
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">using <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libfoo.a</span></samp> as defined above, is equivalent to writing
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gcc bar.o foo1.o foo2.o foo3.o -o foo
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Libraries are particularly useful when they are <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">installed</dfn>. 
To install a library you need to move the file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libfoo.a</span></samp> to
a standard directory. The actual location of that directory depends
on your compiler. The GNU compiler looks for installed libraries in
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/lib</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local/lib</span></samp>. Because many Unix systems
also use the GNU compiler, it is safe to say that both of these
directories are standard in these systems too. However there are
some Unix compilers that don't look at <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local/lib</span></samp> by default. 
Once a library is installed, it can be used in any project from any
current directory to compile an executable that uses the subroutines that
that library provides. You can direct the compiler to link an installed
library with a set of executable files to form an executable by using
the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-l</span></samp>¡¯ flag like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gcc -o foo bar.o -lfoo
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Note that if the filename of the library is <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libfoo.a</span></samp>, the
corresponding argument to the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-l</span></samp>¡¯ flag must be only the substring
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo</span></samp>, hence ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-lfoo</span></samp>¡¯. Libraries must be named with names
that have the form <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">lib*.a</span></samp>. If you have installed the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libfoo.a</span></samp>
library in a non-standard directory, you can tell the linker to look
for the library in that directory as well by using the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-L</span></samp>¡¯ flag. 
For example, if the library was installed in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/home/lf/lib</span></samp> then
we would have to invoke the linking like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     gcc -o bar bar.o -L/home/lf/lib -lfoo
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-L</span></samp>¡¯ flag must appear before the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-l</span></samp>¡¯ flag.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Some people
like to pass ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-L.</span></samp>¡¯ to the compiler so they can link uninstalled
libraries in the current working directory using the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-l</span></samp>¡¯ flag
instead of typing in their full filenames. The idea is that they think
¡°it looks better¡± that way. Actually this is considered bad style. 
You should use the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-l</span></samp>¡¯ flag to link only libraries that have already
been installed and use the full pathnames to link in uninstalled libraries. 
The reason why this is important is because, even though it makes no
difference when dealing with ordinary libraries, it makes a lot of
difference when you are working with <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">shared</dfn> libraries. 
(<em style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: Crossreference</em>). 
It makes a difference whether or not you are linking
to an uninstalled or installed <em style="font-size: 16px !important; line-height: 16.6667px !important;">shared</em> library, and in that case
the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-l</span></samp>¡¯ semantics mean that you are linking an installed shared
library. Please stick to this rule, even if you are not
using shared libraries, to make it possible to switch to using shared
libraries without too much hassle.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Also, if you are linking in more than one library,
please pay attention to the order with which you link your libraries. 
When the linker links a library, it does not embed into the executable code
the entire library, but only the symbols that are needed from the library. 
In order for the linker to know what symbols are really needed from any
given library, it must have already parsed all the other libraries and
object files that depend on that library! This implies that you
first link your object files, then you link the higher-level libraries,
then the lower-level libraries. If you are the author of the libraries,
you must write your libraries in such a manner, that the dependency graph
of your libraries is a tree. If two libraries depend on each other
bidirectionally, then you may have trouble linking them in. This suggests that
they should be one library instead!

<!-- ============================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Dealing-with-header-files" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#The-GPL-and-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">The GPL and libraries</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Building-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">Building libraries</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Compiling-with-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiling with Makefiles</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">4.4 Dealing with header files</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">In general libraries are composed of many ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">*.c</span></samp>¡¯ files that compile
to object files, and a few <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">header files</dfn> (¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">*.h</span></samp>¡¯). The header
files declare the resources that are defined by the library and need to
be included by any source files that use the library's resources. 
In general a library comes with two types of header files:
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">public</dfn> and <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">private</dfn>. The public header files
declare resources that you want to make accessible to other software. 
The private header files declare resources that are meant to be used only
for developing the library itself. To make an installed library useful,
it is also necessary to install the corresponding public header files. 
The standard directory for installing header files is <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/include</span></samp>. 
The GNU compiler also understands <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local/include</span></samp> as an
alternative directory. 
When the compiler encounters the directive
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #include &lt;foo.h&gt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">it searches these standard directories for <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo.h</span></samp>. 
If you have installed the header files in a non-standard directory,
you can tell the compiler to search for them in that directory by
using the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-I</span></samp>¡¯ flag. For example, to build a program <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">bar</span></samp>
from a source file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">bar.c</span></samp> that uses the <code style="font-size: 12px !important; line-height: 14.1667px !important;">libfoo</code> library
installed at <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/home/username</span></samp> you would need to do the following:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gcc -c -I/home/lf/include bar.c
     % gcc -o bar bar.o -L/home/lf/lib -lfoo
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">You can also do it in one step:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gcc -I/home/lf/include -o bar bar.o -L/home/lf/lib -lfoo
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">For portability, it is better that the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-I</span></samp>¡¯ appear before the filenames
of the source files that we want to compile.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">A good coding standard is to distinguish private from public header files
in your source code by including private header files like
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #include "private.h"
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and public header files like
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #include &lt;public.h&gt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">in your implementation of the library, even when the public header files are
not yet installed while building the library. This way source code
can be moved in or out of the library without needing to change the
header file inclusion semantics from ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">&lt;..&gt;</span></samp>¡¯ to ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">".."</span></samp>¡¯ back and
forth. In order for this to work however, you must tell the compiler
to search for ¡°installed¡± header files in the current directory too. 
To do that you must pass the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-I</span></samp>¡¯ flag with the current directory
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.</span></samp> as argument (¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-I.</span></samp>¡¯).

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In many cases a header file needs to include other header files, and it
is very easy for some header files to be included more than once. 
When this happens, the compiler will complain about multiple declarations
of the same symbols and throw an error. To prevent this from happening,
please surround the contents of your header files with C preprocessor
conditional like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #ifndef __defined_foo_h
     #define __defined_hoo_h
     [...contents...]
     #endif
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The defined macro <code style="font-size: 12px !important; line-height: 14.1667px !important;">__defined_foo_h</code> is used as a flag to indicate that
the contents of this header file have been included. To make sure that
each one of these macros is unique to only one header file, please
combine the prefix <code style="font-size: 12px !important; line-height: 14.1667px !important;">__defined</code> with the pathname of the header file
when it gets installed. If your header file is meant to be installed as
in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local/include/foo.h</span></samp> or <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/include/foo.h</span></samp> then
use <code style="font-size: 12px !important; line-height: 14.1667px !important;">__defined_foo_h</code>. If your header files is meant to be installed
in a subdirectory like <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/include/dir/foo.h</span></samp> then please use
<code style="font-size: 12px !important; line-height: 14.1667px !important;">__defined_dir_foo_h</code> instead.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In principle, every library can be implemented using only one public header
file and perhaps only one private header file. There are problems with
this approach however:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">This header file grows to be very large and slows down compilation by
processing many symbols declarations that are not relevant to the specific
source file that is being compiled. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If you change the contents of the header file, it will be difficult to
determine the minimum set of object files that need to be rebuilt since
the change could reflect to all of them, in principle. So you will
end up rebuilding the entire library unnecessarily. 
</li></ul>
   For small libraries, these problems are not very serious. For large
libraries however, you may need to split the one large header file
to many smaller files. Sometimes a good approach is to have a matching
header file for each source file, meaning that if there is a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo.c</span></samp>
there should be a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo.h</span></samp>. Some other times it is better to distribute
declarations among header files by splitting the library's provided
resources to various logical categories and declaring each category on a
separate header file. It is up to the developer to decide how to do this best.

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">Once this decision is made, a few issues still remain:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">We don't want to burden the users of the library that use the library's
features extensively with including many header files. It should be
possible to declare the entire library with only one inclusion. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The more header files we use, the more likely it is that their filenames
conflict with the filenames of header files from other installed libraries. 
</li></ul>
   One way of preventing the filename conflicts is to install the library's
header files in a subdirectory bellow the standard directory for
installing header files. Then we install one header file in the standard
directory itself that includes all the header files in the subdirectory.

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">For example, if the Foo library wants to install headers <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo1.h</span></samp>,
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo2.h</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo3.h</span></samp>, it can install them under
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/include/foo</span></samp> and install in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/include/</span></samp> only
a one header file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo.h</span></samp> containing only:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #include &lt;foo/foo1.h&gt;
     #include &lt;foo/foo2.h&gt;
     #include &lt;foo/foo3.h&gt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Please name this ¡°central¡± header and the directory for the
subsidiary headers consistently after the corresponding library. 
So the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libfoo.a</span></samp> library should install a central header
named <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo.h</span></samp> and all subsidiary headers under the subdirectory
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo</span></samp>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The subsidiary header files should be guarded with preprocessor conditionals,
but it is not necessary to also guard the central header file that includes
them. To make the flag macros used in these preprocessor conditionals unique,
you should include the directory name in the flag macro's name. 
For example, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo/foo1.h</span></samp> should be guarded with
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #ifndef __defined_foo_foo1_h
     #define __defined_foo_foo1_h
     [...contents...]
     #endif
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and similarly with <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo/foo2.h</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo/foo3.h</span></samp>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">This approach creates yet another problem that needs to
be addressed. If you recall, we suggested that you use the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">include "..."</code> semantics for private header files and the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">include &lt;...&gt;</code> semantics for public header files. 
This means that when you include the public header file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo1.h</span></samp>
from one of the source files of the library itself, you should write:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #include &lt;foo/foo1.h&gt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Unfortunately, if you place the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo1.h</span></samp> in the same directory
as the file that attempts to include it, using these semantics,
it will not work, because there is no subdirectory <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo</span></samp> during
compile time.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The simplest way to resolve this is by placing all of the source code
for a given library under a directory and all such header files in
a subdirectory named <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo</span></samp>. The GNU build system in general requires
that all the object files that build a specific library be under the
same directory. This means that the C files must be in the same directory. 
It is okey however to place header files in a subdirectory.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">This will also work if you have many directories, each containing the
sources for a separate library, and a source file in directory <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">bar</span></samp>,
for example, tries to include the header file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">&lt;foo/foo1.h&gt;</span></samp> from
a directory <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo</span></samp> bellow the directory containing the source code
for the library <code style="font-size: 12px !important; line-height: 14.1667px !important;">libfoo</code>. To make it work, just pass ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-I</span></samp>¡¯
flags to the compiler for every directory of containing the source code
of every library in the package. 
See <a href="#Libraries-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Libraries with Automake</a>, for more details. 
It will also work even if there are already old versions of
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo/foo1.h</span></samp> installed
in a standard directory like <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/include</span></samp>, because the compiler
will first search under the directories mentioned in the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-I</span></samp>¡¯ flags
before trying the standard directories.

<!-- ============================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="The-GPL-and-libraries" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#The-language-runtime-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">The language runtime libraries</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Dealing-with-header-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Dealing with header files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Compiling-with-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiling with Makefiles</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">4.5 The GPL and libraries</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">A very common point of contention is whether or not using a software library
in your program, makes your program derived work from that library. 
For example, suppose that your program uses the <code style="font-size: 12px !important; line-height: 14.1667px !important;">readline ()</code> function
which is defined in the library <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libreadline.a</span></samp>. To do this, your
program needs to link with this library. Whether or not this makes the
program derived work makes a big difference. The readline library is
free software published under the GNU General Public License, which requires
that any derived work must also be free software and published under the
same terms. So, if your program is derived work, you have to free it;
if not, then you are not required to by the law.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">When you link the library with your object files to create an executable,
you are copying code from the library and combining it with code from your
object files to create a new work. As a result, the executable is derived
work. It doesn't matter if you create the executable by hand by running
an assembler and putting it together manually, or if you automate the
process by letting the compiler do it for you. Legally, you are doing the
same thing.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Some people feel that linking to the library dynamically avoids
making the executable derived work of the library. A dynamically linked
executable does not embed a copy of the library. Instead, it contains
code for loading the library from the disk during run-time. 
However, the executable is still derived work. 
The law makes no distinction between static linking and
dynamic linking. So, when you compile an executable and you link it
dynamically to a GPLed library, the executable must be distributed as
free software with the library. This also means that you can not link
dynamically both to a GPLed library and a proprietary library because
the licenses of the two libraries conflict. The best way to resolve
such conflicts is by replacing the proprietary library with a free one,
or by convincing the owners of the proprietary library to license it
as free software.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The law is actually pretty slimy about what is derived work. In the
entertainment industry, if you write an original story that takes
placed in the established universe of a Hollywood serial, like Star Trek,
in which you use characters from that serial, like Captain Kirk, your story
is actually derived work, according to the law, and Paramount can claim
rights to it. Similarly, a dynamically linked executable does not
contain a copy of the library itself, but it does contain code that refers
to the library, and it is not self-contained without the library.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Note that there is no conflict when a GPLed utility is invoked by a
proprietary program or vice versa via a <code style="font-size: 12px !important; line-height: 14.1667px !important;">system ()</code> call. 
There is a very specific reason why this is allowed: When you were
given a copy of the invoked program, you were given permission to run it. 
As a technical matter, on Unix systems and the GNU system,
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">using</dfn> a program means forking some process that is already running to
create a new process and loading up the program to take over the new process,
until it exits. This is exactly what the <code style="font-size: 12px !important; line-height: 14.1667px !important;">system ()</code> call does, so
permission to use a program implies that you have permission to
call it from any other program via <code style="font-size: 12px !important; line-height: 14.1667px !important;">system ()</code>. This way, you can
run GNU programs under a proprietary <code style="font-size: 12px !important; line-height: 14.1667px !important;">sh</code> shell on Unix, and you
can invoke proprietary programs from a GNU program. However, a free program
that <em style="font-size: 16px !important; line-height: 16.6667px !important;">depends</em> on a proprietary program for its operation can not
be included in a free operating system, because the proprietary program
would also have to be distributed with the system.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Because any program that uses a library becomes derived work of that library,
the GNU project occasionally uses another license, the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Lesser GPL</dfn>,
(often called LGPL) to copyleft libraries. The LGPL protects the freedom
of the library, just like the GPL does,  but allows proprietary executables
to link and use LGPLed libraries. However, this permission should only be
given when it benefits the free software community, and not to be nice
to proprietary software developers. There's no moral reason why you should
let them use your code if they don't let you use theirs. 
See <a href="#The-LGPL-vs-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">The LGPL vs the GPL</a>, for a detailed discussion of this issue.

<!-- ============================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="The-language-runtime-libraries" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Basic-Makefile-concepts" style="font-size: 16px !important; line-height: 16.6667px !important;">Basic Makefile concepts</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#The-GPL-and-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">The GPL and libraries</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Compiling-with-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiling with Makefiles</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">4.6 The language runtime libraries.</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">When you compile ordinary programs, like the hello world program the
compiler will automatically link to your program a library called
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libc.a</span></samp>. So when you type
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gcc -c hello.c
     % gcc -o hello hello.o
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">what is actually going on behind the scenes is:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gcc -c hello.c
     % gcc -o hello hello.c -lc
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">To see why this is necessary, try ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">nm</span></samp>¡¯ on <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello.o</span></samp>:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % nm hello.o
     00000000 t gcc2_compiled.
     00000000 T main
              U printf
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello.o</span></samp> defines the symbol ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">main</span></samp>¡¯, but it marks the
symbol ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">printf</span></samp>¡¯ as undefined. The reason for this is that
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">printf</span></samp>¡¯ is not a built-in keyword of the C programming language,
but a function call that is defined by the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libc.a</span></samp> library. Most of the
facilities of the C programming language are defined by this library. 
The include files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">stdio.h</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">stdlib.h</span></samp>, and so on are only
header files that declare parts of the C library. You can read
all about the C library in the <cite style="font-size: 16px !important; line-height: 16.6667px !important;">Libc manual</cite>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The catch is that there are many functions that you may consider standard
features of C that are not included in the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libc.a</span></samp> library itself. 
For example, all the math functions that are declared in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">math.h</span></samp>
are defined in a library called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libm.a</span></samp> which is <em style="font-size: 16px !important; line-height: 16.6667px !important;">not</em> linked
by default. So if your program is using math functions and including
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">math.h</span></samp>, then you need to explicitly link the math library by
passing the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-lm</span></samp>¡¯ flag. The reason for this particular separation is
that mathematicians are very picky about the way their math is being
computed and they may want to use their own implementation of the math
functions instead of the standard implementation. If the math functions
were lumped into <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libc.a</span></samp> it wouldn't be possible to do that.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">For example, consider the following program that prompts for a number
and prints its square root:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">dude.c</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #include &lt;stdio.h&gt;
          #include &lt;math.h&gt;
          
          int
          main ()
          {
            double a;
            printf ("a = ");
            scanf ("%f", &amp;a);
            printf ("sqrt(a) = %f", sqrt(a));
          }
</pre>
     </dd></dl>
   To compile this program you will need to do:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gcc -o dude dude.c -lm
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">otherwise you will get an error message from the linker about <code style="font-size: 12px !important; line-height: 14.1667px !important;">sqrt</code>
being an unresolved symbol.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">On GNU, the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libc.a</span></samp> library is very comprehensive. On many Unix systems
however, when you use system-level features you may need to link additional
system libraries such as
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libbsd.a</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libsocket.a</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libnsl.a</span></samp>, etc. 
If you are linking C++ code, the C++ compiler will link
both <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libc.a</span></samp> and the C++ standard library <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libstdc++.a</span></samp>. 
If you are also using GNU C++ features however, you will explicitly need to
link <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libg++.a</span></samp> yourself. 
Also if you are linking Fortran and C code together
you must also link the Fortran run-time libraries. These libraries
have non-standard names and depend on the Fortran compiler that you use. 
(see <a href="#Using-Fortran-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Fortran effectively</a>)
Finally, a very common problem is encountered when you are writing
X applications. The X libraries and header files like to be placed in
non-standard locations so you must provide system-dependent <code style="font-size: 12px !important; line-height: 14.1667px !important;">-I</code>
and <code style="font-size: 12px !important; line-height: 14.1667px !important;">-L</code> flags so that the compiler can find them. Also the most
recent version of X requires you to link in some additional libraries
on top of <code style="font-size: 12px !important; line-height: 14.1667px !important;">libX11.a</code> and some rare systems require you to link
some additional system libraries to access networking features
(recall that X is built on top of the sockets interface and it is essentially a
communications protocol between the computer running the program and
computer that controls the screen in which the X program is displayed.) 
<em style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: Cross references, if we explain all this in more details</em>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Because it is necessary to link system libraries to form an executable,
under copyright law, the executable is derived work from the system libraries. 
This means that you must pay attention to the license terms of these libraries. 
The GNU <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libc</span></samp> library is under the LGPL license which allows you to
link and distribute both free and proprietary executables. The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">stdc++</span></samp>
library is also under terms that permit the distribution of proprietary
executables. The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libg++</span></samp> library however only permits you to build
free executables. If you are on a GNU system, including Linux-based GNU
systems, the legalese is pretty straightforward. If you are on a proprietary
Unix system, you need to be more careful. The GNU GPL does not allow
GPLed code to be linked against proprietary library. Because on Unix systems,
the system libraries are proprietary, their terms also may not allow you to
distribute executables derived from them. In practice, they do however,
since proprietary Unix systems do want to attract proprietary applications. 
In the same spirit, the GNU GPL also makes an exception and explicitly
permits the linking of GPL code with proprietary system libraries, provided
that these libraries are a major component of the operating system
(i.e. they are part of the compiler, or the kernel, and so on),
<strong style="font-size: 16px !important; line-height: 16.6667px !important;">unless</strong> the copy of the library itself accompanies the executable!

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">This includes
proprietary <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libc.a</span></samp> libraries, the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libdxml.a</span></samp> library in
Digital Unix, proprietary Fortran system libraries like <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libUfor.a</span></samp>,
and the X11 libraries.

<!-- ============================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Basic-Makefile-concepts" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#More-about-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">More about Makefiles</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#The-language-runtime-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">The language runtime libraries</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Compiling-with-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiling with Makefiles</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">4.7 Basic Makefile concepts</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">To build a very large program, you need an extended set of invocations
to the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gcc</span></samp>¡¯ compiler and utilities like ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">ar</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">ranlib</span></samp>¡¯. 
As we explained (see <a href="#Programs-with-many-source-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Programs with many source files</a>) if you make
changes only to a few files in your source code, it is not necessary to
rebuild everything; you only need to rebuild the object files that get
to change because of your modifications and link those together with
all the other object files to form an updated executable. The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯
utility was written mainly to automate rebuilding software by determining
the minimum set of commands that need to be called to do this, and invoking
them for you in the right order. It can also handle, many other
tasks. For example, you can use ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ to install your program's
files in the standard directories, and clean up the object files
when you no longer need them.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To learn all about ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ and especially ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">GNU Make</span></samp>¡¯, please read
the excellent <cite style="font-size: 16px !important; line-height: 16.6667px !important;">GNU Make manual</cite>. In general, to use the GNU build
system you don't need to know the most esoteric aspects of the GNU make,
because makefiles will be automatically compiled for you from higher
level descriptions. However it is important to understand the basic
aspects of ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ to use the GNU build system effectively. In the
following sections we will explain only these basic aspects.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ utility reads its instructions from a file named
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp> in the current directory. ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ itself has no
knowledge about the syntax of the files that it works with, and it
relies on the instructions in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp> to figure out what it
needs to do. A makefile is essentially a list of <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">rules</dfn>. Each rule
has the form:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     <span class="sc" style="font-size: 12px !important; line-height: 14.1667px !important;">Target</span>: <span class="sc" style="font-size: 12px !important; line-height: 14.1667px !important;">Dependencies</span>
     &lt;TAB&gt; <span class="sc" style="font-size: 12px !important; line-height: 14.1667px !important;">Command</span>
     &lt;TAB&gt; .....
     &lt;TAB&gt; .....
     <span class="sc" style="font-size: 12px !important; line-height: 14.1667px !important;">[Blank Line]</span>
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The &lt;TAB&gt;s are mandatory. The blank line at the end of the rule definition
is not necessary when using GNU make but it is a good idea if you would
like backwards compatibility with Unix.
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">The <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">target</dfn> is either the name of a file that is generated by a program
or the name of an action to carry out. Object files and executable files
are examples of files that are generated by other programs. Cleaning
up the object files is an example of an action that we might want to
carry out. Targets that correspond to an action are sometimes called
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">phony targets</dfn>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">In general a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">dependency</dfn> is a file that is used as input to create a
target. If a target has more than one dependencies, they must be separated
by spaces, but they must remain on the same line. It is possible for
a target to have no dependencies. In that case, the space after the
semicolon must be left blank. It is also possible for a target, even
one that represents an action, to be a dependency for another target. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">commands</dfn> following the target and the dependencies must be
prepended with &lt;TAB&gt;. If the target is a file, then the commands
explain how to create that file. If the target is an action, then
the commands describe the action. These commands are your usual shell
commands that you get to type in your prompt. 
</li></ul>
   When you invoke <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp> you must tell it which target you want to
build. If you don't specify a target, then <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp> will build the
first target that is mentioned in the makefile.

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">When we talk about ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">building</dfn> a target, we mean that we want
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ to do the following things:
     </p><ol start="1" style="font-size: 16px !important; line-height: 16.6667px !important;" type="1">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Build</dfn> the dependencies. If a dependency is a file written by
<em style="font-size: 16px !important; line-height: 16.6667px !important;">you</em>, this means do nothing. If a dependency is a target defined
elsewhere in the makefile, this means <em style="font-size: 16px !important; line-height: 16.6667px !important;">build that target first</em>,
which recurses this two-step process. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If at least one of the dependencies is <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">newer</dfn> than the target, or the
file with the name of the target does not exist, then invoke the commands
that correspond to the target. If the target is a file, then the commands
should create the file. If the target is an action, then the commands
will not create any file, but they will carry out the action.
        </li></ol>
Assuming that both a dependency and the
target are files, we say that the dependency is <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">newer</dfn> than the target,
if the dependency was last modified more recently than the target. 
The target then should be rebuild to reflect the most recent modifications
of the dependency.

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">If the requested target exists as a file, and there are no dependencies
newer than the target, then ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ will do nothing except printing
a message saying that it has nothing to do. If the requested target is
an action, no file will ever exist having the same name as the name
describing the action, so every time you ask ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ to build that
target, it will always carry out your request. If one of the dependencies
is a target corresponding to an action, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ will always attempt
to build it and consequently always carry out that action. 
These three observations are only corollaries of the general algorithm.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To see how all this comes together in practice let's write a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp>
for compiling the hello world program. The simplest way to do this
is with the following makefile:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     hello: hello.c
     &lt;TAB&gt; gcc -o hello hello.c
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This simply says that the target <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello</span></samp> is being built from the
file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello.c</span></samp> by invoking the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">gcc</span></samp> command
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gcc -o hello hello.c
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">A more complicated way of doing the same thing is by explicitly building
the intermediate object file:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     hello: hello.o
     &lt;TAB&gt; gcc -o hello hello.o
     
     hello.o: hello.c
     &lt;TAB&gt; gcc -c hello.c
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Note that the target that we really want to build, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello</span></samp> is listed
first, to make sure that it is the default target. 
Finally, we can add two more phony targets <code style="font-size: 12px !important; line-height: 14.1667px !important;">install</code> and <code style="font-size: 12px !important; line-height: 14.1667px !important;">clean</code>
to install the hello world program and clean up the build after installation. 
We get then the following:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     hello: hello.o
     &lt;TAB&gt; gcc -o hello hello.o
     
     hello.o: hello.c
     &lt;TAB&gt; gcc -c hello.c
     
     clean:
     &lt;TAB&gt; rm -f hello hello.o
     
     install: hello
     &lt;TAB&gt; mkdir -p /usr/local/bin
     &lt;TAB&gt; rm -f /usr/local/bin/hello
     &lt;TAB&gt; cp hello /usr/local/bin/hello
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The <code style="font-size: 12px !important; line-height: 14.1667px !important;">clean</code> needs no dependencies since it just does what it does. 
However, the <code style="font-size: 12px !important; line-height: 14.1667px !important;">install</code> target needs to first make sure that the
file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello</span></samp> exists before attempting to install it, so it is necessary
to list <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello</span></samp> as a dependency to <code style="font-size: 12px !important; line-height: 14.1667px !important;">install</code>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Please note that this simple <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp> is for illustration only,
and it is far from ideal. For example, we use the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">mkdir</span></samp>¡¯ command
to make sure that the installation directory exists before attempting
an install, but the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-p</span></samp>¡¯ flag is not portable in Unix. Also, we usually
want to use a BSD compatible version of the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">install</span></samp> utility to
install executables instead of <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">cp</span></samp>. Fortunately, you will almost
never have to worry about writing ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">clean</span></samp>¡¯ and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">install</span></samp>¡¯ targets,
because those will be generated for you automatically by Automake.

<!-- ============================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="More-about-Makefiles" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Basic-Makefile-concepts" style="font-size: 16px !important; line-height: 16.6667px !important;">Basic Makefile concepts</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Compiling-with-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiling with Makefiles</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">4.8 More about Makefiles</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Now let's consider a more complicated example. Suppose that we want to
build a program <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo</span></samp> whose source code is four source files
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     foo1.c, foo2.c, foo3.c, foo4.c
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and three header files:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     gleep1.h, gleep2.h, gleep3.h
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Suppose also, for the sake of argument, that
     </p><ol start="1" style="font-size: 16px !important; line-height: 16.6667px !important;" type="1">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo1.c</span></samp> includes <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">gleep2.h</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">gleep3.h</span></samp>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo2.c</span></samp> includes <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">gleep1.h</span></samp>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo3.c</span></samp> includes <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">gleep1.h</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">gleep2.h</span></samp>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo4.c</span></samp> includes <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">gleep3.h</span></samp>
        </li></ol>
To build the executable file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo</span></samp>, we need to build the
object files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo1.o</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo2.o</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo3.o</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo4.o</span></samp>
that correspond to the source files and link them together. 
If any of the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">*.c</span></samp> files is modified, then only the corresponding
object file and the executable need to be updated. However, if one
of the header files is modified, then all the object files whose corresponding
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">*.c</span></samp> file includes the modified header file should be rebuilt. 
It follows that each of the object files depends on the corresponding
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">*.c</span></samp> file and all the header files that that file includes. 
We get then the following <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp>:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     foo: foo1.o foo2.o foo3.o foo4.o
     &lt;TAB&gt; gcc -o foo foo1.o foo2.o foo3.o foo4.o
     
     foo1.o: foo1.c gleep2.h gleep3.h
     &lt;TAB&gt; gcc -c foo1.c
     
     foo2.o: foo2.c gleep1.h
     &lt;TAB&gt; gcc -c foo2.c
     
     foo3.o: foo3.c gleep1.h gleep2.h
     &lt;TAB&gt; gcc -c foo3.c
     
     foo4.o: foo4.c gleep3.h
     &lt;TAB&gt; gcc -c foo4.c
     
     clean:
     &lt;TAB&gt; rm -f foo foo1.o foo2.o foo3.o foo4.o
     
     install: foo
     &lt;TAB&gt; mkdir -p /usr/local/bin
     &lt;TAB&gt; rm -f /usr/local/bin/foo
     &lt;TAB&gt; cp foo /usr/local/bin/foo
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This idea can be easily generalized for any program. If you would like
to build more than one programs, then you should add a phony target
in the beginning that depends on the programs that you want to build. 
The usual way we do this is by adding a line like
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     all: prog1 prog2 prog3
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">to the beginning of the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Unfortunately, this <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp> has a lot of unnecessary redundancy:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">All object files get built the same way. It would be nice then, if
we didn't have to write a rule for every one of them and instead
describe how it's done in general. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If we decide to change the compiler used, we would would need to edit
the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp> in 6 places. It should be easier than that. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The list of object files <code style="font-size: 12px !important; line-height: 14.1667px !important;">foo1.o, ..., foo4.o</code> appears in at least
two places. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The directory name <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local/bin</span></samp> appears in two places. 
</li></ul>
   This redundancy can be eliminated by using <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">makefile variables</dfn> and
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">abstract rules</dfn>.

     <ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Makefile variables</dfn> are actually more like macro definitions. 
The syntax for defining a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">makefile variable</dfn> is:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          <var style="font-size: 12px !important; line-height: 14.1667px !important;">variable</var> = <var style="font-size: 12px !important; line-height: 14.1667px !important;">value</var>
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Then, in every other rule or variable definition, the symbol
<var style="font-size: 16px !important; line-height: 16.6667px !important;">$(variable)</var> is substituted with <var style="font-size: 16px !important; line-height: 16.6667px !important;">value</var>.

     </p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">An <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">abstract rule</dfn> is a definition that explains how to build a
file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">*.</span><var style="font-size: 12px !important; line-height: 14.1667px !important;">s2</var></samp> from a file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">*.</span><var style="font-size: 12px !important; line-height: 14.1667px !important;">s1</var></samp>, where <var style="font-size: 16px !important; line-height: 16.6667px !important;">s1</var>
and <var style="font-size: 16px !important; line-height: 16.6667px !important;">s2</var> are suffixes. The general syntax for an abstract rule is:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          .<var style="font-size: 12px !important; line-height: 14.1667px !important;">s1</var>.<var style="font-size: 12px !important; line-height: 14.1667px !important;">s2</var>:
          &lt;TAB&gt; <span class="sc" style="font-size: 12px !important; line-height: 14.1667px !important;">Command</span>
          &lt;TAB&gt; <span class="sc" style="font-size: 12px !important; line-height: 14.1667px !important;">Command</span>
          &lt;TAB&gt; .....
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">where <var style="font-size: 16px !important; line-height: 16.6667px !important;">s1</var> is the suffix of the source file, and <var style="font-size: 16px !important; line-height: 16.6667px !important;">s2</var> is the
suffix of the corresponded generated file and <span class="sc" style="font-size: 16px !important; line-height: 16.6667px !important;">Command</span> is the set
of commands that generate <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">*.</span><var style="font-size: 12px !important; line-height: 14.1667px !important;">s2</var></samp> from  <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">*.</span><var style="font-size: 12px !important; line-height: 14.1667px !important;">s1</var></samp>. 
Note that no dependencies are mentioned, because dependencies don't
make sense in the general case. They must be explicitly provided for
each individual case separately. 
</p></li></ul>
   In the context of an abstract rule, the following punctuation marks have
the following meanings:
     <dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">$&lt;</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">are the dependencies that changed causing the target to need to be rebuilt
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">$@</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">is the target
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">$^</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">are <em style="font-size: 16px !important; line-height: 16.6667px !important;">all</em> the dependencies for the current rule
</dd></dl>
   For example, the abstract rule for building an object file from a source
file is:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     .c.o:
     &lt;TAB&gt; gcc -c $&lt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Similarly, the rule for building the executable file from a set of
object files is:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     .o:
     &lt;TAB&gt; gcc $^ -o $@
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Note that because executables don't have a suffix, we only mention the
suffix of the object files. When only one suffix appears, it is
assumed that it is suffix <var style="font-size: 16px !important; line-height: 16.6667px !important;">s1</var> and that suffix <var style="font-size: 16px !important; line-height: 16.6667px !important;">s2</var> is the
empty string.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The suffixes involved in your abstract rules, need to be listed in
a directory that takes the form:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     .SUFFIXES: <var style="font-size: 12px !important; line-height: 14.1667px !important;">s1</var> <var style="font-size: 12px !important; line-height: 14.1667px !important;">s2</var> ... <var style="font-size: 12px !important; line-height: 14.1667px !important;">sn</var>
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">where <var style="font-size: 16px !important; line-height: 16.6667px !important;">s1</var>, <var style="font-size: 16px !important; line-height: 16.6667px !important;">s2</var>, etc. are suffixes. Also,
if you've written an abstract rule, you still need to write rules
where you mention the specific targets and their dependencies, except
that you can omit the command-part since they are covered by the abstract
rule.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Putting all of this together, we can enhance our <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp> like
this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     CC = gcc
     CFLAGS = -Wall -g
     OBJECTS = foo1.o foo2.o foo3.o foo4.o
     PREFIX = /usr/local
     
     .SUFFIXES: .c .o
     
     .c.o:
     &lt;TAB&gt; $(CC) $(CFLAGS) -c $&lt;
     
     .o:
     &lt;TAB&gt; $(CC) $(CFLAGS) $^ -o $@
     
     foo: $(OBJECTS)
     foo1.o: foo1.c gleep2.h gleep3.h
     foo2.o: foo2.c gleep1.h
     foo3.o: foo3.c gleep1.h gleep2.h
     foo4.o: foo4.c gleep3.h
     
     clean:
     &lt;TAB&gt; rm -f $(OBJECTS)
     
     install: foo
     &lt;TAB&gt; mkdir -p $(PREFIX)/bin
     &lt;TAB&gt; rm -f $(PREFIX)/bin/foo
     &lt;TAB&gt; cp foo $(PREFIX)/bin/foo
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The only part of this Makefile that still requires some thinking on your
part, is the part where you list the object files and their dependencies:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     foo1.o: foo1.c gleep2.h gleep3.h
     foo2.o: foo2.c gleep1.h
     foo3.o: foo3.c gleep1.h gleep2.h
     foo4.o: foo4.c gleep3.h
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Note however, that in principle even that can be automatically generated. 
Even though the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp> utility does not understand C source code
and can not determine the dependencies, the GNU C compiler can. 
If you use the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-MM</span></samp>¡¯ flag, then the compiler will compute and output
the dependency lines that you need to include in your Makefile. For example:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gcc -MM foo1.c
     foo1.o: foo1.c gleep2.h gleep3.h
     % gcc -MM foo2.c
     foo2.o: foo2.c gleep1.h
     % gcc -MM foo3.c
     foo3.o: foo3.c gleep1.h gleep2.h
     % gcc -MM foo4.c
     foo4.o: foo4.c gleep3.h
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Unfortunately, unlike all the other compiler features we have described
up until now, this feature is not portable in Unix. If you have installed
the GNU compiler on your Unix system however, then you can also do this.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Dealing with dependencies is one of the major drawbacks of writing
makefiles by hand. Another drawback is that even though
we have moved many of the parameters to makefile variables, these
variables still need to be adjusted by somebody. There is something
rude about asking the installer to edit <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp>. 
Developers that ask their users to edit <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp> make their
user's life more difficult in an unacceptable way. Yet another annoyance
is writing <code style="font-size: 12px !important; line-height: 14.1667px !important;">clean</code>, <code style="font-size: 12px !important; line-height: 14.1667px !important;">install</code> and such targets. Doing so every
time you write a makefile gets to be tedious on the long run. Also,
because these targets are, in a way, mission critical, it is really important
not to make mistakes when you are writing them. Finally, if you want
to use multiple directories for every one of your libraries and
programs, you need to setup your makefiles to recursively
call ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ on the subdirectories, write a whole lot of makefiles,
and have a way of propagating configuration information to every one of
these makefiles from a centralized source.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">These problems are not impossible to deal with, but you need a lot of
experience in makefile writing to overcome them. Most developers don't
want to bother as much with all this, and would rather be debugging
their source code. The GNU build system helps you set up your source code
to make this possible. For the same example, the GNU developer only needs to
write the following <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> file:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     bin_PROGRAMS = foo
     foo_SOURCES = foo1.c foo2.c foo3.c foo4.c
     noinst_HEADERS = gleep1.h gleep2.h gleep3.h
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and set a few more things up. This file is then compiled into an
intermediate file, called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp>, by Automake, and during
installation the final <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp> is generated from <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp>
by a shell script called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>. This shell script is provided
by the developer and it is also automatically generated with Autoconf. 
For more details see
<a href="#Hello-world-example-with-Autoconf-and-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello world example with Autoconf and Automake</a>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In general you will not need to be writing makefiles by hand. It is
useful however to understand how makefiles work and how to write
abstract rules.

<!-- Copyright (C) 1998 Eleftherios Gkioulekas <lf@amath.washington.edu> -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="The-GNU-build-system" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Compiling-with-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiling with Makefiles</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="chapter" style="font-size: 24px !important; line-height: 25px !important;">5 The GNU build system</h2>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system has two goals. The first is to simplify the development
of portable programs. The second is to simplify the building of programs that
are distributed as source code. The first goal is achieved by the automatic
generation of a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> shell script, which configures the source
code to the installer platform. The second goal is achieved
by the automatic generation of Makefiles and other shell scripts that are
typically used in the building process. This way the developer can concentrate
on debugging per source code, instead of per overly complex Makefiles. 
And the installer can compile and install the program directly from the
source code distribution by a simple and automatic procedure.

</p><ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="1" href="#Introducing-the-GNU-tools" style="font-size: 16px !important; line-height: 16.6667px !important;">Introducing the GNU tools</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="2" href="#Installing-the-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing the GNU build system</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="3" href="#Hello-world-example-with-Autoconf-and-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello world example with Autoconf and Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="4" href="#Understanding-the-hello-world-example" style="font-size: 16px !important; line-height: 16.6667px !important;">Understanding the hello world example</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="5" href="#Using-configuration-headers" style="font-size: 16px !important; line-height: 16.6667px !important;">Using configuration headers</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="6" href="#Maintaining-the-documentation-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining the documentation files</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="7" href="#Organizing-your-project-in-subdirectories" style="font-size: 16px !important; line-height: 16.6667px !important;">Organizing your project in subdirectories</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="8" href="#Applying-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">Applying the GPL</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="9" href="#Handling-version-numbers" style="font-size: 16px !important; line-height: 16.6667px !important;">Handling version numbers</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Hello-world-with-acmkdir" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello world with acmkdir</a>
</li></ul>

<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Introducing-the-GNU-tools" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Installing-the-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing the GNU build system</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#The-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">5.1 Introducing the GNU tools</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">When we speak of the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">GNU build system</dfn> we refer primarily to the
following four packages:
     </p><ol start="1" style="font-size: 16px !important; line-height: 16.6667px !important;" type="1">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Autoconf</strong> produces a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">configuration shell script</dfn>, named
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>, which probes the installer platform for portability related
information which is required to customize makefiles, configuration header
files, and other application specific files. Then it proceeds to generate
customized versions of these files from generic templates. This way, the
user will not need to customize these files manually. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Automake</strong> produces makefile templates, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp> to be used
by Autoconf, from a very high level specification stored in a file called
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>. Automake produces makefiles that conform to the GNU
makefile standards, taking away the extraordinary effort required to produce
them by hand. Automake requires Autoconf in order to be used properly. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Libtool</strong> makes it possible to compile position independent code and
build shared libraries in a portable manner. It does not require either
Autoconf, or Automake and can be used independently. Automake however supports
libtool and interoperates with it in a seamless manner. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Autotoolset</strong> helps you develop portable source code that conforms
to the GNU coding standards by generating various boilerplate
files from which you can plunge into developing your software.
        </li></ol>
Some tasks that are simplified by the GNU build system include:
     <ol start="1" style="font-size: 16px !important; line-height: 16.6667px !important;" type="1">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">Building multidirectory software packages. It is much more difficult to use
raw <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code> recursively. Having simplified this step, the developer
is encouraged to organize per source code in a deep directory tree rather than
lump everything under the same directory. Developers that use raw <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code>
often can't justify the inconvenience of recursive make and prefer to
disorganize their source code. With the GNU tools this is no longer necessary. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Automatic configuration. You will never have to tell your users that they
need to edit your Makefile. You yourself will not have to edit your Makefiles
as you move new versions of your code back and forth between different
machines. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Automatic makefile generation. Writing makefiles involves a lot of repetition,
and in large projects very error-prone. Also, certain portions of a good
makefile, such as the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">install</span></samp>¡¯ and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">uninstall</span></samp>¡¯ targets are
very critical because they are run by the superuser. They must be written
without any bugs! The GNU build system automates makefile writing. You
are only required to write <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> files that are much more
terse and easy to maintain. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Support for test suites. You can very easily write test suite code, and
by adding one extra line in your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> make a <code style="font-size: 12px !important; line-height: 14.1667px !important;">check</code>
target available such that you can compile and run the entire test suite
by running <code style="font-size: 12px !important; line-height: 14.1667px !important;">make check</code>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Automatic distribution building. The GNU build tools are meant to be used
in the development of <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">free software</dfn>, therefore if you have a working
build system in place for your programs, you can create a source code
distribution out of
it by running <code style="font-size: 12px !important; line-height: 14.1667px !important;">make distcheck</code>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Shared libraries. Building shared libraries becomes as easy as building
static libraries.
        </li></ol>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system needs to be installed only when you are developing
programs that are meant to be distributed. To build a program from
distributed source code, the installer only needs a working <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code>
utility, a compiler, a shell,
and sometimes standard Unix utilities like <code style="font-size: 12px !important; line-height: 14.1667px !important;">sed</code>, <code style="font-size: 12px !important; line-height: 14.1667px !important;">awk</code>,
<code style="font-size: 12px !important; line-height: 14.1667px !important;">yacc</code>, <code style="font-size: 12px !important; line-height: 14.1667px !important;">lex</code>. The objective is to make software installation
as simple and as automatic as possible for the installer. Also, by
setting up the GNU build system such that it creates programs that don't
require the build system to be present during their installation, it
becomes possible to use the build system to bootstrap itself.

<!-- ============================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Installing-the-GNU-build-system" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Hello-world-example-with-Autoconf-and-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello world example with Autoconf and Automake</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Introducing-the-GNU-tools" style="font-size: 16px !important; line-height: 16.6667px !important;">Introducing the GNU tools</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">5.2 Installing the GNU build system</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">If you are on a Unix system, don't be surprised if the GNU development
tools are not installed. Some Unix sysadmins have never heard about them. 
If you do have them installed check to see whether you have the most
recent versions. To do that, type:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % autoconf --version
     % automake --version
     % libtool --version
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This manual is current with Autoconf 2.57, Automake
1.6.3 and Libtool 1.4.3.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If you don't have any of the above packages, you need to get a copy and
install them on your computer. The distribution filenames for the GNU build
tools, are:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     autoconf-2.57.tar.gz
     automake-1.6.3.tar.gz
     libtool-1.4.3.tar.gz
     autotoolset-0.11.6.tar.gz
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Before installing these packages however, you will need to install the
following needed packages from the FSF:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     make-*.tar.gz
     m4-*.tar.gz
     texinfo-4.3.tar.gz
     tar-*.shar.gz
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The asterisks in the version numbers mean that the version for these
programs is not critically important.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">You will need the GNU versions of <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code>, <code style="font-size: 12px !important; line-height: 14.1667px !important;">m4</code> and
<code style="font-size: 12px !important; line-height: 14.1667px !important;">tar</code> even if your system already has native versions of these utilities. 
To check whether you do have the GNU versions see whether they accept the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">--version</code> flag. If you have proprietary versions of <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code> or
<code style="font-size: 12px !important; line-height: 14.1667px !important;">m4</code>, rename them and then install the GNU ones. 
You will also need to install <em style="font-size: 16px !important; line-height: 16.6667px !important;">Perl</em>, the <em style="font-size: 16px !important; line-height: 16.6667px !important;">GNU C compiler</em>,
and the <em style="font-size: 16px !important; line-height: 16.6667px !important;">TeX</em> typesetting system. These programs are always installed
on a typical Debian GNU/Linux system.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">It is important to note that the end user will only need a decent shell
and a working <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code> to build a source code distribution. The developer
however needs to gather all of these tools in order to create the distribution.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The installation process, for all of these tools that you obtain as
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">*.tar.gz</span></samp> distributions is rather straightforward:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % ./configure
     % make
     % make check
     % make install
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Most of these tools include documentation which you can build with
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % make dvi
</pre>
   <p class="noindent" style="font-size: 16px !important;"><!-- ============================================================ -->

</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Hello-world-example-with-Autoconf-and-Automake" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Understanding-the-hello-world-example" style="font-size: 16px !important; line-height: 16.6667px !important;">Understanding the hello world example</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Installing-the-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing the GNU build system</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">5.3 Hello world example with Autoconf and Automake</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">To get started we will show you how to do the Hello world program using
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</span></samp>¡¯ and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp>¡¯. In the fine tradition of <span class="sc" style="font-size: 16px !important; line-height: 16.6667px !important;">k&amp;r</span>, the
C version of the hello world program is:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #include &lt;stdio.h&gt;
     main()
     {
      printf("Howdy world!\n");
     }
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Call this <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello.c</span></samp> and place it under an empty directory. 
Simple programs like this can be compiled and ran directly with the
following commands:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gcc hello.c -o hello
     % hello
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">If you are on a Unix system instead of a GNU system, your compiler might
be called ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">cc</span></samp>¡¯ but the usage will be pretty much the same.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Now to do the same thing the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</span></samp>¡¯ and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp>¡¯ way
create first the following files:

     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          bin_PROGRAMS = hello
          hello_SOURCES = hello.c
</pre>
     <br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_INIT(hello.c)
          AM_INIT_AUTOMAKE(hello,0.1)
          AC_PROG_CC
          AC_PROG_INSTALL
          AC_OUTPUT(Makefile)
</pre>
     </dd></dl>

<p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Now run ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</span></samp>¡¯:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % aclocal
     % autoconf
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This will create the shell script <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>. 
Next, run ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp>¡¯:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % automake -a
     required file "./install-sh" not found; installing
     required file "./mkinstalldirs" not found; installing
     required file "./missing" not found; installing
     required file "./INSTALL" not found; installing
     required file "./NEWS" not found
     required file "./README" not found
     required file "./COPYING" not found; installing
     required file "./AUTHORS" not found
     required file "./ChangeLog" not found
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The first time you do this, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp>¡¯ will complain a couple of things. 
First it notices that the files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">install-sh</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">mkinstalldirs</span></samp>
and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">missing</span></samp> are not present, and it installs copies. These files
contain boiler-plate shell scripts that are needed by the makefiles that
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp>¡¯ generates. It also complains that the following files
are not around:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     INSTALL, COPYING, NEWS, README, AUTHORS, ChangeLog
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">These files are required to be present by the GNU coding standards, and
we discuss them in detail in
<a href="#Maintaining-the-documentation-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining the documentation files</a>. 
At this point, it is important to at least touch these files, otherwise
if you attempt to do a ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make distcheck</span></samp>¡¯ it will deliberately fail. 
To make these files exist, type:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % touch NEWS README AUTHORS ChangeLog
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and to make Automake aware of the existence of these files, rerun it:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % automake -a
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">You can assume that the generated <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp> is correct, only
when Automake completes without any error messages.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Now the package is exactly in the state that the end-user will find
it when person unpacks it from a source code distribution. For future
reference, we will call this state <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">autoconfiscated</dfn>. 
Being in an autoconfiscated state means that, you are ready to type:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % ./configure
     % make
     % ./hello
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">to compile and run the hello world program. If you really want to install it,
go ahead and call the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">install</span></samp>¡¯ target:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     # make install
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">To undo installation, that is to <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">uninstall</dfn> the package, do:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     # make uninstall
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">If you didn't use the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">--prefix</span></samp>¡¯ argument to point to your home directory,
or a directory in which you have permissions to write and execute,
you may need to be superuser to invoke the install and uninstall commands. 
If you feel like cutting a source code distribution, type:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     make distcheck
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This will create a file called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello-0.1.tar.gz</span></samp> in the current
working directory that contains the project's source code, and test it
out to see whether all the files are actually included and whether the
source code passes the regression test suite.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In order to do all of the above, you need to use the
GNU ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gcc</span></samp>¡¯ compiler. Automake depends on ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gcc</span></samp>¡¯'s ability to
compute dependencies. Also, the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">distcheck</span></samp>¡¯ target requires
GNU make and GNU tar.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build tools assume that there are two types of hats that people
like to wear: the
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">developer</dfn> hat and the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">installer</dfn> hat. Developers develop
the source code and create the source code distribution. 
Installers just want to compile and install a source code distribution on
their system. In the free software community, the same people get to wear
either hat depending on what they want to do. If you are a developer, then
you need to install the entire GNU build system, period
(see <a href="#Installing-the-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">Installing the GNU build system</a>). 
If you are an installer, then all you need to compile and install a
GNU package is a minimal ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ utility and a minimal shell. 
Any native Unix shell and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ will work.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Both Autoconf and Automake take special
steps to ensure that packages generated through the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">distcheck</span></samp>¡¯
target can be easily installed with minimal tools. Autoconf generates
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> shell scripts that use only portable Bourne shell features. 
(see <a href="#Portable-shell-programming" style="font-size: 16px !important; line-height: 16.6667px !important;">Portable shell programming</a>)
Automake ensures that the source code is in an autoconfiscated state
when it is unpacked. It also regenerates the makefiles before adding them
to the distribution, such that the installer targets
(¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">all</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">install</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">uninstall</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">check</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">clean</span></samp>¡¯,
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">distclean</span></samp>¡¯) do not depend on GNU make features. The regenerated
makefiles also do not use the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gcc</span></samp>¡¯ cruft to compute dependencies. 
Instead, precomputed dependencies are included in the regenerated makefiles,
and the dependencies generation mechanism is disabled. This will allow
the end-user to compile the package using a native compiler, if the GNU
compiler is not available. For future reference we will call this the
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">installer state</dfn>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Now wear your installer hat, and install <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello-0.1.tar.gz</span></samp>:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % gunzip hello-0.1.tar.gz
     % tar xf hello-0.1.tar
     % cd hello-0.1
     % configure
     % make
     % ./hello
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This is the full circle. The distribution compiles, and by typing
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make install</span></samp>¡¯ it installs. If you need to switch back to the
developer hat, then you should rerun ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp>¡¯ to get regenerate
the makefiles.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">When you run the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">distcheck</span></samp>¡¯ target, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ will create the
source code distribution ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">hello-0.1.tar.gz</span></samp>¡¯ <em style="font-size: 16px !important; line-height: 16.6667px !important;">and</em> it will
pretend that it is an installer and see if it the distribution can be
unpacked, configured, compiled and installed. It will also run the
test suite, if one is bundled. If you would like to skip these tests,
then run the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">dist</span></samp>¡¯ target instead:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % make dist
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Nevertheless, running ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">distcheck</span></samp>¡¯ is extremely helpful in debugging
your build cruft. Please never release a distribution without getting
it through ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">distcheck</span></samp>¡¯. If you make daily distributions for off-site
backup, please do pass them through ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">distcheck</span></samp>¡¯. If there are
files missing from your distribution, the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">distcheck</span></samp>¡¯ target will
detect them. If you fail to notice such problems, then your backups
will be incomplete leading you to a false sense of security.

<!-- ============================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Understanding-the-hello-world-example" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Using-configuration-headers" style="font-size: 16px !important; line-height: 16.6667px !important;">Using configuration headers</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Hello-world-example-with-Autoconf-and-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello world example with Autoconf and Automake</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">5.4 Understanding the hello world example</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">When you made the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello-0.1.tar.gz</span></samp> distribution, most of the files
were automatically generated. The only files that were actually written
by your fingers were:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello.c</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #include &lt;stdio.h&gt;
          main()
          {
           printf("Howdy, world!\n");
          }
</pre>
     <p class="noindent" style="font-size: 16px !important;"><br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          bin_PROGRAMS = hello
          hello_SOURCES = hello.c
</pre>
     <p class="noindent" style="font-size: 16px !important;"><br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_INIT(hello.cc)
          AM_INIT_AUTOMAKE(hello,1.0)
          AC_PROG_CC
          AC_PROG_INSTALL
          AC_OUTPUT(Makefile)
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></dd></dl>
   In this section we explain briefly what the files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>
and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> mean.

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">The language of <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> is a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">logic language</dfn>. There is no
explicit statement of execution. Only a statement of relations from which
execution is inferred. On the other hand, the language of <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>
is <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">procedural</dfn>. Each line of <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> is a command that
is executed.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Seen in this light, here's what the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> commands shown do:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">The <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_INIT</code> command initializes the configure script. It must be
passed as argument the name of one of the source files. Any source file
will do. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The <code style="font-size: 12px !important; line-height: 14.1667px !important;">AM_INIT_AUTOMAKE</code> performs some further initializations that are
related to the fact that we are using ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp>¡¯. If you are writing
your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp> by hand, then you don't need to call this command. 
The two comma-separated arguments are the name of the package and the
version number. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_PROG_CC</code> checks to see which C compiler you have. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_PROG_INSTALL</code> checks to see whether your system has a BSD
compatible install utility. If not then it uses <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">install-sh</span></samp> which
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp> will install at the root of your package directory if it's
not there yet. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_OUTPUT</code> tells the configure script to generate <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp>
from <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp>
</li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> is more obvious. The first line specifies the name
of the program we are building. The second line specifies the source files
that compose the program.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">For now, as far as <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> is concerned you need to know
the following additional facts:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">If you are building a library, then your configure script must determine
how to handle ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">ranlib</span></samp>¡¯. To do that, add the <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_PROG_RANLIB</code>
command. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If your source code contains C++ files, you need to add the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_PROG_CXX</code> to your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If your source code contains ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">yacc</span></samp>¡¯ and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">lex</span></samp>¡¯ files,
then you need to add:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_PROG_YACC
          AC_PROG_LEX
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">to your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If your source code contains Fortran source code, you need to add
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">AC_PROG_FC</span></samp> to your code. If you want to mix C and Fortran,
then you need to do a lot more than just that. 
See <a href="#Using-Fortran-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Fortran effectively</a>, for more details. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If you have any makefiles in subdirectories you must also put them in the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_OUTPUT</code> statement like this:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_OUTPUT(Makefile          \
                    dir1/Makefile     \
                    dir2/Makefile     \
                   )
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Note that the backslashes are not needed if you are using the bash shell. 
For portability reasons, however, it is a good idea to include them. 
Make sure that <em style="font-size: 16px !important; line-height: 16.6667px !important;">every</em> subdirectory where building takes place,
is mentioned! 
</p></li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">Now consider the commands that are used to build the hello world distribution:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % aclocal
     % autoconf
     % touch README AUTHORS NEWS ChangeLog
     % automake -a
     % ./configure
     % make
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The first three commands bring the package in autoconfiscated state. The
remaining two commands do the actual configuration and building. More
specifically:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">aclocal</span></samp>¡¯ command installs a file called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">aclocal.m4</span></samp>. Normally,
in that file you are supposed to place the definitions of any ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</span></samp>¡¯
macros that you've written that happen to be in use in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>. 
We will teach you how to write ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</span></samp>¡¯ macros later. 
The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp>¡¯ utility uses the <code style="font-size: 12px !important; line-height: 14.1667px !important;">AM_INIT_AUTOMAKE</code> macro which is
not part of the standard ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</span></samp>¡¯ macros. For this reason, its
definition needs to be placed in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">aclocal.m4</span></samp>. If you call ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">aclocal</span></samp>¡¯
with no arguments then it will generate the appropriate <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">aclocal.m4</span></samp> file. 
Later we will show you how to use ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">aclocal</span></samp>¡¯ to also install your
own ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</span></samp>¡¯ macros. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</span></samp>¡¯ command combines the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">aclocal.m4</span></samp> and
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> files and produces the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> script. 
And now we are in business. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">touch</span></samp>¡¯ command makes the files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">README</span></samp> and friends exist. 
It is important that these files exist before calling Automake, because
Automake decides whether to include them in a distribution by checking
if they exist at the time that you invoke ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp>¡¯. Automake
<em style="font-size: 16px !important; line-height: 16.6667px !important;">must</em> decide to include these files, because when you type
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make distcheck</span></samp>¡¯ the presence of these files will be required. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp>¡¯ command compiles a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp> file from
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> and if absent it installs various files that are required
either by the GNU coding standards or by the makefile that will be generated. 
</li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> script probes your platform and generates makefiles
that are customized for building the source code on your platform. The
specifics of how the probing should be done are programmed in
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>. The generated makefiles are based on templates
that appear in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp> files. In order for these templates
to cooperate with <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> and produce makefiles that conform
to the GNU coding standards they need to contain a tedious amount of boring
stuff. This is where Automake comes in. Automakes generates the
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp> files from the more terse description in
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>. As you have seen in the example, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>
files can be very simple in simple cases. Once you have customized makefiles,
your make utility takes over.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">How does <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> actually convert the template <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp>
to the final makefile? The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> script really does
two things:
     </p><ol start="1" style="font-size: 16px !important; line-height: 16.6667px !important;" type="1">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">It maintains a list of <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">substitutions</dfn> that it accumulates while
probing the installer platform. Each one of these substitutions consists
of a symbolic name, and the actual text that we want to substitute. 
When the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> script runs <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_OUTPUT</code> it parses
all of the files listed in <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_OUTPUT</code> and every occurence of
<code style="font-size: 12px !important; line-height: 14.1667px !important;">@FOO@</code> in these files is substituted with the text that corresponds
to <code style="font-size: 12px !important; line-height: 14.1667px !important;">FOO</code>. For example, if you add the following lines to
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> you will cause <code style="font-size: 12px !important; line-height: 14.1667px !important;">@FOO@</code> to be substituted with
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">hello</span></samp>¡¯:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          FOO="hello"
          AC_SUBST(FOO)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This is how <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>
exports compile-time decisions to the makefile, such as what compiler
to use, what flags to pass the compilers and so on. 
Occasionally, you want to use <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>'s substitution capability
directly on files that are not makefiles. This is why it is important
to be aware of it. 
See <a href="#Scripts-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Scripts with Automake</a>, for an example. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">It maintains a list of C preprocessor macros with defined values that it
also accumulates while probing the installer platforms. Before finishing
off, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> will either generate a configuration file that defines
these C preprocessor macros to the desired values, or set a flag in
the generated makefile (through substitution) that will pass ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-D</span></samp>¡¯
flags to the compiler. We discuss configuration headers in the
following
        </li></ol>
See <a href="#Writing-Autoconf-macros" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Autoconf macros</a>, for more details on the internals of
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> scripts.

<!-- ============================================================ -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Using-configuration-headers" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Maintaining-the-documentation-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining the documentation files</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Understanding-the-hello-world-example" style="font-size: 16px !important; line-height: 16.6667px !important;">Understanding the hello world example</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">5.5 Using configuration headers</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">If you inspect the output of ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ while compiling the hello world
example, you will see that the generated Makefile is passing ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-D</span></samp>¡¯
flags to the compiler that define the macros <code style="font-size: 12px !important; line-height: 14.1667px !important;">PACKAGE</code> and <code style="font-size: 12px !important; line-height: 14.1667px !important;">VERSION</code>. 
These macros are assigned the arguments that are passed to the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">AM_INIT_AUTOMAKE</code> command in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>. 
One of the ways in which <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> customizes your source code to
a specific platform is by getting such C preprocessors defined. The
definition is requested by appropriate commands in the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>. 
The <code style="font-size: 12px !important; line-height: 14.1667px !important;">AM_INIT_AUTOMAKE</code> command is one such command.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system by default implements C preprocessor macro definitions
by passing ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-D</span></samp>¡¯ flags to the compiler. When there is too many of these
flags, we have two problems: the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ output becomes hard to read,
and more importantly we are running the risk of hitting the buffer limits
of braindead Unix implementations of ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯. To work around this problem,
you can ask Autoconf to use another approach in which all macros are
defined in a special header file that is included in all the sources. 
This header file is called a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">configuration header</dfn>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">A hello world program using this technique looks like this
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_INIT(hello.c)
          AM_CONFIG_HEADER(config.h)
          AM_INIT_AUTOMAKE(hello,0.1)
          AC_PROG_CC
          AC_PROG_INSTALL
          AC_OUTPUT(Makefile)
</pre>
     <p class="noindent" style="font-size: 16px !important;"><br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          bin_PROGRAMS = hello
          hello_SOURCES = hello.c
</pre>
     <p class="noindent" style="font-size: 16px !important;"><br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello.c</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #ifdef HAVE_CONFIG_H
          #include &lt;config.h&gt;
          #endif
          
          #include &lt;stdio.h&gt;
          main()
          {
           printf("Howdy, pardner!\n");
          }
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></dd></dl>
   To request the use of a configuration header we use the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">AM_CONFIG_HEADER</code> command. The configuration header must
be installed conditionally with the following three lines:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #if HAVE_CONFIG_H
     #include &lt;config.h&gt;
     #endif
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">It is important that <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</span></samp> is the first thing that gets included. 
Now autoconfiscate the source code by typing:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % aclocal
     % autoconf
     % touch NEWS README AUTHORS ChangeLog
     % autoheader
     % automake -a
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">It is important to type these commands in the order shown. The difference
between this, and what we did in
<a href="#Hello-world-example-with-Autoconf-and-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello world example with Autoconf and Automake</a>, is that
we had to run a new program: ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoheader</span></samp>¡¯. This program scans
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> and generates a template file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h.in</span></samp> listing
all the C preprocessor macros that might be defined and comments that should
accompany the macros describing what they do. When you run <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>,
it will load in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h.in</span></samp> and use it to generate the final
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</span></samp> that will be used by the source code during compilation.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Now you can go ahead and build the program:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % configure
     % make
     gcc -DHAVE_CONFIG_H -I. -I. -I.   -g -O2 -c hello.c
     gcc -g -O2  -o hello  hello.o
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Note that now instead of multiple <code style="font-size: 12px !important; line-height: 14.1667px !important;">-D</code> flags, there is only one
such flag passed: <code style="font-size: 12px !important; line-height: 14.1667px !important;">-DHAVE_CONFIG_H</code>. Also, appropriate <code style="font-size: 12px !important; line-height: 14.1667px !important;">-I</code>
flags are passed to make sure that <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello.c</span></samp> can find and include
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</span></samp>. 
To test the distribution, type:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % make distcheck
     ......
     ========================
     hello-0.1.tar.gz is ready for distribution
     ========================
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and it should all work out.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</span></samp> files go a long way back in history. In the past, there
used to be packages where you would have to manually edit <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</span></samp>
files and adjust the macros you wanted defined by hand. This made these
packages very difficult to install because they required intimate knowledge
of your operating system. For example, it was not unusual to see a comment
saying <em style="font-size: 16px !important; line-height: 16.6667px !important;">¡°if your system has a broken vfork, then define this macro¡±</em>. 
Many installers found this frustrating because they didn't really know how
to configure the esoteric details of the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</span></samp> files. 
With autoconfiguring source code all of these details can be taken care
of automatically, shifting this burden from the installer to the developer
where it belongs.

<!-- ======================================================================= -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Maintaining-the-documentation-files" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Organizing-your-project-in-subdirectories" style="font-size: 16px !important; line-height: 16.6667px !important;">Organizing your project in subdirectories</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-configuration-headers" style="font-size: 16px !important; line-height: 16.6667px !important;">Using configuration headers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">5.6 Maintaining the documentation files</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Every software project must have its own directory. A minimal ¡°project¡±
is the example that we described in
<a href="#Hello-world-example-with-Autoconf-and-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello world example with Autoconf and Automake</a>. In general,
even a minimal project must have the files:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     README, INSTALL, AUTHORS, THANKS, NEWS, ChangeLog
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Before distributing your source code, it
is important to write the real contents of these files. 
In this section we give a summary overview
on how these files should be maintained. For more details, please see
the <em style="font-size: 16px !important; line-height: 16.6667px !important;">GNU coding standards</em> as published by the FSF.

     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">The README file:</strong>
Every distribution must contain this file. This is the file that the
installer must read <em style="font-size: 16px !important; line-height: 16.6667px !important;">fully</em> after unpacking the distribution and
before configuring it. You should briefly explain the purpose of the
distribution, and reference all other documentation available. Instructions
for installing the package normally belong in the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">INSTALL</span></samp> file. 
However if you have something that you feel the installer <em style="font-size: 16px !important; line-height: 16.6667px !important;">should</em>
know then mention it in this file. Do not make the configuration or
installation process more complex, because you fear installers will not
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">README</span></samp> files. Assume this file is being read.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">For pretest releases, <em style="font-size: 16px !important; line-height: 16.6667px !important;">only</em>, you might also decide to distribute
a file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">README-alpha</span></samp> containing special comments for your friendly
pretesters. If you use the recommended version numbering scheme
(see <a href="#Handling-version-numbers" style="font-size: 16px !important; line-height: 16.6667px !important;">Handling version numbers</a>), you can automate its distribution
by adding the following code in your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          changequote(,)dnl
          case $VERSION in
           [0-9]*.[0-9]*[a-z]) DIST_ALPHA="README-alpha";;
           [0-9]*.[0-9]*.[0-9]*) DIST_ALPHA="README-alpha";;
           *) DIST_ALPHA=;;
          esac
          changequote([, ])dnl
          AC_SUBST(DIST_ALPHA)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">In your top-level <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>, add something like:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          EXTRA_DIST = $(DIST_ALPHA)
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">The INSTALL file:</strong>
Because the GNU installation procedure is streamlined, a standard
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">INSTALL</span></samp> file will be created for you automatically by <code style="font-size: 12px !important; line-height: 14.1667px !important;">Automake</code>. 
If you have something very important to say, it may be best to say it in
the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">README</span></samp> file instead. the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">INSTALL</span></samp> file is mostly for
the benefit of people who've never installed a GNU package before. 
However, if your package is very unusual, you may decide that it is
best to modify the standard INSTALL file or write your own. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">The AUTHORS file:</strong>
This file should collect a trace of all the legal paperwork that you have
exchanged with contributors for your particular package. This information
is very useful for registering the copyright of your package. 
The file might have an introductory blurb similar to this one:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          Authors of PACKAGE
          
          The following contributions warranted legal paper exchanges
          with [the Free Software Foundation | Your Name].
          Also see files ChangeLog and THANKS
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Then, list who the
contributors are and what files they have worked on. Indicate whether
they created the file, or whether they modified it. 
For example:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          Random J. Hacker:
            entire files  -&gt; foo1.c , foo2.c , foo3.c
            modifications -&gt; foo4.c , foo5.c
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">The THANKS file:</strong>
All distributions should contain a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">THANKS</span></samp> file containing
a two column list of the contributors, one per line, alphabetically
sorted. The left column gives the contributor's name, while the right
column gives the last known good email address for this contributor. 
This list should be introduced with a wording similar to this one:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          PACKAGE THANKS file
          
          PACKAGE has originally been written by ORIGINAL AUTHOR. Many
          people further contributed to PACKAGE by reporting problems,
          suggesting various improvements or submitting actual code.
          Here is a list of these people. Help me keep it complete and
          exempt of errors.
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The easiest policy with this file is to thank everyone who contributes
to the project, without judging the value of the contribution.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Unlike <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">AUTHORS</span></samp>, the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">THANKS</span></samp> file is not maintained for
legal reasons. It is maintained to thank all the contributors that
helped you out in your project. The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">AUTHORS</span></samp> file can not be
used for this purpose because certain contributions, like bug reports
or ideas and suggestions do not require legal paper exchanges.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">You can also decide to send some kind of special greeting when you
initially add a name to your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">THANKS</span></samp> file. The mere presence
of a name in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">THANKS</span></samp> is then a flag to you that the initial
greeting has been sent. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">The NEWS file:</strong>
List the major new features of this distribution and identify the
version that they pertain to. Don't discard items from previous
versions. Leave them in the file after the newer items, so that
a user upgrading from any previous version can see what is new. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">The ChangeLog file</strong>:
Use this file to record all the changes that you make to your source code. 
If your source code is distributed among many subdirectories, and there
is reason enough to think of the contents of the subdirectories as
different subpackages,then please maintain
a separate <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ChangeLog</span></samp> file for each subdirectory. For example,
although there is usually no need to maintain a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ChangeLog</span></samp> for
your documentation, if you do decide to maintain one anyway, it should be
separate from your sources <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ChangeLog</span></samp>.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">The <em style="font-size: 16px !important; line-height: 16.6667px !important;">GNU coding standards</em> explain in a lot of detail how you should
structure a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ChangeLog</span></samp>, so you should read about it there. 
The basic idea is to record <em style="font-size: 16px !important; line-height: 16.6667px !important;">semi-permanant modifications</em> you make to
your source code. It is not necessary to continuously record changes
that you make while you are experimenting with something. But once you
decide that you got a modification worked out, then you should record
Please do record version releases on the central <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ChangeLog</span></samp>
(see <a href="#Handling-version-numbers" style="font-size: 16px !important; line-height: 16.6667px !important;">Handling version numbers</a>). 
This way, it will be possible to tell what changes happened between
versions.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">You can automate <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ChangeLog</span></samp> maintenance with emacs. 
See <a href="#Navigating-source-code" style="font-size: 16px !important; line-height: 16.6667px !important;">Navigating source code</a>, for more details. 
Recently versions of Emacs use
the ISO 8601 standard for dates which is: <code style="font-size: 12px !important; line-height: 14.1667px !important;">YYYY-MM-DD</code> (year-month-date). 
A typical <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ChangeLog</span></samp> entry looks like this:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          1998-05-17  Eleftherios Gkioulekas  &lt;lf@amath.washington.edu&gt;
          
           * src/acmkdir.sh: Now acmkdir will put better default content
             to the files README, NEWS, AUTHORS, THANKS
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Every entry contains all the changes you made within the period of a day. 
The most recent changes
are listed at the top, the older changes slowly scroll to the bottom. 
Changes are sorted together in groups, per day of work. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">COPYING</strong>
This file contains the copyright permissions for your distribution,
in particular the General Public License
(see <a href="#Licensing-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Licensing Free Software</a>). 
This file is generated automatically
for you by Automake. However, it requires that you insert copyright headers
in your source code that refer to this file. 
See <a href="#Applying-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">Applying the GPL</a>, for more details.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">Copyright is one of the many
legal concerns that you need to be aware of if you develop free software. 
See <a href="#Legal-issues-with-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Legal issues with Free Software</a>, for more details. 
The philosophy of the GNU project, that software should be free, is
very important to the future of our community. 
See <a href="#Philosophical-issues" style="font-size: 16px !important; line-height: 16.6667px !important;">Philosophical issues</a>, to read Richard Stallman's essays on this topic. 
</p></li></ul>

<!-- ============================================================ -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Organizing-your-project-in-subdirectories" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Applying-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">Applying the GPL</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Maintaining-the-documentation-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining the documentation files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">5.7 Organizing your project in subdirectories</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">If your program is very small, you can place all your files in the
top-level directory, like we did in the Hello World example
(see <a href="#Hello-world-example-with-Autoconf-and-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello world example with Autoconf and Automake</a>). 
Such packages are called <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">shallow</dfn>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In general, it is preferred to organize your package as a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">deep package</dfn>. 
In a deep package, the documentation files
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     README, INSTALL, AUTHORS, THANKS, ChangeLog, COPYING
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">as well as the build cruft are placed at the top-level directory, and
the rest of the files are placed in subdirectories. It is standard
practice to use the following subdirectories:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">src</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The actual source code that gets compiled. Every library
should have its own subdirectory. Executables should get their own
directory as well. If each executable corresponds only to one or two files
then it is sensible to put them all under the same directory. If your
executables need more source files, or they can be separated in distinct
classes of functionalities you may like to regroup them under multiple
directories. Feel free to use your judgment on how to do this best. 
It is easiest to place the library test suites on the same directory with
the library source code. If that does not sit well with you however, you
should put the test suite for each library in subdirectories <em style="font-size: 16px !important; line-height: 16.6667px !important;">under</em> that
library's directory. It is a massively bad idea to put the test suites
for different libraries under the same directory. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">lib</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">An optional directory where you put portability-related source code. 
This is mainly replacement implementation for system calls that
are unavailable on some systems. You can also put tools here that you commonly
use across many different packages, tools that are too simple to just
make libraries out of every one of them. Common files encountered here
are files that replace system calls to the GNU C library that are not
available in proprietary C libraries. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">doc</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">A directory containing the documentation for your package. 
You have the creative freedom to present the documentation in any way that is
effective. However
the preferred way to document software is by using Texinfo. Texinfo has the
advantage that you can produce both on-line help as well as nice printed
books from the same source. Documentation is discussed in more detail
in See <a href="#Maintaining-Documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining Documentation</a>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">m4</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">A directory containing ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">m4</span></samp>¡¯ files that you package may need to
<em style="font-size: 16px !important; line-height: 16.6667px !important;">install</em>. 
These files define new ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</span></samp>¡¯ macros that you
should make available to other developers who want to use your libraries. 
This is discussed in more detail in <strong style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: cross reference</strong>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">intl</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">A directory containing boilerplate portability source code that allows
your program to speak in many human languages. The contents of this
directory are automatically maintained by ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gettext</span></samp>¡¯. 
(<strong style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: cross reference</strong>)
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">po</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">A directory containing message catalogs for your software package. 
This is where the maintainer places the translations of per software
in multiple human languages. 
(<strong style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: cross reference</strong>)
</dd></dl>
   Automake makes it very easy to maintain multidirectory source code
packages, so you shouldn't shy away from taking advantage of it. 
Multidirectory packages are more convenient for most projects. 
<!-- ============================================================ -->

<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Applying-the-GPL" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Handling-version-numbers" style="font-size: 16px !important; line-height: 16.6667px !important;">Handling version numbers</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Organizing-your-project-in-subdirectories" style="font-size: 16px !important; line-height: 16.6667px !important;">Organizing your project in subdirectories</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">5.8 Applying the GPL</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">The General Public License (GPL) is the legal implementation of the idea that
the program, to which it is applied, belongs to the public. It means that
the public is free to use it, free to modify it and redistribute it. 
And it also means that no-one can steal it from the public and use it
to create a derived work that is not free. This is different from
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">public domain</dfn>, where anyone can take a work, make a few changes,
slap a copyright notice on it, and forbid the public to use the resulting
work without a proprietary license. The idea, that a work is owned by the
public in this sense, is often called <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">copyleft</dfn>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Unfortunately our legal system does not recognize this idea properly. 
Every work must have an <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">owner</dfn>, and that person or entity is the
only one that can enforce per copyright. As a result, when a work is
distributed under the GPL, with the spirit that it belongs to the public,
only the nominal ¡°owner¡± has the right to sue hoarders that use
the work to create proprietary products. Unfortunately, the law does not
extend that right to the public. Despite this shortcoming, the GPL
has proven to be a very effective way to distribute free software. 
Almost all of the components of the GNU system are distributed under the
GPL.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To apply the GPL to your programs you need to do the following things:
     </p><ol start="1" style="font-size: 16px !important; line-height: 16.6667px !important;" type="1">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">Attach a copy of the GNU general public license to the toplevel directory of
your
source code in a file called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">COPYING</span></samp>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Include a legal notice to <em style="font-size: 16px !important; line-height: 16.6667px !important;">every</em> file that you want covered by the GPL,
saying that it is covered by the GPL. It is important that all files that
constitute source code must include this notice, including <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>,
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> files and shell scripts. 
The legal notice should look like this:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          Copyright (C) (years) (Your Name) &lt;your@email.address&gt;
          
          This program is free software; you can redistribute it and/or
          modify it under the terms of the GNU General Public License
          as published by the Free Software Foundation; either
          version 2 of the License, or (at your option) any later
          version.
          
          This program is distributed in the hope that it will be useful,
          but WITHOUT ANY WARRANTY; without even the implied warranty of
          MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
          GNU General Public License for more details.
          
          You should have received a copy of the GNU General Public License
          along with this program; if not, write to the Free Software
          Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">If you have assigned your copyright to an organization, like the Free
Software Foundation, then you should probably fashion your copyright
notice like this:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          Copyright (C) (years) Free Software Foundation
          (your name) &lt;your@email.address&gt; (initial year)
          etc...
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This legal notice works like a subroutine. By invoking it, you invoke the
full text of the GNU General Public License which is too lengthy to include
in every source file. Where you see ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">(years)</span></samp>¡¯ you need to list all the
years in which you finished preparing a version that was actually released,
and which was an ancestor to the current version. This list is
<em style="font-size: 16px !important; line-height: 16.6667px !important;">not</em> the list of years in which versions were released. It is a list
of years in which versions, later released, were completed. If you finish
a version on Dec 31, 1997 and release it on Jan 1, 1998, you need to
include 1997, but you do not need to include 1998. This rule is complicated,
but it is dictated by international copyright law.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Some developers don't like inserting a proper legal notice to every file
in their source code, because they don't want to do the typing. 
However, it is not sufficient to just say something like
¡°this file is GPLed¡±. You have to make
an unambiguous and exact statement, and you have to include the entire
boilerplate text to do that. Fortunately, you can save typing by
having Emacs insert copyright notices for you. 
See <a href="#Inserting-copyright-notices-with-Emacs" style="font-size: 16px !important; line-height: 16.6667px !important;">Inserting copyright notices with Emacs</a>, for more details. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Use the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">AUTHORS</span></samp> file to keep records of who wrote what. 
See <a href="#Maintaining-the-documentation-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining the documentation files</a>, for details. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If you modify someone else's GPL covered file make sure to comply with
section 2 of the GPL. To do that place notices stating that you changed
the file and the date of the change. Also your program should advertise the
fact that it is free software, that there is no warranty and that it can
be redistributed under the condition of the GPL. A standard way of doing
this is to make your program output this notice when it is passed the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">--version</code> command-line flag. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Finally, help others to use and improve your program by writing documentation. 
A free software project is not truly complete without documentation. 
To make it possible for your users to update the documentation to reflect
the changes that they make, it is necessary to make the documentation free
too. However, the issues for writings are different from the issues for
software. See <a href="#Why-free-software-needs-free-documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Why free software needs free documentation</a>, for a
discussion of these issues. See <a href="#Maintaining-Documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining Documentation</a>, for the
technical details on how to write documentation for your programs.
        </li></ol>

<!-- ============================================================ -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Handling-version-numbers" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Hello-world-with-acmkdir" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello world with acmkdir</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Applying-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">Applying the GPL</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">5.9 Handling version numbers</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">The number ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">0.1</span></samp>¡¯ in the filename <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello-0.1.tar.gz</span></samp> is called
the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">version number</dfn> of the source code distribution. The purpose
of version numbers is to label the various releases of a source code
distribution so that its development can be tracked. If you use the
GNU build system, then the name of the package and the version number
are specified in the line that invokes the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">AM_INIT_AUTOMAKE</span></samp>¡¯ macro. 
In the hello world example
(see <a href="#Hello-world-example-with-Autoconf-and-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello world example with Autoconf and Automake</a>)
we used the following line to set the version number equal to 0.1:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     AM_INIT_AUTOMAKE(hello,0.1)
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Whenever you publish a new version of your program, you must increase the
version number. We also recommend that you note on <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ChangeLog</span></samp>
the release of the new version. This way, when someone inspects your
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ChangeLog</span></samp>, person will be able to determine what changes happened
between any two specific versions.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To release the current version of your source code, run
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % make distcheck
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">to build the distribution and apply the test suite to validate it. 
Once you get this to work, change your version number in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>,
record an entry in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ChangeLog</span></samp> saying that you are cutting the new
version, and update the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">NEWS</span></samp> file. Without making any other changes,
do
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % make dist
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">to rebuild the distribution without having to wait for the test suite
to run all over again.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Most packages declare their version with two integers: a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">major number</dfn>
and a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">minor number</dfn> that are separated by a dot in the middle. In
our example above, the major number is 0 and the minor number is 1. The
minor number should be increased when you release a version that contains
new features and improvements over the old version that you want your
users to upgrade to. The major number should be increased when the incremental
improvements bring your program into a new level of maturity and stability. 
A major number of 0 indicates that your software is still experimental
and not ready for prime time. When you release version 1.0, you are telling
people that your software has developed to the point that you recommend it
for general use. Releasing version 2.0 means that your software has
significantly <em style="font-size: 16px !important; line-height: 16.6667px !important;">matured</em> from user feedback.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Before releasing a new major version, it is a good idea to publish a
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">prerelease</dfn> to your beta-testers. In general, the prerelease
for version 1.0 is labeled 0.90 regardless of what the previous minor number
was. 
<a rel="footnote" href="#fn-8" name="fnd-8" style="font-size: 16px !important; line-height: 16.6667px !important;"><sup style="font-size: 13.3333px !important; line-height: 15px !important;">8</sup></a>
When releasing a 0.90 version, development should freeze, and you
should only be fixing bugs. If the prerelease turns out to be stable, it
becomes the stable version. If not, you may need to release further bug-fixing
prereleases: 0.91, 0.92, etc.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Many maintainers like to publish working versions of their code, so that
contributors can donate code against the most recent version of the
source code. These unofficial versions should only be used by people who
are interested in contributing to the project, and not by end users. 
It is useful to use a third integer for writing the version numbers for
these ¡°unofficial¡± releases. Please use only two integers for official
releases so that it is easy to distinguish them from unofficial releases. 
A possible succession of version numbers might look like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     0.1, 0.1.1, 0.1.2, ... , 0.2, ..., 0.3, ..., 0.90, ..., 1.0
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">It is always a good idea to maintain an archive of at least all the official
releases that you ever publish.

<!-- ============================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Hello-world-with-acmkdir" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Handling-version-numbers" style="font-size: 16px !important; line-height: 16.6667px !important;">Handling version numbers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#The-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">5.10 Hello world with acmkdir</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Whenever you start out a new programming project, there is quite a bit
of overhead setup that you need to do in order to use the GNU build system. 
You need to install the documentation files described in
<a href="#Maintaining-the-documentation-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining the documentation files</a>, and set up the directory structure
described in <a href="#Organizing-your-project-in-subdirectories" style="font-size: 16px !important; line-height: 16.6667px !important;">Organizing your project in subdirectories</a>. In the quest
for never-ending automation, you can do these tasks automatically with
the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ utility.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Start by typing the following command on the shell:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % acmkdir hello
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ will ask you to enter the name of your program, your name
and your email address. When you are done, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ will ask you
if you really want to go for it. Say ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">y</span></samp>¡¯. Then, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ will
do the following routine work for you:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">Create the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello-0.1</span></samp> directory and the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">doc</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">m4</span></samp>
and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src</span></samp> subdirectories. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Generate the following <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_INIT
          AM_CONFIG_HEADER(config.h)
          AM_INIT_AUTOMAKE(test,0.1)
          AC_PROG_CC
          AC_PROG_CXX
          AC_PROG_RANLIB
          AC_OUTPUT(Makefile doc/Makefile m4/Makefile src/Makefile)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">By default, both the C and C++ compilers are initialized, but you can take
out ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">AC_PROG_CXX</span></samp>¡¯ if you don't plan to use C++. You can edit and
customize this file to your needs. More specifically, you will need to
update the version number in ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">AM_INIT_AUTOMAKE</span></samp>¡¯
every time you cut a new distribution (see <a href="#Handling-version-numbers" style="font-size: 16px !important; line-height: 16.6667px !important;">Handling version numbers</a>). 
You should also make sure to list all the subdirectories that have
a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> in ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">AC_OUTPUT</span></samp>¡¯. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Place boilerplate <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> files on the toplevel directory as well
as the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">doc</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">m4</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src</span></samp> subdirectories. The toplevel
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> contains:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          EXTRA_DIST = reconf configure
          SUBDIRS = m4 doc src
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The ones in the <code style="font-size: 12px !important; line-height: 14.1667px !important;">src</code> and <code style="font-size: 12px !important; line-height: 14.1667px !important;">doc</code> subdirectories are empty. The
one in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">m4</span></samp> contains a template <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> which you should
edit if you want to add new Autoconf macros. 
(<em style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: Crossreference</em>)
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Create the files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">COPYING</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">INSTALL</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">AUTHORS</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">NEWS</span></samp>,
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">README</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">THANKS</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ChangeLog</span></samp> and generate their
default contents which you should edit further as you develop your
package. (see <a href="#Maintaining-the-documentation-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining the documentation files</a>)
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Create a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">reconf</span></samp> script for reconfiguring your package every time
you make a change in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>. Running <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">reconf</span></samp> is
equivalent to running the following commands on the shell from the
top-level directory:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % rm -f config.cache
          % rm -f acconfig.h
          % aclocal -I m4
          % autoconf
          % acconfig
          % autoheader
          % automake -a
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Before ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ exits, it will call the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">reconf</span></samp>¡¯ script for
you once to set things up. 
</p></li></ul>
   At this point, you can run
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % ./configure
     % make
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">but nothing interesting will happen because the package is still empty.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To add a simple hello world program, all you need to do is create the
following two files:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src/Makefile.am</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          bin_PROGRAMS = hello
          hello_SOURCES = hello.c
</pre>
     <p class="noindent" style="font-size: 16px !important;"><br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src/hello.c</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #if HAVE_CONFIG_H
          # include &lt;config.h&gt;
          #endif
          #include &lt;stdio.h&gt;
          
          int
          main ()
          {
            printf ("Hello world\n");
          }
</pre>
     </dd></dl>
   and type the following commands from the toplevel directory:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % ./reconf
     % ./configure
     % make
     % make distcheck
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">to compile the hello world program and build a distribution. It's that
simple!

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In general, to develop simple programs with the GNU build system you
setup the project directory tree with ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯, you write your
source code, you put together the necessary <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> and
update <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> and you are set to go. In fact, at this
point you practically know all you need to know to develop source code
distributions that compile and install simple C programs. All you
need to do is write the source code and list the source files in
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">*_SOURCES</span></samp>¡¯.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In the following chapters we will explain in more detail how to
use the GNU build system to develop software that conforms to the
GNU coding standards.

<!-- Copyright (C) 1998 Eleftherios Gkioulekas <lf@amath.washington.edu> -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
<!-- ============================================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Using-Automake-and-Autoconf" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Using-Libtool" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Libtool</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#The-GNU-build-system" style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU build system</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="chapter" style="font-size: 24px !important; line-height: 25px !important;">6 Using Automake and Autoconf</h2>

<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="1" href="#Hello-World-revisited" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello World revisited</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="2" href="#OLD-Using-configuration-headers" style="font-size: 16px !important; line-height: 16.6667px !important;">OLD Using configuration headers</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="3" href="#The-building-process" style="font-size: 16px !important; line-height: 16.6667px !important;">The building process</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="4" href="#Some-general-advice" style="font-size: 16px !important; line-height: 16.6667px !important;">Some general advice</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="5" href="#Standard-organization-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Standard organization with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="6" href="#Programs-and-Libraries-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Programs and Libraries with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="7" href="#General-Automake-principles" style="font-size: 16px !important; line-height: 16.6667px !important;">General Automake principles</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="8" href="#Simple-Automake-examples" style="font-size: 16px !important; line-height: 16.6667px !important;">Simple Automake examples</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="9" href="#Libraries-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Libraries with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Dealing-with-built-sources" style="font-size: 16px !important; line-height: 16.6667px !important;">Dealing with built sources</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Embedded-text-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Embedded text with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Installation-standard-directories" style="font-size: 16px !important; line-height: 16.6667px !important;">Installation standard directories</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Scripts-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Scripts with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Emacs-Lisp-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs Lisp with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Guile-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Guile with Automake</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="#Data-files-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Data files with Automake</a>
</li></ul>

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Hello-World-revisited" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#OLD-Using-configuration-headers" style="font-size: 16px !important; line-height: 16.6667px !important;">OLD Using configuration headers</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">6.1 Hello World revisited</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">To begin, let's review the simplest example, the hello world program:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello.c</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #include &lt;stdio.h&gt;
          main()
          {
           printf("Howdy, world!\n");
          }
</pre>
     <p class="noindent" style="font-size: 16px !important;"><br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          bin_PROGRAMS = hello
          hello_SOURCES = hello.c
</pre>
     <p class="noindent" style="font-size: 16px !important;"><br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_INIT([Hello Program], [1.0],
                  [Author Of The Program &lt;aotp@zxcv.com&gt;],
                  [hello])
          AM_INIT_AUTOMAKE
          AC_PROG_CC
          AC_PROG_INSTALL
          AC_CONFIG_FILES([Makefile])
          AC_OUTPUT
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></dd></dl>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">The language of <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> is a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">logic language</dfn>. There is no
explicit statement of execution. Only a statement of relations from which
execution is inferred. On the other hand, the language of <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp>
is <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">procedural</dfn>. Each line of <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp> is a command that
is executed.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Seen in this light, here's what the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp> commands shown do:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">The <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_INIT</code> command initializes the configure script. Its arguments
are the name of the package, the version number of the package, the name of
 the author of the program and his e-mail, and the name of the tar-file,
if it is different from the first argument. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The <code style="font-size: 12px !important; line-height: 14.1667px !important;">AM_INIT_AUTOMAKE</code> performs some further initializations that are
related to the fact that we are using ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp>¡¯. If you are writing
your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp> by hand, then you don't need to call this command. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_PROG_CC</code> checks to see which C compiler you have. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_PROG_INSTALL</code> checks to see whether your system has a BSD
compatible install utility. If not then it uses <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">install-sh</span></samp> which
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp> will install at the root of your package directory if it's
not there yet. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_CONFIG_FILES</code> tells configure which files must be generated
from templates. In this case, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp> will be generated from the
template <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp>. Remember that if we use ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp>¡¯,
the file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp> is generated from <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>. But
other files could have been specified in the parameter of this macro. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_OUTPUT</code> tells the configure script to generate the files
specified in the list of <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_CONFIG_FILES</code> from their templates
(the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">*.in</span></samp> files). 
</li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> is more obvious. The first line specifies the name
of the program we are building. The second line specifies the source files
that compose the program.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">For now, as far as <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp> is concerned you need to know the
following additional facts:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">If you are building a library, then your configure script must determine
how to handle ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">ranlib</span></samp>¡¯. To do that, add the <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_PROG_RANLIB</code>
command. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If you want to have your makefiles call recursively makefiles at subdirectories
then the configure script needs to be told to find out how to do that. 
For this purpose you add the <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_PROG_MAKE_SET</code> command. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If you have any makefiles in subdirectories you must also put them in the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_CONFIG_FILES</code> statement like this:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_CONFIG_FILES([
                  Makefile
                  dir1/Makefile
                  dir2/Makefile])
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Do not put the ending parenthesis in another line, separated from the ending
bracket, this will cause a misbehaviour of the macro. 
</p></li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">As we explained before to build this package you need to execute the following
commands:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % aclocal
     % autoconf
     % touch README AUTHORS NEWS ChangeLog
     % automake -a
     configure.ac: installing `./install-sh'
     configure.ac: installing `./mkinstalldirs'
     configure.ac: installing `./missing'
     Makefile.am: installing `./INSTALL'
     Makefile.am: installing `./COPYING'
     Makefile.am: installing `./depcomp'
     % ./configure
     checking for a BSD-compatible install... /usr/bin/install -c
     checking whether build environment is sane... yes
     checking for gawk... gawk
     checking whether make sets $(MAKE)... yes
     checking for gcc... gcc
     checking for C compiler default output... a.out
     checking whether the C compiler works... yes
     checking whether we are cross compiling... no
     checking for suffix of executables...
     checking for suffix of object files... o
     checking whether we are using the GNU C compiler... yes
     checking whether gcc accepts -g... yes
     checking for gcc option to accept ANSI C... none needed
     checking for style of include used by make... GNU
     checking dependency style of gcc... gcc3
     checking for a BSD-compatible install... /usr/bin/install -c
     configure: creating ./config.status
     config.status: creating Makefile
     config.status: executing depfiles commands
     % make
     source='hello.c' object='hello.o' libtool=no \
     depfile='.deps/hello.Po' tmpdepfile='.deps/hello.TPo' \
     depmode=gcc3 /bin/sh ./depcomp \
     gcc -DPACKAGE_NAME=\"Hello\ Program\" -DPACKAGE_TARNAME=\"hello\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"Hello\ Program\ 1.0\" -DPACKAGE_BUGREPORT=\"Author\ Of\ The\ Program\ \&lt;aotp@zxcv.com\&gt;\" -DPACKAGE=\"hello\" -DVERSION=\"1.0\"  -I. -I.     -g -O2 -c `test -f 'hello.c' || echo './'`hello.c
     gcc  -g -O2   -o hello  hello.o
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The first four commands, are for the maintainer only. When the user unpacks
a distribution, he should be able to start from ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>¡¯ and move on.
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">aclocal</span></samp>¡¯ command installs a file called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">aclocal.m4</span></samp>. Normally,
in that file you are supposed to place the definitions of any ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</span></samp>¡¯
macros that you've written that happen to be in use in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp>. 
We will teach you how to write ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</span></samp>¡¯ macros later. 
The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp>¡¯ utility uses the <code style="font-size: 12px !important; line-height: 14.1667px !important;">AM_INIT_AUTOMAKE</code> macro which is
not part of the standard ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</span></samp>¡¯ macros. For this reason, its
definition needs to be placed in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">aclocal.m4</span></samp>. If you call ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">aclocal</span></samp>¡¯
with no arguments then it will generate the appropriate <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">aclocal.m4</span></samp> file. 
Later we will show you how to use ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">aclocal</span></samp>¡¯ to also install your
own ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</span></samp>¡¯ macros. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</span></samp>¡¯ command combines the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">aclocal.m4</span></samp> and
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp> files and produces the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> script. 
And now we are in business. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">touch</span></samp>¡¯ command makes the files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">README</span></samp> and friends exist. 
It is important that these files exist before calling Automake, because
Automake decides whether to include them in a distribution by checking
if they exist at the time that you invoke ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp>¡¯. Automake
<em style="font-size: 16px !important; line-height: 16.6667px !important;">must</em> decide to include these files, because when you type
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make distcheck</span></samp>¡¯ the presence of these files will be required. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp>¡¯ command compiles a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp> file from
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> and if absent it installs various files that are required
either by the GNU coding standards or by the makefile that will be generated. 
</li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">If you are curious you can take a look at the generated <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp>. 
It looks like gorilla spit but it will give you an idea of how one gets
there from the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>¡¯ script is an information gatherer. It finds out things
about your system. That information is given to you in two ways. One way
is through defining C preprocessor macros that you can test for directly
in your source code with preprocessor directives. This is done by passing
<code style="font-size: 12px !important; line-height: 14.1667px !important;">-D</code> flags to the compiler. The other way is by making certain
variables defined at the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> level. This way you can, for
example, have the configure script find out how a certain library is linked,
export it as a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> variable and use that variable in your
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>. Also, through certain special variables, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>
can control how the compiler is invoked by the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</span></samp>.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="OLD-Using-configuration-headers" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#The-building-process" style="font-size: 16px !important; line-height: 16.6667px !important;">The building process</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Hello-World-revisited" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello World revisited</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">6.2 OLD Using configuration headers</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Notice: This section is somewhat obsolete. The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig</span></samp>¡¯ program
distributed with Autotoolset is no longer needed, because the file
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</span></samp> is no longer used by Autoconf/Automake. This section is
kept here only for historical reasons and may soon be removed or rewritten. 
Nevertheless, the description of the behaviour of ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoheader</span></samp>¡¯ has been
updated and is correct. That said...

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">As you may have noticed, the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>¡¯ script in the previous example
defines two preprocessor macros that you can use in your code:
<code style="font-size: 12px !important; line-height: 14.1667px !important;">PACKAGE</code> and <code style="font-size: 12px !important; line-height: 14.1667px !important;">VERSION</code>. As you become a power-user of
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</span></samp>¡¯ you will get to define even more such macros. If you inspect
the output of ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ during compilation, you will see that these macros
get defined by passing ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-D</span></samp>¡¯ flags to the compiler, one for each macro. 
When there is too many of these flags getting passed around, this can cause
two problems: it can make the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ output hard to
read, and more importantly it can hit the buffer limits of various braindead
implementations of ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯. To work around this problem, an alternative
approach is to define all these macros in a special header file and include
it in all the sources.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">A hello world program using this technique looks like this
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_INIT([Hello Program],
                  [1.0], [Author Of The Program &lt;aotp@zxcv.com&gt;],
                  [hello])
          AM_CONFIG_HEADER(config.h)
          AM_INIT_AUTOMAKE
          AC_PROG_CC
          AC_PROG_INSTALL
          AC_CONFIG_FILES([Makefile])
          AC_OUTPUT
</pre>
     <p class="noindent" style="font-size: 16px !important;"><br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          bin_PROGRAMS = hello
          hello_SOURCES = hello.c
</pre>
     <p class="noindent" style="font-size: 16px !important;"><br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello.c</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #ifdef HAVE_CONFIG_H
          #include &lt;config.h&gt;
          #endif
          
          #include &lt;stdio.h&gt;
          main()
          {
           printf("Howdy, partner!\n");
          }
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></dd></dl>
   Note that we call a new macro in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp>:
<code style="font-size: 12px !important; line-height: 14.1667px !important;">AM_CONFIG_HEADER</code>. Also we include the configuration file conditionally
with the following three lines:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #ifdef HAVE_CONFIG_H
     #include &lt;config.h&gt;
     #endif
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">It is important to make sure that the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</span></samp> file is the first thing
that gets included. Now do the usual routine:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % aclocal
     % autoconf
     % touch NEWS README AUTHORS ChangeLog
     % automake -a
     configure.ac: installing `./install-sh'
     configure.ac: installing `./mkinstalldirs'
     configure.ac: installing `./missing'
     Makefile.am: installing `./INSTALL'
     Makefile.am: installing `./COPYING'
     configure.ac:5: required file `./config.h.in' not found
     Makefile.am: installing `./depcomp'
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Automake will give you an error message saying that it needs a file called
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h.in</span></samp>¡¯. You can generate such a file with the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoheader</span></samp>¡¯
program. So run:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % autoheader
     % configure
     checking for a BSD-compatible install... /usr/bin/install -c
     checking whether build environment is sane... yes
     checking for gawk... gawk
     checking whether make sets $(MAKE)... yes
     checking for gcc... gcc
     checking for C compiler default output... a.out
     checking whether the C compiler works... yes
     checking whether we are cross compiling... no
     checking for suffix of executables...
     checking for suffix of object files... o
     checking whether we are using the GNU C compiler... yes
     checking whether gcc accepts -g... yes
     checking for gcc option to accept ANSI C... none needed
     checking for style of include used by make... GNU
     checking dependency style of gcc... gcc3
     checking for a BSD-compatible install... /usr/bin/install -c
     configure: creating ./config.status
     config.status: creating Makefile
     config.status: creating config.h
     config.status: executing depfiles commands
     % make
     make  all-am
     make[1]: Entering directory `/home/mroberto/programs/autotoolset/hello5'
     source='hello.c' object='hello.o' libtool=no \
     depfile='.deps/hello.Po' tmpdepfile='.deps/hello.TPo' \
     depmode=gcc3 /bin/sh ./depcomp \
     gcc -DHAVE_CONFIG_H -I. -I. -I.     -g -O2 -c `test -f 'hello.c' || echo './'`hello.c
     gcc  -g -O2   -o hello  hello.o
     make[1]: Leaving directory `/home/mroberto/programs/autotoolset/hello5'
</pre>
   <p style="font-size: 16px !important; line-height: 16.6667px !important;">In older versions of the <code style="font-size: 12px !important; line-height: 14.1667px !important;">automake/autoconf</code> package, you would get
error messages. The problem was that <code style="font-size: 12px !important; line-height: 14.1667px !important;">autoheader</code> was
bundled with the <code style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</code> distribution, not the <code style="font-size: 12px !important; line-height: 14.1667px !important;">automake</code>
distribution, and consequently didn't know how to deal with the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">PACKAGE</code> and <code style="font-size: 12px !important; line-height: 14.1667px !important;">VERSION</code> macros. This problem is now solved with the
use of the new syntax of the macro AC_INIT. But we choose to keep
this discussion here because (a) it is still useful and (b) someone may
be using the old syntax that was kept for compatibility or (c) you have old
versions of the <code style="font-size: 12px !important; line-height: 14.1667px !important;">automake/autoconf</code> packages.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Of course, if ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>¡¯ defines a macro, there's nothing to know. 
On the other hand, when a macro <em style="font-size: 16px !important; line-height: 16.6667px !important;">is not defined</em> then there are at least
two possible defaults:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #undef PACKAGE
     #define PACKAGE 0
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The <code style="font-size: 12px !important; line-height: 14.1667px !important;">autoheader</code> program here used to complain that it didn't know the
defaults for the <code style="font-size: 12px !important; line-height: 14.1667px !important;">PACKAGE</code> and <code style="font-size: 12px !important; line-height: 14.1667px !important;">VERSION</code> macros. 
To provide the defaults, we would create a new file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</span></samp>:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #undef PACKAGE
          #undef VERSION
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></dd></dl>
   and run ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoheader</span></samp>¡¯ again:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % autoheader
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">At this point you would run <code style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</code> again, so that it took into account
the presence of <code style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</code>:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % aclocal
     % autoconf
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Now you would go ahead and build the program:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % configure
     % make
     Computing dependencies for hello.c...
     echo &gt; .deps/.P
     gcc -DHAVE_CONFIG_H -I. -I. -I.   -g -O2 -c hello.c
     gcc -g -O2  -o hello  hello.o
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Note that now instead of multiple <code style="font-size: 12px !important; line-height: 14.1667px !important;">-D</code> flags, there is only one
such flag passed: <code style="font-size: 12px !important; line-height: 14.1667px !important;">-DHAVE_CONFIG_H</code>. Also, appropriate <code style="font-size: 12px !important; line-height: 14.1667px !important;">-I</code>
flags are passed to make sure that <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello.c</span></samp> can find and include
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</span></samp>. 
To test the distribution, type:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % make distcheck
     ......
     ========================
     hello-1.0.tar.gz is ready for distribution
     ========================
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and it should all work out.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</span></samp> files go a long way back in history. In the past, there
used to be packages where you would have to manually edit <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</span></samp>
files and adjust the macros you wanted defined by hand. This made these
packages very difficult to install because they required intimate knowledge
of your operating system. For example, it was not unusual to see a comment
saying <em style="font-size: 16px !important; line-height: 16.6667px !important;">¡°if your system has a broken vfork, then define this macro¡±</em>. 
How the hell are you supposed to know if your systems <code style="font-size: 12px !important; line-height: 14.1667px !important;">vfork</code> is
broken?? With auto-configuring packages all of these details are taken
care of automatically, shifting the burden from the user to the developer
where it belongs.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Note: the use of the file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</span></samp> is deprecated, but the discussion
is kept here for the reasons explained above.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Normally in the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</span></samp> file you would put statements like
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #undef MACRO
     #define MACRO default
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">These values were copied over to <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h.in</span></samp> and are supplemented with
additional defaults for C preprocessor macros that got defined by
native <code style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</code> macros like
<code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_CHECK_HEADERS</code>, <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_CHECK_FUNCS</code>, <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_CHECK_SIZEOF</code>,
<code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_CHECK_LIB</code>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If the file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</span></samp> contained the string <code style="font-size: 12px !important; line-height: 14.1667px !important;">@TOP@</code> then all
the lines before the string would be included verbatim to <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</span></samp>
<em style="font-size: 16px !important; line-height: 16.6667px !important;">before</em> the custom definitions. Also, if the file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</span></samp>
contained the string <code style="font-size: 12px !important; line-height: 14.1667px !important;">@BOTTOM@</code> then all the lines after the string would
be included verbatim to <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</span></samp> <em style="font-size: 16px !important; line-height: 16.6667px !important;">after</em> the custom definitions. 
This allowed you to include further preprocessor directives that are related
to configuration. Some of these directives may be using the custom definitions
to conditionally issue further preprocessor directives. Due to a bug in
some versions of <code style="font-size: 12px !important; line-height: 14.1667px !important;">autoheader</code> if the strings <code style="font-size: 12px !important; line-height: 14.1667px !important;">@TOP@</code> and
<code style="font-size: 12px !important; line-height: 14.1667px !important;">@BOTTOM@</code> do appear in your <code style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</code> file, then you must
make sure that there is at least one line appearing before
<code style="font-size: 12px !important; line-height: 14.1667px !important;">@TOP@</code> and one line after <code style="font-size: 12px !important; line-height: 14.1667px !important;">@BOTTOM@</code>, even if it has to be
a comment. Otherwise, <code style="font-size: 12px !important; line-height: 14.1667px !important;">autoheader</code> may not work correctly.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">With ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autotoolset</span></samp>¡¯ we distribute a utility called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig</span></samp> which
will build <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</span></samp> automatically. By default it will always
make sure that
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #undef PACKAGE
     #undef VERSION
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">are there. Additionally, if you install macros that are <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig</span></samp> friendly
then ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig</span></samp>¡¯ will also install entries for these macros. 
The <code style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig</code> program may be revised in the future and perhaps
it might be eliminated (note: indeed...). There is an unofficial patch to
Autoconf that will automate the maintenance of <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</span></samp>, eliminating
the need for a separate program. I am not yet certain if that patch will be
part of the official next version of Autoconf, but I very much expect it
to (note: I think it has been included). Until then, if you are interested, see:
<code style="font-size: 12px !important; line-height: 14.1667px !important;">http://www.clark.net/pub/dickey/autoconf/autoconf.html</code>
This situation creates a bit of a dilemma about whether I should
document and encourage <code style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig</code> in this tutorial or not. 
I believe that the Autoconf patch is a superior solution. However since
I am not the one maintaining Autoconf, my hands are tied. For now
let's say that if you confine yourself to using only the macros provided
by <code style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</code>, <code style="font-size: 12px !important; line-height: 14.1667px !important;">automake</code>, and <code style="font-size: 12px !important; line-height: 14.1667px !important;">autotoolset</code> then
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</span></samp> will be completely taken care for you by <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig</span></samp>. 
In the future, I hope that <code style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</code> will be generated
by <code style="font-size: 12px !important; line-height: 14.1667px !important;">configure</code> and be the sole responsibility of Autoconf.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">You may be wondering whether it is worth using <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</span></samp> files in the
programs you develop if there aren't all that many macros being defined. 
My personal recommendation is <em style="font-size: 16px !important; line-height: 16.6667px !important;">yes</em>. Use <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</span></samp> files because
perhaps in the future your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> might need to define even more
macros. So get started on the right foot from the beginning. Also, it is
nice to just have a <code style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</code> file lying around because you can have
all your configuration specific C preprocessor directives in one place. 
In fact, if you are one of these people writing peculiar system software
where you get to <code style="font-size: 12px !important; line-height: 14.1667px !important;">#include</code> 20 header files on every single source file
you write, you can just have them on all thrown into <code style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</code> once
and for all. 
In the next chapter we will tell you about the <code style="font-size: 12px !important; line-height: 14.1667px !important;">LF</code> macros that get
distributed with <code style="font-size: 12px !important; line-height: 14.1667px !important;">autotoolset</code> and this tutorial. These macros do require
you to use the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</span></samp> file. The bottom line is: <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</span></samp>
is your friend; trust the <code style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</code>.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="The-building-process" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Some-general-advice" style="font-size: 16px !important; line-height: 16.6667px !important;">Some general advice</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#OLD-Using-configuration-headers" style="font-size: 16px !important; line-height: 16.6667px !important;">OLD Using configuration headers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">6.3 The building process</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: <em style="font-size: 16px !important; line-height: 16.6667px !important;">write about VPATH builds and how to modify optimization</em>

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Some-general-advice" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Standard-organization-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Standard organization with Automake</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#The-building-process" style="font-size: 16px !important; line-height: 16.6667px !important;">The building process</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">6.4 Some general advice</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">In software engineering, people start from a precise, well-designed
specification and proceed to implementation. In research, the specification
is fluid and immaterial and the goal is to be able to solve a slightly
different problem every day. To have the flexibility to go from variation
to variation with the least amount of fuss is the name of the game. By fuss,
we refer to <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">debugging</dfn>,
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">testing</dfn> and <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">validation</dfn>. Once you have a code that you know gives
the right
answer to a specific set of problems, you want to be able to move on to a
different set of similar problems with reinventing, debugging and testing
as little as possible. These are the two distinct situations that computer
programmers get to confront in their lives.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Software engineers can take good care of themselves in both situations. 
It's part of their training. However, people whose specialty is the scientific
problem and not software engineering, must confront the hardest of the two
cases,
the second one, with very little training in software engineering. 
As a result they develop code that's clumsy in implementation, clumsy in usage,
and with only redeeming quality the fact that it gives the right answer. 
This way, they do get the work of the day done, but they leave behind them
no legacy to do the work of tomorrow. No general-purpose tools, no
documentation, no reusable code.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The key to better software engineering is to focus away from developing
monolithic applications that do only one job, and focus on developing
libraries. One way to think of libraries is as a
<em style="font-size: 16px !important; line-height: 16.6667px !important;">program with multiple entry points</em>. Every library you write becomes
a legacy that you can pass on to other developers. 
Just like in mathematics you develop
little theorems and use the little theorems to hide the complexity in
proving bigger theorems, in software engineering you develop libraries
to take care of low-level details once and for all so that they are
out of the way every time you make a different implementation for
a variation of the problem.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">On a higher level you still don't create just
one application. You create many little applications that work together. 
The centralized all-in-one approach in my experience is far less flexible
than the decentralized approach in which a set of applications work together
as a team to accomplish the goal. In fact this is the fundamental principle
behind the design of the Unix operating system. Of course, it is still
important to glue together the various components to do the job. This you
can do either with scripting or with actually building a suite of
specialized monolithic applications derived from the underlying tools.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The name of the game is like this:
Break down the program to parts. And the parts to smaller parts, until you
get down to simple subproblems that can be easily tested, and from which
you can construct variations of the original problem. Implement each one
of these as a library, write test code for each library and make sure that
the library works. It is very important for your library to have a complete
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">test suite</dfn>, a collection of programs that are supposed to run silently
and return normally (<code style="font-size: 12px !important; line-height: 14.1667px !important;">exit(0);</code>) if they execute successfully,
and return abnormally (<code style="font-size: 12px !important; line-height: 14.1667px !important;">assert(false); exit(1);</code>) if they fail. 
The purpose of the test suite is to detect bugs in the library, and to
convince you, the developer, that the library works. The best time to
write a test program is <em style="font-size: 16px !important; line-height: 16.6667px !important;">as soon as it is possible!</em> Don't be lazy. 
Don't just keep throwing in code after code after code. The minute there
is enough new code in there to put together some kind of test program,
<em style="font-size: 16px !important; line-height: 16.6667px !important;">just do it!</em> I can not emphasize that enough. When you write new code
you have the illusion that you are producing work, only to find out tomorrow
that you need an entire week to debug it. As a rule, internalize the reality
that you <em style="font-size: 16px !important; line-height: 16.6667px !important;">know</em> you have produced new work every time you write a working
test program for the new features, and <em style="font-size: 16px !important; line-height: 16.6667px !important;">not a minute before</em>. 
Another time when you should definitely write a test suite is when you
find a bug while ordinarily using the library. Then, before you even
fix the bug, write a test program that detects the bug. Then go fix it. 
This way, as you add new features to your libraries you have insurance that
they won't reawaken old bugs.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Please keep documentation up to date as you go. The best time to write
documentation
is right after you get a few new test programs working. You might feel that
you are too busy to write documentation, but the truth of the matter
is that you will <em style="font-size: 16px !important; line-height: 16.6667px !important;">always</em> be too busy. After long hours debugging
these segfaults, think of it as a celebration of triumph to fire up the
editor and document your brand-spanking new cool features.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Please make sure that
computational code is completely separated from I/O code so that someone
else can reuse your computational code without being forced to also follow
your I/O model. Then write <em style="font-size: 16px !important; line-height: 16.6667px !important;">programs</em> that invoke your collection
of libraries to solve various problems. By dividing and conquering the
problem library by library with a test suite for each step along the way,
you can write good and robust code. Also, if you are developing
numerical software, please don't expect that other users of your code will be
getting a high while entering data for your <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">input files</dfn>. Instead write
an interactive utility that will allow users to configure input files in
a user friendly way. Granted, this is too much work in Fortran. Then again,
you do know more powerful languages, don't you?

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Examples of useful libraries are
things like linear algebra libraries, general ODE solvers, interpolation
algorithms, and so on. 
As a result you end up with two packages. A package
of libraries complete with a test suite, and a package of applications that
invoke the libraries. 
The package of libraries is well-tested code that can be passed down to
future developers. It is code that won't have to be rewritten if it's
treated with respect. The package of applications is something that each
developer will probably rewrite since different people will probably want
to solve different problems. The effect of having a package of libraries
is that C++ is elevated to a <em style="font-size: 16px !important; line-height: 16.6667px !important;">Very High Level Language</em> that's closer
to the problems you are solving. 
In fact a good rule of thumb is to
<em style="font-size: 16px !important; line-height: 16.6667px !important;">make the libraries sufficiently sophisticated so that each executable that you produce can be expressed in </em><strong style="font-size: 16px !important; line-height: 16.6667px !important;">one</strong><em style="font-size: 16px !important; line-height: 16.6667px !important;"> source file.</em>
All this may sound like common sense, but you will be surprised at how many
scientific developers maintain just one does-everything-program that they
perpetually hack until it becomes impossible to maintain. And then you will
be even more surprised when you find that some professors don't understand
why a ¡°simple mathematical modification¡± of someone else's code is taking
you so long.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Every library must have its own directory and <code style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile</code>. So a library
package will have many subdirectories, each directory being one library. 
And perhaps if you have too many of them, you might want to group them
even further down. Then, there's the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">applications</dfn>. If you've done
everything right, there should be enough stuff in your libraries to enable
you to have one source file per application. Which means that all the source
files can probably go down under the same directory.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Very often you will
come to a situation where there's something that your libraries to-date
can't do, so you implement it and stick it along in your source file
for the application. If you find yourself cut and pasting that implementation
to other source files, then this means that you have to put this in a library
somewhere. And if it doesn't belong to any library you've written so far,
maybe to a new library. When you are in a deadline crunch, there's a
tendency not to do this since it's easier to cut and paste. The problem
is that if you don't take action right then, eventually your code will
degenerate to a hard-to-use mess. Keeping the entropy down is something
that must be done on a daily basis.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Finally, a word about the age-old issue of language-choice. The GNU coding
standards encourage you to program in C and avoid using languages other
than C, such as C++ or Fortran. The main advantage of C over C++ and
Fortran is that it produces object files that can be linked by any C
or C++ compiler. In contrast, C++ object files can only be linked by
the compiler that produced them. As for Fortran, aside from the fact that
Fortran 90 and 95 have no free compilers, it is not very trivial to mix
Fortran 77 with C/C++, so it makes no sense to invite all that trouble
without a compelling reason. Nevertheless, my suggestion is to code in C++. 
The main benefit you get with C++ is robustness. Having constructors
and destructors and references can go a long way towards helping you to
void memory errors, if you know how to make them work for you.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Standard-organization-with-Automake" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Programs-and-Libraries-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Programs and Libraries with Automake</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Some-general-advice" style="font-size: 16px !important; line-height: 16.6667px !important;">Some general advice</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">6.5 Standard organization with Automake</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Now we get into the gory details of software organization. I'll tell you one
way to do it. This is advice, not divine will. It's simply a way that works
well in general, and a way that works well with <code style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</code> and
<code style="font-size: 12px !important; line-height: 14.1667px !important;">automake</code> in particular.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The first principle is to maintain the package of libraries separate from
the package of applications. This is not an iron-clad rule. In software
engineering, where you have a crystal clear specification, it makes no
sense to keep these two separate. I found from experience that it makes
a lot more sense in research. 
Either of these two packages must have a toplevel directory under which
live all of its guts. Now what do the guts look like?

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">First of all you have the traditional set of information files that
we described in Chapter 1:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     README, AUTHORS, NEWS, ChangeLog, INSTALL, COPYING
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">You also have the following subdirectories:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">m4</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Here, you install any new ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">m4</span></samp>¡¯ files that your package may want
to install. These files define new ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</span></samp>¡¯ commands that you
may want to make available to other developers who want to use your
libraries. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">doc</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Here you put the documentation for your code. You have the creative freedom
to present the documentation in any way you desire. However, the preferred
way to document software is to use Texinfo. Texinfo has the advantage that
you can produce both on-line help as well as a nice printed book from the
same source. We will say something about Texinfo later. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">src</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Here's the source code. You could put it at the toplevel directory as
many developers do, but I find it more convenient to keep it away in
a subdirectory. Automake makes it trivially easy to do recursive
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯, so there is no reason not to take advantage of it to keep
your files more organized. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">include</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This is an optional directory for distributions that use many libraries. 
You can have the <code style="font-size: 12px !important; line-height: 14.1667px !important;">configure</code> script link all public header files
in all the subdirectories under <code style="font-size: 12px !important; line-height: 14.1667px !important;">src</code> to this directory. This way
it will only be necessary to pass one <code style="font-size: 12px !important; line-height: 14.1667px !important;">-I</code> flag to test suites that
want to access the include files of other libraries in the distribution. 
We will discuss this later. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">lib</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This is an optional directory where you put portability-related
source code. This is mainly replacement implementations for system calls
that may not exist on some systems. You can also put tools here that you
commonly use across many different packages, tools that are too simple
to just make libraries out of every each one of them. It is suggested
that you maintain these tools in a central place. 
We will discuss this much later. 
</dd></dl>
   Together with these subdirectories you need to put a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>
and a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp> file. I also suggest that you put a shell script,
which you can call <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">reconf</span></samp>, that contains the following:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #!/bin/sh
     rm -f config.cache
     aclocal -I m4
     autoconf
     autoheader
     automake -a
     exit
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This will generate <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.in</span></samp> and needs to
be called whenever you change a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> or a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp>
as well as when you change something under the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">m4</span></samp> directory. 
It will also call ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autoheader</span></samp>¡¯ to make <code style="font-size: 12px !important; line-height: 14.1667px !important;">config.h.in</code>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">At the toplevel directory, you need to put a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> that will
tell the computer that all the source code is under the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src</span></samp>
directory. The way to do it is to put the following lines in
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     EXTRA_DIST = reconf
     SUBDIRS = m4 doc src
</pre>
   <p class="noindent" style="font-size: 16px !important;">
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">The first line tells <code style="font-size: 12px !important; line-height: 14.1667px !important;">automake</code> that the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">reconf</span></samp> script
is part of the distribution and must be included when you do <code style="font-size: 12px !important; line-height: 14.1667px !important;">make dist</code>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The second line tells <code style="font-size: 12px !important; line-height: 14.1667px !important;">automake</code> that the rest of the distribution is
in the subdirectories <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">m4</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">doc</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src</span></samp>. It instructs
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp> to recursively call itself in these subdirectories. It is important
to include the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">doc</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">m4</span></samp> subdirectories here and enhance them
with <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> so that <code style="font-size: 12px !important; line-height: 14.1667px !important;">make dist</code> includes them into the
distribution. 
</li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">If you are also using a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">lib</span></samp> subdirectory, then it should be built
before <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src</span></samp>:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     EXTRA_DIST = reconf
     SUBDIRS = m4 doc lib src
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">lib</span></samp> subdirectory should build a static library that is linked
by your executables in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src</span></samp>. There should be no need to install that
library.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">At the toplevel directory you also need to put the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp>
file. That should look like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     AC_INIT(packagename,versionnumber)
     AM_INIT_AUTOMAKE
     [...put your tests here...]
     AC_CONFIG_FILES([Makefile
               doc/Makefile
               m4/Makefile
               src/Makefile
               src/dir1/Makefile
               src/dir2/Makefile
               src/dir3/Makefile
               ............
               src/dir1/foo1/Makefile])
     AC_OUTPUT
     
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">You will not need another <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp> file. However,
<strong style="font-size: 16px !important; line-height: 16.6667px !important;">every directory level on your tree must have a </strong><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>. 
When you call <code style="font-size: 12px !important; line-height: 14.1667px !important;">automake</code> on the top-level directory, it looks at
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">AC_CONFIG_FILES</span></samp>¡¯ at your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp> to decide what other
directories have a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> that needs parsing. As you can see from
above, a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> file is needed even under the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">doc</span></samp> and
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">m4</span></samp> directories. How to set that up is up to you. If you aren't building
anything, but just have files and directories hanging around, you must declare
these files and directories in the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     SUBDIRS = dir1 dir2 dir3
     EXTRA_DIST = file1 file2 file3
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Doing that will cause <code style="font-size: 12px !important; line-height: 14.1667px !important;">make dist</code> to include these files and directories
to the package distribution.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">This tedious setup work needs to be done every time that you create a new
package. If you create enough packages to get sick of it, then you
want to look into the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ utility that is distributed by
Autotoolset. We will describe it at the next chapter.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Programs-and-Libraries-with-Automake" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#General-Automake-principles" style="font-size: 16px !important; line-height: 16.6667px !important;">General Automake principles</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Standard-organization-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Standard organization with Automake</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">6.6 Programs and Libraries with Automake</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Next we explain how to develop <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> files for the source code
directory levels. A <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> is a set of assignments. 
These assignments imply the Makefile, a set of targets, dependencies
and rules, and the Makefile implies the execution of building.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The first set of assignments going at the beginning look like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     INCLUDES = -I/dir1 -I/dir2 -I/dir3 ....
     LDFLAGS = -L/dir1 -L/dir2 -L/dir3 ....
     LDADD = -llib1 -llib2 -llib3 ...
</pre>
   <p class="noindent" style="font-size: 16px !important;">
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">INCLUDES</span></samp>¡¯ assignment is where you insert the <code style="font-size: 12px !important; line-height: 14.1667px !important;">-I</code> flags that
you need to pass to your compiler. If the stuff in this directory is
dependent on a library in another directory of the same package, then
the <code style="font-size: 12px !important; line-height: 14.1667px !important;">-I</code> flag must point to that directory. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">LDFLAGS</span></samp>¡¯ assignment is where you insert the <code style="font-size: 12px !important; line-height: 14.1667px !important;">-L</code> flags
that are needed by the compiler when it links all the object files to
an executable. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">LDADD</span></samp>¡¯ assignment is where you list a long set of installed
libraries that you want to link in with all of your executables. 
Use the <code style="font-size: 12px !important; line-height: 14.1667px !important;">-l</code> flag only for installed libraries. You can list
libraries that have been built but not installed yet as well, but
do this only be providing the full path to these libraries. 
</li></ul>
   If your package contains subdirectories with libraries and you want to
link these libraries in another subdirectory you need to put ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-I</span></samp>¡¯
and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-L</span></samp>¡¯ flags in the two variables above. To express the path to
these other subdirectories, use the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">$(top_srcdir)</span></samp>¡¯ variable. 
For example if you want to access a library under <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src/libfoo</span></samp>
you can put something like:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     INCLUDES = ... -I$(top_srcdir)/src/libfoo ...
     LDFLAGS  = ... -L$(top_srcdir)/src/libfoo ...
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">on the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> of every directory level that wants access to
these libraries. Also, you must make sure that the libraries are built
before the directory level is built. To guarantee that, list the library
directories in ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">SUBDIRS</span></samp>¡¯ <strong style="font-size: 16px !important; line-height: 16.6667px !important;">before</strong> the directory levels that
depend on it. One way to do this is to put all the library directories under
a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">lib</span></samp> directory and all the executable directories under a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">bin</span></samp>
directory and on the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> for the directory level that
contains <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">lib</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">bin</span></samp> list them as:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     SUBDIRS = lib bin
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This will guarantee that all the libraries are available before building
any executables. Alternatively, you can simply order your directories
in such a way so that the library directories are built first.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Next we list the things that are to be built in this directory level:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     bin_PROGRAMS    = prog1 prog2 prog3 ....
     lib_LIBRARIES   = libfoo1.a libfoo2.a libfoo3.a ....
     check_PROGRAMS  = test1 test2 test3 ....
     TESTS           = $(check_PROGRAMS)
     include_HEADERS = header1.h header2.h ....
</pre>
   <p class="noindent" style="font-size: 16px !important;">
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">bin_PROGRAMS</span></samp>¡¯ line lists all the executable files that will be
compiled with <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code> and installed with <code style="font-size: 12px !important; line-height: 14.1667px !important;">make install</code> under
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/prefix/bin</span></samp>, where <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">prefix</span></samp> is usually <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local</span></samp>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">lib_LIBRARIES</span></samp>¡¯ line lists all the library files that will be
compiled with <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code> and installed with <code style="font-size: 12px !important; line-height: 14.1667px !important;">make install</code> under
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/prefix/lib</span></samp>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">check_PROGRAMS</span></samp>¡¯ line lists executable files that are
<strong style="font-size: 16px !important; line-height: 16.6667px !important;">not</strong> compiled with a simple <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code> but only with a
<code style="font-size: 12px !important; line-height: 14.1667px !important;">make check</code>. These programs serve as tests that you, the user
can use to test the library. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">TESTS</span></samp>¡¯ line lists executable files which are to be compiled
<em style="font-size: 16px !important; line-height: 16.6667px !important;">and executed</em> when you run <code style="font-size: 12px !important; line-height: 14.1667px !important;">make check</code>. These programs
constitute the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">test suite</dfn> and they are indispensable when you
develop a library. It is common to just set
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          TESTS = $(check_PROGRAMS)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This way by commenting the line in and out, you can modify the behaviour
of <code style="font-size: 12px !important; line-height: 14.1667px !important;">make check</code>. While debugging your test suite, you will want to
comment out this line so that <code style="font-size: 12px !important; line-height: 14.1667px !important;">make check</code> doesn't run it. However,
in the end product, you will want to comment it back in. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">include_HEADERS</span></samp>¡¯ line lists public headers present in this
directory that you want to install in <code style="font-size: 12px !important; line-height: 14.1667px !important;">/prefix/include</code>. You must
list a header file here if you want to cause it to be installed. You
can also list it under <code style="font-size: 12px !important; line-height: 14.1667px !important;">libfoo_a_SOURCES</code> for the library that it
belongs to, but it is imperative to list public headers here so that they
can be installed. 
</li></ul>
   It is good programming practice to keep libraries and executables under
separate directory levels. However, it is okey to keep the library and
the <em style="font-size: 16px !important; line-height: 16.6667px !important;">check</em> executables that test the library under the same directory
level because that makes it easier for you to link them with the library.

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">For each of these types of targets, we must state information that
will allow <code style="font-size: 12px !important; line-height: 14.1667px !important;">automake</code> and <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code> to infer the building process.

     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">For each Program:</strong> You need to declare the set of files that are
sources of the program, the set of libraries that must be linked with the
program and (optionally) a set of dependencies that need to be built before
the program is built. These are declared in assignments that look like
this:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          prog1_SOURCES = foo1.cc foo2.cc ... header1.h header2.h ....
          prog1_LDADD   = -lbar1 -lbar2 -lbar3
          prog1_LDFLAGS = -L/dir1 -L/dir2 -L/dir3 ...
          prog1_DEPENDENCIES = dep1 dep2 dep3 ...
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">In each assignment substitute ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">prog1</span></samp>¡¯ with the name of the program that
you are building as it appeared in ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">bin_PROGRAMS</span></samp>¡¯ or
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">check_PROGRAMS</span></samp>¡¯.
          </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">prog1_SOURCES</span></samp>¡¯: Here you list all the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">*.cc</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">*.h</span></samp> files
that compose the source code of the program. The presence of a header file
here doesn't cause the file to be installed at <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/prefix/include</span></samp> but
it does cause it to be added to the distribution when you do <code style="font-size: 12px !important; line-height: 14.1667px !important;">make dist</code>. 
To cause header files to be installed you must also put them in
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">include_HEADERS</span></samp>¡¯. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">prog1_LDADD</span></samp>¡¯: Here you add primarily the <code style="font-size: 12px !important; line-height: 14.1667px !important;">-l</code> flags for linking
whatever libraries are needed by your code. You may also list object files,
which have been compiled in an exotic way, as well as paths to uninstalled
yet libraries. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">prog_LDFLAGS</span></samp>¡¯: Here you add the <code style="font-size: 12px !important; line-height: 14.1667px !important;">-L</code> flags that are needed to
resolve the libraries you passed in ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">prog_LDADD</span></samp>¡¯. Certain flags that
need to be passed on <em style="font-size: 16px !important; line-height: 16.6667px !important;">every</em> program can be expressed on a global
basis by assigning them at ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">LDFLAGS</span></samp>¡¯. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">prog1_DEPENDENCIES</span></samp>¡¯:
If for any reason you want certain other targets to be built before building
this program, you can list them here. 
</li></ul>
     This is all you need to do. There is no need to write an extended Makefile
with all the targets, dependencies and rules that are required to build
the program. They are computed for you by this minimal information by
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp>. Moreover, the targets ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">dist</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">install</span></samp>¡¯,
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">clean</span></samp>¡¯ and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">distclean</span></samp>¡¯ are appropriately setup to handle the
program. You don't need to take care of them by yourself.

     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">For each Library:</strong>
There's a total of four assignments that are relevant to building libraries:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          lib_LIBRARIES = ... libfoo1.a ...
          libfoo1_a_SOURCES      = foo1.cc foo2.cc private1.h private2.h ...
          libfoo1_a_LIBADD       = obj1.o obj2.o obj3.o
          libfoo1_a_DEPENDENCIES = dep1 dep2 dep3 ...
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Note that if the name of the library is <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libfoo1.a</span></samp> the prefix that
appears in the variables that are related with that library is
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">libfoo1_a_</span></samp>¡¯.
          </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">libfoo1_a_SOURCES</span></samp>¡¯: Just like with programs, here you list all the
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">*.cc</span></samp> files as well as all the <strong style="font-size: 16px !important; line-height: 16.6667px !important;">private</strong> header files that
compose the library. By <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">private header file</dfn> we mean a header file
that is used internally by the library and the maintainers of the library,
but is not exported to the end-user. You can list <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">public header files</dfn>
also if you like, and perhaps you should for documentation purposes, but
if you mention them in <code style="font-size: 12px !important; line-height: 14.1667px !important;">include_HEADERS</code> it is not required to repeat
them a second time here. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">libfoo1_a_DEPENDENCIES</span></samp>¡¯: If there are any other targets that need to
be built before this library is built, list them here. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">libfoo1_a_LIBADD</span></samp>¡¯: If there are any other object files that you want
to include in the library list them here. You might be tempted to list
them as dependencies in ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">libfoo1_a_DEPENDENCIES</span></samp>¡¯, but that will not
work. If you do that, the object files will be built before the library
is built <em style="font-size: 16px !important; line-height: 16.6667px !important;">but they will not be included in the library!</em> By listing
an object file here, you are stating that you want it to be built <strong style="font-size: 16px !important; line-height: 16.6667px !important;">and</strong>
you want it to be included in the library. 
</li></ul>
     </li></ul>

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="General-Automake-principles" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Simple-Automake-examples" style="font-size: 16px !important; line-height: 16.6667px !important;">Simple Automake examples</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Programs-and-Libraries-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Programs and Libraries with Automake</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">6.7 General Automake principles</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">In the previous section we described how to use Automake to compile
programs, libraries and test suites. To exploit the full power of Automake
however, it is important to understand the fundamental ideas behind it.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The simplest way to look at a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> is as a collection of
assignments which infer a set of Makefile rules, which in turn infer the
building process. There are three types of such assignments:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Global</dfn> assignments modify the behaviour of the entire Makefile for the
given subdirectory. Examples of such assignments are ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">INCLUDES</span></samp>¡¯,
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">LDADD</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">LDFLAGS</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">TESTS</span></samp>¡¯. These assignments affect the
behaviour of the Makefile in the given directory independent of what gets
built. In order for an assignment to be <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">global</dfn>, the name of the
variable to which you are assigning must have a special meaning to Automake. 
If it does not, then the assignment has no effect, but it may be used
as a variable in other assignments. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Primitive</dfn> assignments declare the primitives that we want to build. 
Such assignments are ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">bin_PROGRAMS</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">lib_LIBRARIES</span></samp>¡¯, and others. 
The general pattern of these assignments is two words separated by an
underscore. The second word is always in all-caps, it is
the type of the primitive being built, and
it affects what Makefile rules are generated for building the primitive. 
The first word contains information about where to install the primitive
once its built, so it affects the Makefile rules that handle the
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">install</span></samp>¡¯ and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">uninstall</span></samp>¡¯ targets. The way this works is that
for ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">bin</span></samp>¡¯ there corresponds a global assignment for ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">bindir</span></samp>¡¯
containing the installation directory. For example the symbols ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">bin</span></samp>¡¯,
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">lib</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">include</span></samp>¡¯ have the following default assignments:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          bindir     = $(prefix)/bin
          libdir     = $(prefix)/lib
          includedir = $(prefix)/include
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">These are the directories where you install executables, libraries and
public header files. You can override the defaults by inserting different
assignments in your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>, but please don't do that. Instead
define new assignments. For example, if you do
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          foodir = $(prefix)/foo
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">then you can use ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">foo_PROGRAMS</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">foo_LIBRARIES</span></samp>¡¯, etc. to
list programs and libraries that you want installed in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/prefix/foo</span></samp>. 
The symbols ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">check</span></samp>¡¯ and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">noinst</span></samp>¡¯ have special meanings and you
should not ever try to assign to ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">checkdir</span></samp>¡¯ and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">noinstdir</span></samp>¡¯.
          </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">check</span></samp>¡¯ symbol, suggests that the primitive should only be
built when the user invokes ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make check</span></samp>¡¯ and it should not be installed. 
It is only meant to be executed as part of a test suite and then get scrapped. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">noinst</span></samp>¡¯ symbol, suggests that the primitive should not be
installed. It will be built however normally, when you invoke ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯. 
You could use this to build convenience libraries which you
intend to link in statically to executables which you do plan to install. 
You could also use this to build executables which will generate source
code that will subsequently be used to build something installable. 
</li></ul>
     Usually, you should install executables in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/prefix/bin</span></samp>, libraries
in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/prefix/lib</span></samp> and public header files in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/prefix/include</span></samp>. 
In general however, the GNU coding standards suggest a dozen of different
places on which you may want to install files. For more details
See <a href="#Installation-standard-directories" style="font-size: 16px !important; line-height: 16.6667px !important;">Installation standard directories</a>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Property</dfn> assignments define the properties for every primitive that
you declare. A property is also made of two words that are separated by
an underscore. The first word names the primitive to which the property
refers to. The second word names the name of the property itself. For
example when you define
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          bin_PROGRAMS = hello
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">this means that you can then say:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          hello_SOURCES = ...
          hello_LDADD   = ...
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and so on. The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">SOURCES</span></samp>¡¯ and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">LDADD</span></samp>¡¯ are properties of ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">hello</span></samp>¡¯
which is a ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">PROGRAMS</span></samp>¡¯ primitive. 
</p></li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">In addition to assignments,
it is also possible to include ordinary targets and abstract targets in a
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> just as you would in an ordinary <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>. 
This can be particularly useful in situations like the following:

     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">You may want to have some of your C, C++ or Fortran source code written
by another program. See <a href="#Dealing-with-built-sources" style="font-size: 16px !important; line-height: 16.6667px !important;">Dealing with built sources</a>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You may want to generate object files from an obscure kind of source
file. For example, see <a href="#Embedded-text-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Embedded text with Automake</a>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You may want to write programs as shell scripts in Bash, Perl or in Guile. 
See <a href="#Scripts-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Scripts with Automake</a>, and <a href="#Guile-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Guile with Automake</a>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You may want to install data files that are generated during compile-time
from a program distributed with your software package. 
See <a href="#Data-files-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Data files with Automake</a>. 
</li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">Ordinary rules simply build things. Abstract rules however have a special
meaning to Automake. If you define an abstract rule that compiles
files with an arbitrary suffix into <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">*.o</span></samp> an object file,
then files with such a suffix can appear in the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">*_SOURCES</span></samp>¡¯ of
programs and libraries. You must however write the abstract rule early
enough in your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> for Automake to parse it before
encountering a sources assignment in which such files appear. 
You must also mention all the additional
suffixes by assigning the variable ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">SUFFIXES</span></samp>¡¯. Automake will use
the value of that variable to put together the <code style="font-size: 12px !important; line-height: 14.1667px !important;">.SUFFIXES</code> construct
(see <a href="#More-about-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">More about Makefiles</a>).

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If you need to write your own rules or abstract rules, then check at
some point that your distribution builds properly with ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make distcheck</span></samp>¡¯. 
It is very important, when you define your own rules, to follow
the following guidelines:

     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">Prepend all the files that <em style="font-size: 16px !important; line-height: 16.6667px !important;">you</em> wrote, both in the dependencies
and the rules, with ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">$(srcdir)</span></samp>¡¯. This variable points to the
directory where your source code is located during the current building. 
Note that this may not be necessarily the same directory as the one
returned by ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">`pwd`</span></samp>¡¯ if you are doing a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">VPATH build</dfn>
(see <a href="#Doing-a-VPATH-build" style="font-size: 16px !important; line-height: 16.6667px !important;">Doing a VPATH build</a>). During a build, the current working directory
is the directory in which files are <em style="font-size: 16px !important; line-height: 16.6667px !important;">written</em>, not the directory from
which files are <em style="font-size: 16px !important; line-height: 16.6667px !important;">read</em>. 
If you mess this up, then you will know when
<code style="font-size: 12px !important; line-height: 14.1667px !important;">make distcheck</code> fails, which attempts to do a VPATH build. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Files that in an ordinary build are <em style="font-size: 16px !important; line-height: 16.6667px !important;">written</em> by a program in the same
directory as the corresponding <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>, in general, are
written in the current working directory during a VPATH build. Therefore,
you can refer to such files in the same <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> as
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">./filename</span></samp>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If you need to refer to any files under the top-level directory of your
project, use <code style="font-size: 12px !important; line-height: 14.1667px !important;">$(top_srcdir)</code> for files which <em style="font-size: 16px !important; line-height: 16.6667px !important;">you</em> write
(and your compiler tools <em style="font-size: 16px !important; line-height: 16.6667px !important;">read</em>) and <code style="font-size: 12px !important; line-height: 14.1667px !important;">$(top_builddir)</code> for
files which <em style="font-size: 16px !important; line-height: 16.6667px !important;">the compiler tools write</em>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The symbols ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">$&lt;</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">$@</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">$^</span></samp>¡¯ don't need to prepended
with anything, unlike ordinary filenames. GNU make will handle these
symbols correctly during a VPATH build. 
Also see <a href="#More-about-Makefiles" style="font-size: 16px !important; line-height: 16.6667px !important;">More about Makefiles</a>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">For your rules use only the following commands directory:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          ar cat chmod cmp cp diff echo egrep expr false grep ls
          mkdir mv pwd rm rmdir sed sleep sort tar test touch true
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Any other programs that you want to use, you must use them through make
variables. That includes programs such as these:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          awk bash bison cc flex install latex ld ldconfig lex ln make
          makeinfo perl ranlib shar texi2dvi yacc
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The make variables can be defined through Autoconf in your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp>. 
For special-purpose tools, use the AC_PATH_PROGS macro. For example:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_PATH_PROGS(BASH, bash)
          AC_PATH_PROGS(PERL, perl perl5)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Some special tools have their own autoconf macros:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_PROG_MAKE_SET ==&gt; $(MAKE)   ==&gt; make
          AC_PROG_RANLIB   ==&gt; $(RANLIB) ==&gt; ranlib | (do-nothing)
          AC_PROG_AWK      ==&gt; $(AWK)    ==&gt; mawk | gawk | nawk | awk
          AC_PROG_LEX      ==&gt; $(LEX)    ==&gt; flex | lex
          AC_PROG_YACC     ==&gt; $(YACC)   ==&gt; 'bison -y' | byacc | yacc
          AC_PROG_LN_S     ==&gt; $(LN_S)   ==&gt; ln -s
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">See the <cite style="font-size: 16px !important; line-height: 16.6667px !important;">Autoconf manual</cite> for more information. 
</p></li></ul>

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Simple-Automake-examples" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Libraries-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Libraries with Automake</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#General-Automake-principles" style="font-size: 16px !important; line-height: 16.6667px !important;">General Automake principles</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">6.8 Simple Automake examples</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">A real life example of a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> for libraries is the one I use
to build the Blas-1 library. It looks like this:

</p><p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">&#8226; <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">blas1/Makefile.am</span></samp>
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     SUFFIXES = .f
     .f.o:
            $(F77) $(FFLAGS) -c $&lt;
     
     lib_LIBRARIES = libblas1.a
     libblas1_a_SOURCES = f2c.h caxpy.f ccopy.f cdotc.f cdotu.f crotg.f cscal.f \
      csrot.f csscal.f cswap.f dasum.f daxpy.f dcabs1.f dcopy.f ddot.f dnrm2.f \
      drot.f drotg.f drotm.f drotmg.f dscal.f dswap.f dzasum.f dznrm2.f icamax.f \
      idamax.f isamax.f izamax.f sasum.f saxpy.f scasum.f scnrm2.f scopy.f \
      sdot.f snrm2.f srot.f srotg.f srotm.f srotmg.f sscal.f sswap.f zaxpy.f \
      zcopy.f zdotc.f zdotu.f zdrot.f zdscal.f zrotg.f zscal.f zswap.f
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Because the Blas library is written in Fortran, I need to declare the
Fortran suffix at the beginning of the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> with the
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">SUFFIXES</span></samp>¡¯ assignment and then insert an implicit rule for building
object files from Fortran files. The variables ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">F77</span></samp>¡¯ and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">FFLAGS</span></samp>¡¯
are defined by Autoconf, by using the Fortran support provided by Autotoolset. 
For C or C++ files there is no need to include implicit rules. 
We discuss Fortran support at a later chapter.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Another important thing to note is the use of the symbol ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">$&lt;</span></samp>¡¯. We
introduced these symbols in Chapter 2, where we mentioned that ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">$&lt;</span></samp>¡¯
is the dependencies that changed causing the target to need to be rebuilt. 
If you've been paying attention you may be wondering why we didn't say
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">$(srcdir)/$&lt;</span></samp>¡¯ instead. The reason is because for VPATH builds,
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make</span></samp>¡¯ is sufficiently intelligent to substitute ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">$&lt;</span></samp>¡¯ with the
Right Thing.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Now consider the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> for building a library for solving
linear systems of equations in a nearby directory:

</p><p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">&#8226; <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">lin/Makefile.am</span></samp>
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     SUFFIXES = .f
     .f.o:
            $(F77) $(FFLAGS) -c $&lt;
     INCLUDES = -I../blas1 -I../mathutil
     
     lib_LIBRARIES = liblin.a
     include_HEADERS = lin.h
     liblin_a_SOURCES = dgeco.f dgefa.f dgesl.f f2c.h f77-fcn.h lin.h lin.cc
     
     check_PROGRAMS = test1 test2 test3
     TESTS = $(check_PROGRAMS)
     LDADD = liblin.a ../blas1/libblas1.a ../mathutil/libmathutil.a $(FLIBS) -lm
     
     test1_SOURCES = test1.cc f2c-main.cc
     test2_SOURCES = test2.cc f2c-main.cc
     test3_SOURCES = test3.cc f2c-main.cc
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">In this case, we have a library that contains mixed Fortran and C++ code. 
We also have an example of a test suite, which in this case contains three
test programs. What's new here is that in order to link the test suite
properly we need to link in libraries that have been built already in
other directories but haven't been installed yet. Because every test
program requires to be linked against the same libraries, we set these
libraries globally with an ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">LDADD</span></samp>¡¯ assignment for all executables. 
Because the libraries have not been installed yet we specify them with their
full path. This will allow Automake to track dependencies correctly; if
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libblas1.a</span></samp> is modified, it will cause the test suite to be rebuilt. 
Also the variable ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">INCLUDES</span></samp>¡¯ is globally assigned to make the
header files of the other two libraries accessible to the source code in
this directory. 
The variable ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">$(FLIBS)</span></samp>¡¯ is assigned by Autoconf to link the run-time
Fortran libraries, and then we link the installed <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libm.a</span></samp> library. 
Because that library is installed, it must be linked with the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-l</span></samp>¡¯ flag. 
Another peculiarity in this example is the file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c-main.cc</span></samp> which
is shared by all three executables. As we will explain later, when you link
executables that are derived from mixed Fortran and C or C++ code, then you
need to link with the executable this kludge file.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The test-suite files for numerical code will usually invoke the library
to perform a computation for which an exact result is known and then
verify that the result is true. For non-numerical code, the library will
need to be tested in different ways depending on what it does.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Libraries-with-Automake" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Dealing-with-built-sources" style="font-size: 16px !important; line-height: 16.6667px !important;">Dealing with built sources</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Simple-Automake-examples" style="font-size: 16px !important; line-height: 16.6667px !important;">Simple Automake examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">6.9 Libraries with Automake</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">A good example, and all about how libraries should be tested and documented. 
Needs thinking.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Dealing-with-built-sources" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Embedded-text-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Embedded text with Automake</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Libraries-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Libraries with Automake</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">6.10 Dealing with built sources</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">In some complicated packages, you want to generate part of their source
code by executing a program at compile time. For example, in one of
the packages that I wrote for an assignment, I had to generate a file
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">incidence.out</span></samp> that contained a lot of hairy matrix definitions that
were too ugly to just compute and write by hand. That file was then
included by <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">fem.cc</span></samp> which was part of a library that I wrote to
solve simple finite element problems, with a preprocessor statement:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #include "incidence.out"
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">All source code files that are to be generated during compile time should
be listed in the global definition of ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">BUILT_SOURCES</span></samp>¡¯. This will
make sure that these files get compiled before anything else. In our
example, the file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">incidence.out</span></samp> is computed by running a program
called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">incidence</span></samp> which of course also needs to be compiled before
it is run. So the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> that we used looked like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     noinst_PROGRAMS = incidence
     lib_LIBRARIES = libpmf.a
     
     incidence_SOURCES = incidence.cc mathutil.h
     incidence_LDADD = -lm
     
     incidence.out: incidence
           ./incidence &gt; incidence.out
     
     BUILT_SOURCES = incidence.out
     libpmf_a_SOURCES = laplace.cc laplace.h fem.cc fem.h mathutil.h
     
     check_PROGRAMS = test1 test2
     TESTS = $(check_PROGRAMS)
     
     test1_SOURCES = test1.cc
     test1_LDADD = libpmf.a -lm
     
     test2_SOURCES = test2.cc
     test2_LDADD = libpmf.a -lm
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Note that because the executable <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">incidence</span></samp> has been created at
compile time, the correct path is <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">./incidence</span></samp>. Always keep in mind,
that the correct path to source files, such as <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">incidence.cc</span></samp> is
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">$(srcdir)/incidence.cc</span></samp>. Because the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">incidence</span></samp> program is used
temporarily only for the purposes of building the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">libpmf.a</span></samp> library,
there is no reason to install it. So, we use the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">noinst</span></samp>¡¯ prefix to
instruct Automake not to install it.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Embedded-text-with-Automake" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Installation-standard-directories" style="font-size: 16px !important; line-height: 16.6667px !important;">Installation standard directories</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Dealing-with-built-sources" style="font-size: 16px !important; line-height: 16.6667px !important;">Dealing with built sources</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">6.11 Embedded text with Automake</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">In some cases, we want to embed text to the executable file of an application. 
This may be on-line help pages, or it may be a script of some sort that we
intend to execute by an interpreter library that we are linking with, like
Guile or Tcl. Whatever the reason, if we want to compile the application as
a stand-alone executable, it is necessary to embed the text in the source
code. Autotoolset provides with the build tools necessary to do this
painlessly.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">As a tutorial example, we will write a simple program that prints the contents
of the GNU General Public License. First create the directory tree for
the program:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % acmkdir foo
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Enter the directory and create a copy of the <code style="font-size: 12px !important; line-height: 14.1667px !important;">txtc</code> compiler:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % cd foo-0.1
     % mktxtc
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Then edit the file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp> and add a call to the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">LF_PROG_TXTC</code> macro. This macro depends on
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     AC_PROG_CC
     AC_PROG_AWK
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">so make sure that these are invoked also. Finally add <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">txtc.sh</span></samp> to
your <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_OUTPUT</code>. 
The end-result should look like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     AC_INIT(reconf)
     AM_CONFIG_HEADER(config.h)
     AM_INIT_AUTOMAKE(foo,0.1)
     AC_PROG_CC
     AC_PROG_RANLIB
     AC_PROG_AWK
     LF_PROG_TXTC
     AC_OUTPUT(Makefile txtc.sh doc/Makefile m4/Makefile src/Makefile)
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">In the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src</span></samp> directory use Emacs to create a file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src/text.txt</span></samp>
containing some random text. 
The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">text.txt</span></samp> file is the text that we want to print. You can substitute
it with any text you want. This file will be compiled into <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">text.o</span></samp>
during the build process. The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">text.h</span></samp> file is a header file that gives
access to the symbols defined by <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">text.o</span></samp>. The file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">copyleft.cc</span></samp>
is where the <code style="font-size: 12px !important; line-height: 14.1667px !important;">main</code> will be written.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Next, create the following files with Emacs:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">text.h</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          extern int text_txt_length;
          extern char *text_txt[];
</pre>
     <p class="noindent" style="font-size: 16px !important;"><br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">foo.c</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #if HAVE_CONFIG_H
          # include &lt;config.h&gt;
          #endif
          
          #include &lt;stdio.h&gt;
          #include "text.h"
          
          main()
          {
            for (i = 1; i&lt;= text_txt_length; i++)
              printf ("%s\n", text_txt[i]);
          }
</pre>
     <p class="noindent" style="font-size: 16px !important;"><br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Makefile.am</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          SUFFIXES = .txt
          .txt.o:
                 $(TXTC) $&lt;
          
          bin_PROGRAMS = foo
          foo_SOURCES = foo.c text.h text.txt
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></dd></dl>
   and now you're set to build. Go back to the toplevel directory and go for it:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     $ cd ..
     $ reconf
     $ configure
     $ make
     $ src/foo | less
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">To verify that this works properly, do the following:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     $ cd src
     $ foo &gt; foo.out
     $ diff text.txt foo.out
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The two files should be identical. 
Finally, convince yourself that you can make a distribution:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     $ make distcheck
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and there you are.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Note that in general the text file, as encoded by the text compiler, will
not be always identical to the original. There is one and only one modification
being made: If any line has any blank spaces at the end, they are trimmed off. 
This feature was introduced to deal with a bug in the Tcl interpreter, and
it is in general a good idea since it conserves a few bytes, it never hurts,
and additional whitespace at the end of a line shouldn't really be there.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">This magic is put together from many different directions. It begins with
the <code style="font-size: 12px !important; line-height: 14.1667px !important;">LF_PROG_TXTC</code> macro:

</p><div class="defun" style="font-size: 16px !important; line-height: 16.6667px !important;">
¡ª Macro: <b style="font-size: 16px !important; line-height: 16.6667px !important;">LF_PROG_TXTC</b><var style="font-size: 16px !important;"><a name="index-LF_005fPROG_005fTXTC-1" style="font-size: 16px !important;"></a></var><br>
<blockquote style="font-size: 16px !important; line-height: 16.6667px !important;"><p style="font-size: 16px !important; line-height: 16.6667px !important;">This macro will define the variable <code style="font-size: 12px !important; line-height: 14.1667px !important;">TXTC</code> to point to a Text-to-C
compiler. To create a copy of the compiler at the toplevel directory of your
source code, use the <code style="font-size: 12px !important; line-height: 14.1667px !important;">mktxtc</code> command:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % mktxtc
</pre>
        <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The compiler is implemented as a shell script, and it depends on <code style="font-size: 12px !important; line-height: 14.1667px !important;">sed</code>,
<code style="font-size: 12px !important; line-height: 14.1667px !important;">awk</code> and the C compiler, so you should call the following two macros
before invoking <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_PROG_TXTC</code>:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_PROG_CC
          AC_PROG_AWK
</pre>
        <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The compiler is intended to be used as follows:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          $(TXTC) text1.txt text2.txt text3.txt ...
</pre>
        <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">such that given the files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">text1.txt</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">text2.txt</span></samp>, etc. 
object files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">text1.o</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">text2.o</span></samp>, etc, are
generated that contains the text from these files. 
</p></blockquote></div>

<p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">From the Automake point of view, you need to add the following two lines
to Automake:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     SUFFIXES = .txt
     .txt.o:
             $(TXTC) $&lt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">assuming that your text files will end in the <code style="font-size: 12px !important; line-height: 14.1667px !important;">.txt</code> suffix. The first
line informs Automake that there exist source files using non-standard
suffixes. Then we describe, in terms of an abstract Makefile rule, how to
build an object file from these non-standard suffixes. Recall the use of
the symbol <code style="font-size: 12px !important; line-height: 14.1667px !important;">$&lt;</code>. Also note that it is not necessary
to use <code style="font-size: 12px !important; line-height: 14.1667px !important;">$(srcdir)</code> on <code style="font-size: 12px !important; line-height: 14.1667px !important;">$&lt;</code> for VPATH builds. 
If you embed more than one type of files, then you may want to use more
than one suffixes. For example, you may have <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.hlp</span></samp> files containing
online help and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.scm</span></samp> files containing Guile code. Then you
want to write a rule for each suffix as follows:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     SUFFIXES = .hlp .scm
     .hlp.o:
             $(TXTC) $&lt;
     .scm.o:
             $(TXTC) $&lt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">It is important to put these lines before mentioning any <code style="font-size: 12px !important; line-height: 14.1667px !important;">SOURCES</code>
assignments. Automake is smart enough to parse these abstract makefile
rules and recognize that files ending in these suffixes are valid source
code that can be built to object code. This allows you to simply list
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl.txt</span></samp> with the other source files in the <code style="font-size: 12px !important; line-height: 14.1667px !important;">SOURCES</code> assignment:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     foo_SOURCES = foo.c text.h text.txt
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">In order for this to work however, Automake must be able to see your
abstract rules first.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">When you ¡°compile¡± a text file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo.txt</span></samp> this makes an object file
that defines the following two symbols:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     int foo_txt_length;
     char *foo_txt[];
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Note that the dot characters are converted into underscores. To make these
symbols accessible, you need to define an appropriate header file with
the following general form:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     extern int foo_txt_length;
     extern char *foo_txt[];
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">When you include this header file into your other C or C++ files then:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">You can obtain the filename containing the original text from
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          foo_txt[0];
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and use it to print diagnostic messages. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You can obtain the text itself line by line:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          char *foo_txt[1];   ==&gt; first line
          char *foo_txt[2];   ==&gt; second line
          ...
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The last line is set to NULL and <code style="font-size: 12px !important; line-height: 14.1667px !important;">foo_txt_length</code> is defined such that
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          char *foo_txt[foo_txt_length+1] == NULL
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The last line of the text is:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          char *foo_txt[foo_txt_length];
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">You can use a <code style="font-size: 12px !important; line-height: 14.1667px !important;">for</code> loop (or the <code style="font-size: 12px !important; line-height: 14.1667px !important;">loop</code> macro defined by
LF_CPP_PORTABILITY)
together with <code style="font-size: 12px !important; line-height: 14.1667px !important;">foo_txt_length</code> to loop over the entire text, or you can
exploit the fact that the last line points to <code style="font-size: 12px !important; line-height: 14.1667px !important;">NULL</code> and do a
<code style="font-size: 12px !important; line-height: 14.1667px !important;">while</code> loop. 
</p></li></ul>
   and that's all there is to it.

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Installation-standard-directories" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Scripts-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Scripts with Automake</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Embedded-text-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Embedded text with Automake</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">6.12 Installation standard directories</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Previously, we mentioned that the symbols ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">bin</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">lib</span></samp>¡¯ and
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">include</span></samp>¡¯ refer to installation locations that are defined respectively
by the variables ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">bindir</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">libdir</span></samp>¡¯ and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">includedir</span></samp>¡¯. 
For completeness, we will now list the installation locations available by
default by Automake and describe their purpose.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">All installation locations are placed under one of the following directories:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">prefix</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The default value of ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">$(prefix)</span></samp>¡¯ is <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local</span></samp> and it is used
to construct installation locations for machine-indepedent files. The actual
value is specified at configure-time with the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">--prefix</span></samp>¡¯ argument. 
For example:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          configure --prefix=/home/lf
</pre>
     <p class="noindent" style="font-size: 16px !important;"><br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">exec_prefix</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The default value of ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">$(exec_prefix)</span></samp>¡¯ is ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">$(prefix)</span></samp>¡¯ and it
used to construct installation location for machine-dependent files. 
The actual value is specified at configure-time with the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">--exec-prefix</span></samp>¡¯
argument. For example:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          configure --prefix=/home/lf --exec-prefix=/home/lf/gnulinux
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The purpose of using a separate location for machine-dependent files
is because then it makes it possible to install the software
on a networked file server and make that available to
machines with different architectures. To do that there must be separate
copies of all the machine-dependent files for each architecture in use. 
</p></dd></dl>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU coding standards describe in detail the standard directories
in which you should install your files. All of these standard locations
are supported by Automake. So, for example, you can write things like
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     sbin_PROGRAMS = <var style="font-size: 12px !important; line-height: 14.1667px !important;">prog</var> ...
     sharedstate_DATA = <var style="font-size: 12px !important; line-height: 14.1667px !important;">foo</var> ...
     ....
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">without having to define the variables ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">sbindir</span></samp>¡¯, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">sharedstatedir</span></samp>¡¯
and so on.

     </p><ol start="1" style="font-size: 16px !important; line-height: 16.6667px !important;" type="1">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">Program-related files are installed in one of the following locations:
          <dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">bindir = $(exec_prefix)/bin</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The directory for installing executable programs that users can run. 
The default value for this directory is <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local/bin</span></samp>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">sbindir = $(exec_prefix)/sbin</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The directory for installing executable programs that can be run
from the shell, but are only generally useful to system administrators. 
The default value for this directory is <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local/sbin</span></samp>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">libexecdir = $(exec_prefix)/libexec</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The directory for installing executable programs to be run by other
programs rather than by users. The default value for this directory
is <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local/libexec</span></samp>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">libdir = $(exec_prefix)/lib</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The directory for installing libraries to be linked by other programs. 
The default value for this directory is <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local/lib</span></samp>. 
Please don't use this directory to install data files. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">includedir = $(prefix)/include</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The directory for installing public header files that declare the
symbols of installed libraries. 
</dd></dl>
     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Data files should be installed in one of the following directories:
          <dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">datadir = $(prefix)/share</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The directory for installing read-only architecture independent data files. 
The default value for this directory is <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local/share</span></samp>. 
Usually, most data files that you would like to install will have to
go under this directory. These files are part of the program implementation
and should not be modified. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">sysconfdir = $(prefix)/etc</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The directory for installing read-only data files that pertain to a
single machine's configuration. Even though applications should only
read, and not modify, these files, the user may have to modify these
files to configure the application. Examples of files that belong
in this directory are mailer and network configuration files, password
files and so on. Do not install files that are modified in the normal
course of their use (programs whose purpose is to change the configuration
of the system excluded). Those probably belong in
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">localstatedir</span></samp>¡¯. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">sharedstatedir = $(prefix)/com</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The directory for installing architecture-independent data files which
the programs modify while they run. The default value for this
directory is <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local/com</span></samp>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">localstatedir = $(prefix)/var</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The directory for installing data files which the programs modify while
they run, and that pertain to one specific machine. Users should never
have to modify the files in this directory to configure the package's
operation. The default value for this directory is
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local/var</span></samp>. System logs and mail spools are examples of
data files that belong in this directory. 
</dd></dl>
     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Then there are some directories for developing various eccentric
types of files:
          <dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">lispdir = $(datadir)/emacs/site-lisp</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The directory for installing Emacs Lisp files. The default value
of this directory is
          <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">               <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local/share/emacs/site-lisp</span></samp>.
</pre>
          <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This directory is not automatically defined by Automake. To define it,
you must invoke
          </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">               AM_PATH_LISPDIR
</pre>
          <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">from Autoconf. See <a href="#Emacs-Lisp-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs Lisp with Automake</a>. 
<br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">m4dir = $(datadir)/aclocal</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The directory for installing Autoconf macros. This directory is not
automatically defined by Automake so you will have to add a line
in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>:
          <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">               m4dir = $(datadir)/aclocal
</pre>
          <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">to define it yourself. See <a href="#Writing-Autoconf-macros" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Autoconf macros</a>. 
</p></dd></dl>
     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Documentation should be installed in the following directories:
          <dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">infodir = $(prefix)/info</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The directory for installing the Info files for this package. 
The default value for this directory is <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local/info</span></samp>. 
See <a href="#Introduction-to-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">Introduction to Texinfo</a>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">mandir = $(prefix)/man</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The top-level directory for installing the man pages (if any) for this
package. The default value for this directory is <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">/usr/local/man</span></samp>. 
See <a href="#Writing-man-pages" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing man pages</a>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">man1dir = $(prefix)/man1</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The top-level directory for installing section 1 man pages. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">man2dir = $(prefix)/man2</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The top-level directory for installing section 2 man pages. 
</dd></dl>
     </li></ol>
Automake also defines the following subdirectories for your convenience:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     pkglibdir     = $(libdir)/@PACKAGE@
     pkgincludedir = $(includedir)/@PACKAGE@
     pkgdatadir    = $(datadir)/@PACKAGE@
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">These subdirectories are useful for separating the files of your
package from other packages. Of these three, you are most likely to
want to use <code style="font-size: 12px !important; line-height: 14.1667px !important;">pkgincludedir</code> to segragate public header files,
as we discussed in <a href="#Dealing-with-header-files" style="font-size: 16px !important; line-height: 16.6667px !important;">Dealing with header files</a>. For similar
reasons you might like to segregate your data files. 
The only reason for using <code style="font-size: 12px !important; line-height: 14.1667px !important;">pkglibdir</code> is to
install dynamic libraries that are meant to be loaded only at run-time
while an application is running. 
You should not use a subdirectory for libraries that are linked to
programs, even dynamically, while the programs are being compiled, because
that will make it more difficult to compile your programs. However,
things like plug-ins, widget themes and so on should have their own
directory.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Scripts-with-Automake" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Emacs-Lisp-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs Lisp with Automake</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Installation-standard-directories" style="font-size: 16px !important; line-height: 16.6667px !important;">Installation standard directories</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">6.13 Scripts with Automake</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Sometimes you may feel the need to implement some of your programs in
a scripting language like Bash or Perl. For example, the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autotoolset</span></samp>¡¯
package is exclusively a collection of shell scripts. 
Theoretically, a script does
not need to be compiled. However, there are still issues pertaining to
scripts such as:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">You want scripts to be installed with <code style="font-size: 12px !important; line-height: 14.1667px !important;">make install</code>, uninstalled
with <code style="font-size: 12px !important; line-height: 14.1667px !important;">make uninstall</code> and distributed with <code style="font-size: 12px !important; line-height: 14.1667px !important;">make dist</code>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You want scripts to get the path in the <code style="font-size: 12px !important; line-height: 14.1667px !important;">#!</code> right. 
</li></ul>
   To let Automake deal with all this, you need to use the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">SCRIPTS</span></samp>¡¯
primitive. 
By listing a file under a ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">SCRIPTS</span></samp>¡¯ primitive assignment, you are telling
Automake that this file needs to be built, and must be allowed to be installed
in a location where executable files are normally installed. Automake by
default will not clean scripts when you invoke the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">clean</span></samp>¡¯ target. 
To force Automake to clean all the scripts, you need to add the following
line to your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     CLEANFILES = $(bin_SCRIPTS)
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">You also need to write your own targets for building the script by hand.

</p><p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">For example:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">hello1.sh</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          # -* bash *-
          echo "Howdy, world!"
          exit 0
</pre>
     <p class="noindent" style="font-size: 16px !important;"><br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">hello2.pl</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          # -* perl *-
          print "Howdy, world!\n";
          exit(0);
</pre>
     <p class="noindent" style="font-size: 16px !important;"><br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          bin_SCRIPTS = hello1 hello2
          CLEANFILES = $(bin_SCRIPTS)
          EXTRA_DIST = hello1.sh hello2.pl
          
          hello1: $(srcdir)/hello1.sh
                rm -f hello1
                echo "#! " $(BASH) &gt; hello1
                cat $(srcdir)/hello1.sh &gt;&gt; hello1
                chmod ugo+x hello1
          
          hello2: $(srcdir)/hello2.pl
                $(PERL) -c hello2.pl
                rm -f hello2
                echo "#! " $(PERL) &gt; hello2
                cat $(srcdir)/hello2.pl &gt;&gt; hello2
                chmod ugo+x hello2
</pre>
     <p class="noindent" style="font-size: 16px !important;"><br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_INIT
          AM_INIT_AUTOMAKE(hello,0.1)
          AC_PATH_PROGS(BASH, bash sh)
          AC_PATH_PROGS(PERL, perl perl5.004 perl5.003 perl5.002 perl5.001 perl5)
          AC_OUTPUT(Makefile)
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></dd></dl>
   Note that in the ¡°source¡± files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello1.sh</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello2.pl</span></samp>
we do not include a line like
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #!/bin/bash
     #!/usr/bin/perl
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Instead we let Autoconf pick up the correct path, and then we insert it
during <code style="font-size: 12px !important; line-height: 14.1667px !important;">make</code>. Since we omit the <code style="font-size: 12px !important; line-height: 14.1667px !important;">#!</code> line, we leave a comment
instead that indicates what kind of file this is.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In the special case of <code style="font-size: 12px !important; line-height: 14.1667px !important;">perl</code> we also invoke
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     perl -c hello2.pl
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This checks the perl script for correct syntax. If your scripting language
supports this feature I suggest that you use it to catch errors at
¡°compile¡± time. 
The <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_PATH_PROGS</code> macro looks for a specific utility and returns
the full path.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If you wish to conform to the GNU coding standards, you may want your script
to support the <code style="font-size: 12px !important; line-height: 14.1667px !important;">--help</code> and <code style="font-size: 12px !important; line-height: 14.1667px !important;">--version</code> flags, and you may want
<code style="font-size: 12px !important; line-height: 14.1667px !important;">--version</code> to pick up the version number from
<code style="font-size: 12px !important; line-height: 14.1667px !important;">AM_INIT_AUTOMAKE</code>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Here's an enhanced hello world scripts:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">version.sh.in</strong>
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          VERSION=@VERSION@
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">version.pl.in</strong>
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          $VERSION="@VERSION@";
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">hello1.sh</strong>
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          # -* bash *-
          function usage
          {
           cat &lt;&lt; EOF
          Usage:
          % hello [OPTION]
          
          Options:
            --help     Print this message
            --version  Print version information
          
          Bug reports to: monica@whitehouse.gov
          EOF
          }
          
          function version
          {
           cat &lt;&lt; EOF
          hello $VERSION - The friendly hello world program
          Copyright (C) 1997 Monica Lewinsky &lt;monica@whitehouse.gov&gt;
          This is free software, and you are welcome to redistribute it and modify it
          under certain conditions. There is ABSOLUTELY NO WARRANTY for this software.
          For legal details see the GNU General Public License.
          EOF
          }
          
          function invalid
          {
           echo "Invalid usage. For help:"
           echo "% hello --help"
          }
          
          # -------------------------
          if test $# -ne 0
          then
            case $1 in
            --help)
              usage
              exit
              ;;
            --version)
              version
              exit
              ;;
            *)
              invalid
              exit
              ;;
          fi
          
          # ------------------------
          echo "Howdy world"
          exit
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">hello2.pl</strong>
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          # -* perl *-
          sub usage
          {
           print &lt;&lt;"EOF";
          Usage:
          % hello [OPTION]
          
          Options:
            --help     Print this message
            --version  Print version information
          
          Bug reports to: monica@whitehouse.gov
          EOF
          exit(1);
          }
          
          sub version
          {
           print &lt;&lt;"EOF";
          hello $VERSION - The friendly hello world program
          Copyright (C) 1997 Monica Lewinsky &lt;monica@whitehouse.gov&gt;
          This is free software, and you are welcome to redistribute it and modify it
          under certain conditions. There is ABSOLUTELY NO WARRANTY for this software.
          For legal details see the GNU General Public License.
          EOF
           exit(1);
          }
          
          sub invalid
          {
           print "Invalid usage. For help:\n";
           print "% hello --help\n";
           exit(1);
          }
          
          # --------------------------
          if ($#ARGV == 0)
          {
           do version() if ($ARGV[0] eq "--version");
           do usage()   if ($ARGV[0] eq "--help");
           do invalid();
          }
          # --------------------------
          print "Howdy world\n";
          exit(0);
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Makefile.am</strong>
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          bin_SCRIPTS = hello1 hello2
          CLEANFILES = $(bin_SCRIPTS)
          EXTRA_DIST = hello1.sh hello2.pl
          
          hello1: $(srcdir)/hello1.sh $(srcdir)/version.sh
                rm -f hello1
                echo "#! " $(BASH) &gt; hello1
                cat $(srcdir)/version.sh $(srcdir)/hello1.sh &gt;&gt; hello1
                chmod ugo+x hello1
          
          hello2: $(srcdir)/hello2.pl $(srcdir)/version.pl
                $(PERL) -c hello2.pl
                rm -f hello2
                echo "#! " $(PERL) &gt; hello2
                cat $(srcdir)/version.pl $(srcdir)/hello2.pl &gt;&gt; hello2
                chmod ugo+x hello2
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">configure.ac</strong>
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_INIT(hello,0.1)
          AM_INIT_AUTOMAKE
          AC_PATH_PROGS(BASH, bash sh)
          AC_PATH_PROGS(PERL, perl perl5.004 perl5.003 perl5.002 perl5.001 perl5)
          AC_CONFIG_FILES([Makefile version.sh version.pl])
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">Basically the idea with this approach is that when <code style="font-size: 12px !important; line-height: 14.1667px !important;">configure</code> calls
<code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_OUTPUT</code> it will substitute the files <code style="font-size: 12px !important; line-height: 14.1667px !important;">version.sh</code> and
<code style="font-size: 12px !important; line-height: 14.1667px !important;">version.pl</code> with the correct version information. Then, during
building, the version files are merged with the scripts. The scripts
themselves need some standard boilerplate code to handle the options. 
I've included that code here as a sample implementation, which I hereby
place in the public domain.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">This approach can be easily generalized with other scripting languages
as well, like Python and Guile.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Emacs-Lisp-with-Automake" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Guile-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Guile with Automake</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Scripts-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Scripts with Automake</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">6.14 Emacs Lisp with Automake</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">If your package requires you to edit a certain type of files, you
might want to write an Emacs editing mode for it. Emacs modes are written
in Emacs LISP, and Emacs LISP source code is written in files that are
suffixed with ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">*.el</span></samp>¡¯. Automake can byte-compile and install Emacs LISP
files using Emacs for you.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To handle Emacs LISP, you need to invoke the
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     AM_PATH_LISPDIR
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">macro in your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp>. In the directory containing the Emacs
LISP files, you must add the following line in your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     lisp_LISP = file1.el file2.el ...
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">where ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">$(lispdir)</span></samp>¡¯ is initialized by ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">AM_PATH_LISPDIR</span></samp>¡¯. 
The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">LISP</span></samp>¡¯ primitive also accepts the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">noinst</span></samp>¡¯ location.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Most Emacs LISP files are meant to be simply compiled and installed. 
Then the user is supposed to add certain invocations in per <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.emacs</span></samp>
to use the features that they provide. However, because Emacs LISP is a full
programming language you might like to write full programs in Emacs LISP,
just like you would in any other language, and have these programs be
accessible from the shell. If the installed file is called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo.el</span></samp>
and it defines a function <code style="font-size: 12px !important; line-height: 14.1667px !important;">main</code> as an entry point, then you can
run it with:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % emacs --batch -l foo -f main
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">In that case, it may be useful to install a wrapper shell script containing
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #!/bin/sh
     emacs --batch -l foo -f main
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">so that the user has a more natural interface to the program. For more
details on handling shell scripts See <a href="#Scripts-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Scripts with Automake</a>. 
Note that it's not necessary for the wrapper program to be a shell script. 
You can have it be a C program, if it should be written in C for some reason.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Here's a tutorial example of how that's done. Start by creating a
directory:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % mkdir hello-0.1
     % cd hello-0.1
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Then create the following files:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.ac</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_INIT
          AM_INIT_AUTOMAKE(hello,0.1)
          AM_PATH_LISPDIR
          AC_OUTPUT(Makefile)
</pre>
     <br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello.el</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (defun main ()
            "Hello world program"
            (princ "Hello world\n"))
</pre>
     <br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello.sh</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #!/bin/sh
          emacs --batch -l hello.el -f main
          exit
</pre>
     <br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          lisp_LISP = hello.el
          EXTRA_DIST = hello.el hello.sh
          bin_SCRIPTS = hello
          CLEANFILES = $(bin_SCRIPTS)
          
          hello: $(srcdir)/hello.sh
          &lt;TAB&gt; rm -f hello
          &lt;TAB&gt; cp $(srcdir)/hello.sh hello
          &lt;TAB&gt; chmod ugo+x hello
</pre>
     </dd></dl>
   Then run the following commands:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % touch NEWS README AUTHORS ChangeLog
     % aclocal
     % autoconf
     % automake -a
     % ./configure
     % make
     % make distcheck
     # make install
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;"><em style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: Discussion</em>

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Guile-with-Automake" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Data-files-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Data files with Automake</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Emacs-Lisp-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Emacs Lisp with Automake</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">6.15 Guile with Automake</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;"><em style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: Do you want to volunteer for this section?</em>

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Data-files-with-Automake" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Guile-with-Automake" style="font-size: 16px !important; line-height: 16.6667px !important;">Guile with Automake</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">6.16 Data files with Automake</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">To install data files, you should use the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">DATA</span></samp>¡¯ primitive
instead of ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">SCRIPTS</span></samp>¡¯. The main difference is that ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">DATA</span></samp>¡¯ will allow
you to install files in data installation locations, whereas ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">SCRIPTS</span></samp>¡¯
will only allow you to install files in executable installation locations.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Normally it is assumed that the files listed in ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">DATA</span></samp>¡¯ are written
by <em style="font-size: 16px !important; line-height: 16.6667px !important;">you</em> and are not generated by a program, therefore they are not
cleaned by default. If you want your data to be generated by a program,
you must provide a target for building the data, and you must also
mention the data file in ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">CLEANFILES</span></samp>¡¯ so that it's cleaned when
you type ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">make clean</span></samp>¡¯. You should of course include the source for
the program and the appropriate lines in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> for building
the program. For example:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     noinst_PROGRAMS = mkdata
     mkdata_SOURCES = mkdata.cc
     
     pkgdata_DATA = thedata
     CLEANFILES = $(pkgdata_DATA)
     
     thedata: mkdata
     &lt;TAB&gt; ./mkdata &gt; thedata
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Note that because the data generation program is a one-time-use program,
we don't want to install it so we list in in ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">noinst_*</span></samp>¡¯.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If your data files are written by hand, then all you need to do
is list them in the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">DATA</span></samp>¡¯ assignment:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     pkgdata_DATA = foo1.dat foo2.dat foo3.dat
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">In general, you should install data files in ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">pkgdata</span></samp>¡¯. However,
if your data files are configuration files or files that the program
modifies as it runs, they should be installed in other directories. 
For more details See <a href="#Installation-standard-directories" style="font-size: 16px !important; line-height: 16.6667px !important;">Installation standard directories</a>.

<!-- ============================================================================ -->
<!-- Copyright (C) 1998 Eleftherios Gkioulekas <lf@amath.washington.edu> -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
<!-- ============================================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Using-Libtool" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Using-Autotoolset" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Autotoolset</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-Automake-and-Autoconf" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Automake and Autoconf</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="chapter" style="font-size: 24px !important; line-height: 25px !important;">7 Using Libtool</h2>

<p style="font-size: 16px !important; line-height: 16.6667px !important;"><em style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: Needs to be written</em>

<!-- ============================================================================ -->
<!-- Copyright (C) 1998 Eleftherios Gkioulekas <lf@amath.washington.edu> -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Using-Autotoolset" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Using-C-and-C_002b_002b-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using C and C++ effectively</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-Libtool" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Libtool</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="chapter" style="font-size: 24px !important; line-height: 25px !important;">8 Using Autotoolset</h2>

<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="1" href="#Introduction-to-Autotoolset" style="font-size: 16px !important; line-height: 16.6667px !important;">Introduction to Autotoolset</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="2" href="#Compiler-configuration-with-the-LF-macros" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiler configuration with the LF macros</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="3" href="#The-features-of-LF_005fCPP_005fPORTABILITY" style="font-size: 16px !important; line-height: 16.6667px !important;">The features of LF_CPP_PORTABILITY</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="4" href="#Writing-portable-C_002b_002b" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing portable C++</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="5" href="#Hello-world-revisited-again" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello world revisited again</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="6" href="#Invoking-acmkdir" style="font-size: 16px !important; line-height: 16.6667px !important;">Invoking acmkdir</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="7" href="#Handling-Embedded-text" style="font-size: 16px !important; line-height: 16.6667px !important;">Handling Embedded text</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="8" href="#Handling-very-deep-packages" style="font-size: 16px !important; line-height: 16.6667px !important;">Handling very deep packages</a>
</li></ul>

<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Introduction-to-Autotoolset" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Compiler-configuration-with-the-LF-macros" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiler configuration with the LF macros</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-Autotoolset" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Autotoolset</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Autotoolset" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Autotoolset</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">8.1 Introduction</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">At the moment Autotoolset distributes the following additional utilities:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl</span></samp>¡¯ utility, for generating copyright notices. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ utility for generating directory trees for new packages
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The <code style="font-size: 12px !important; line-height: 14.1667px !important;">LF</code> macros which introduce mainly support for C++, Fortran and
embedded text. 
</li></ul>
   We have already discussed the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl</span></samp>¡¯ utility in Chapter 1. In this
chapter we will focus mainly on the <code style="font-size: 12px !important; line-height: 14.1667px !important;">LF</code> macros and the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯
utility but we will postpone our discussion of Fortran support until the
next chapter.

<!-- ========================================================================= -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Compiler-configuration-with-the-LF-macros" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#The-features-of-LF_005fCPP_005fPORTABILITY" style="font-size: 16px !important; line-height: 16.6667px !important;">The features of LF_CPP_PORTABILITY</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Introduction-to-Autotoolset" style="font-size: 16px !important; line-height: 16.6667px !important;">Introduction to Autotoolset</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Autotoolset" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Autotoolset</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">8.2 Compiler configuration with the <code style="font-size: 14.0333px !important; line-height: 16.6667px !important;">LF</code> macros</h3>

<p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">In last chapter we explained that a minimal <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> file looks
like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     AC_INIT(package,version)
     AM_CONFIG_HEADER(config.h)
     AM_INIT_AUTOMAKE
     AC_PROG_CXX
     AC_PROG_RANLIB
     AC_CONFIG_FILES([Makefile ...])
     AC_OUTPUT
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">If you are not building libraries, you can omit <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_PROG_RANLIB</code>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Alternatively you can use the following macros that are distributed with
Autotools, and made accessible through the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">aclocal</span></samp>¡¯ utility. All of
them are prefixed with ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">LF</span></samp>¡¯ to distinguish them from the standard
macros:

     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">LF_CONFIGURE_CC</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This macro is equivalent to the following invocation:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_PROG_CC
          AC_PROG_CPP
          AC_AIX
          AC_ISC_POSIX
          AC_MINIX
          AC_HEADER_STDC
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">which is a traditional Autoconf idiom for setting up the C compiler. 
<br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">LF_CONFIGURE_CXX</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This macro calls
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_PROG_CXX
          AC_PROG_CXXCPP
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and then invokes the portability macro:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          LF_CPP_PORTABILITY
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This is the recommended way for configuring your C++ compiler. 
<br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">LF_HOST_TYPE</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This is here mainly because it is required by ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">LF_CONFIGURE_FORTRAN</span></samp>¡¯. 
This macro determines your operating system and defines the C preprocessor
macro ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">YOUR_OS</span></samp>¡¯ with the answer. You can use this in your program for
spiffiness purposes such as when the program identifies itself at the
user's request, or during initialization. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">LF_CPP_PORTABILITY</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This macro allows you to make your ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">C++</span></samp>¡¯ code more portable and
a little nicer.
          <ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">It detects whether your compiler supports ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">bool</span></samp>¡¯. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">It checks whether your compiler deals with for loops correctly. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">At the users option, it introduces nice and powerful assertions. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">It defines syntactic sugar, that I am personally addicted to
</li></ul>
     If you must call this macro, do so <em style="font-size: 16px !important; line-height: 16.6667px !important;">after</em> calling
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">LF_CONFIGURE_CXX</span></samp>¡¯. We describe the features in more detail in the next
section. To take advantage of these features, all you have to do is
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #include &lt;config.h&gt;
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">In the past it used to be necessary to have to include a file called
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">cpp.h</span></samp>. I've sent this file straight to hell. 
<br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">LF_SET_WARNINGS</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This macro enables you to activate warnings at configure time. If called, then
the user can request warnings by passing the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">--with-warnings</span></samp>¡¯ flag
to the compiler like this:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          $ configure ... --with-warnings ...
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Warnings can help you find out many bugs, as well as help you improve your
coding habits. On the other hand, in many cases, many of these warnings are
false alarms, which is why the default behaviour of the compiler is to not
show them to you. You are probably interested in warnings if you are
the developer, or a paranoid end-user. 
</p></dd></dl>
   The minimal recommended <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> file for a pure C++ project is:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     AC_INIT(package,version)
     AM_CONFIG_HEADER(config.h)
     AM_INIT_AUTOMAKE
     LF_CONFIGURE_CXX
     AC_PROG_RANLIB
     AC_CONFIG_FILES([Makefile ...])
     AC_OUTPUT
     
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">A full-blown <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> file for projects that mix Fortran and
C++ (and may need the C compiler also if using ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</span></samp>¡¯) invokes all
of the above macros:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     AC_INIT(package,version)
     AM_INIT_AUTOMAKE
     LF_CANONICAL_HOST
     LF_CONFIGURE_CC
     LF_CONFIGURE_CXX
     LF_CONFIGURE_FORTRAN
     LF_SET_WARNINGS
     AC_PROG_RANLIB
     AC_CONFIG_SUBDIRS(fortran/f2c fortran/libf2c)
     AC_CONFIG_FILES([Makefile ...])
     AC_OUTPUT
     
</pre>
   <p class="noindent" style="font-size: 16px !important;"><!-- ========================================================================== -->

</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="The-features-of-LF_CPP_PORTABILITY" style="font-size: 16px !important;"></a>
<a name="The-features-of-LF_005fCPP_005fPORTABILITY" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Writing-portable-C_002b_002b" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing portable C++</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Compiler-configuration-with-the-LF-macros" style="font-size: 16px !important; line-height: 16.6667px !important;">Compiler configuration with the LF macros</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Autotoolset" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Autotoolset</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">8.3 The features of  ¡®<samp style="font-size: 14.0333px !important; line-height: 16.6667px !important;"><span class="samp" style="font-size: 14.0333px !important; line-height: 16.6667px !important;">LF_CPP_PORTABILITY</span></samp>¡¯</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">In order for <code style="font-size: 12px !important; line-height: 14.1667px !important;">LF_CPP_PORTABILITY</code> to work correctly you need to append
certain things at the bottom of your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</span></samp>. This is done for you
automatically by <code style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</code>. 
When the <code style="font-size: 12px !important; line-height: 14.1667px !important;">LF_CPP_PORTABILITY</code> macro is invoked by <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>
then the following portability problems are checked:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">The bool data type</strong>:
It is rather unfortunate that most proprietary compilers don't have such
a beautiful and handy feature.   If the configure
script detects that you have no bool, then it defines the macro
<code style="font-size: 12px !important; line-height: 14.1667px !important;">CXX_HAS_NO_BOOL</code>. It is possible to emulate <code style="font-size: 12px !important; line-height: 14.1667px !important;">bool</code> with the
following C preprocessor directives:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #ifdef CXX_HAS_NO_BOOL
          #define bool int
          #define true 1
          #define false 0
          #endif
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">To make your code portable to compilers that don't support
bool, through this workaround, you must follow one rule: never
overload your functions in a way in which the only distinguishing feature is
<code style="font-size: 12px !important; line-height: 14.1667px !important;">bool</code> vs <code style="font-size: 12px !important; line-height: 14.1667px !important;">int</code>. 
This workaround is included in the default <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</span></samp> after
<code style="font-size: 12px !important; line-height: 14.1667px !important;">@BOTTOM@</code> that gets installed by <code style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</code>. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Incorrect for-loop scoping</strong>:
Another obnoxious bug with many compilers is that they refuse to compile
the following code:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #include &lt;iostream.h&gt;
          main()
          {
           for (int i=0;i&lt;10;i++) { }
           for (int i=0;i&lt;10;i++) { }
          }
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This is legal C++ and the variable <code style="font-size: 12px !important; line-height: 14.1667px !important;">i</code> is supposed to have scope only
inside the for-loop braces and the parentheses. Unfortunately, most C++
compilers use an obsolete version of the standard's draft in which the
scope of <code style="font-size: 12px !important; line-height: 14.1667px !important;">i</code> is the entire <code style="font-size: 12px !important; line-height: 14.1667px !important;">main</code> in this example. 
The workaround we use is as follows:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #ifdef CXX_HAS_BUGGY_FOR_LOOPS
          #define for if(1) for
          #endif
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">By nesting the forloop inside an if-statement, the variable <code style="font-size: 12px !important; line-height: 14.1667px !important;">i</code> is
assigned the correct scope. Now if your if-statement scoping is also broken
then you really need to get another compiler. 
The macro <code style="font-size: 12px !important; line-height: 14.1667px !important;">CXX_HAS_BUGGY_FOR_LOOPS</code> is defined for you if appropriate,
and the code for the work-around is included with the
default <code style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</code>. 
</p></li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">In addition to these workarounds, the following additional features are
introduced at the end of the default <code style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</code>. The features are
enabled only if your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> calls <code style="font-size: 12px !important; line-height: 14.1667px !important;">LF_CPP_PORTABILITY</code>.
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Looping macros:</strong>
The macro <code style="font-size: 12px !important; line-height: 14.1667px !important;">loop</code> is defined such that
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          loop(i,a,b)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">is equivalent
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          for (int i = a; i &lt;= b; i++)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This is syntactic sugar that makes it easier on the hand to write
nested loops like:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          int Ni,Nj,Nk;
          loop(i,0,Ni) loop(j,0,Nj) loop(k,0,Nk) { ... }
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">minimizing the probability of making a spelling bug. 
If you need to do more unusual looping you can use one of the following
macros:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          inverse_loop(i,a,b)   &lt;--&gt; for (int i = a; i &gt;= b; i--)
          integer_loop(i,a,b,s) &lt;--&gt; for (int i = a; i &lt;= b; i += s)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This feature depends on having correct scoping in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">for</span></samp> which
fortunately is easily taken care of. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Class protection levels:</strong>
The following macros are defined:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #define pub public:
          #define pro protected:
          #define pri private:
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Now you can declare a class prototype in a Java-like style like this:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          class foo
          {
           pri double a,b;
           pub double c,d;
          
           pub foo();
           pub virtual ~foo();
          
           pri void method1(void);
           pub void method2(void);
          };
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Personally I find this notation more lucid than the standard C++ syntax
because this way I can see the protection level of each variable and
method without having to possibly scroll up to see what it is. Also,
it is less bug-prone this way. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">The Pi</strong>:
Every mathematician would like to know what pi is, so this is as good a
place as any to throw it in:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          const double pi = 3.14159265358979324;
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Assert</strong>:
The idea behind <code style="font-size: 12px !important; line-height: 14.1667px !important;">assert</code> is simple. Suppose that at a certain point
in your code, you expect two variables to be equal. If this expectation
is a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">precondition</dfn> that must be satisfied in order for the subsequent
code to execute correctly, you must <code style="font-size: 12px !important; line-height: 14.1667px !important;">assert</code> it with a statement
like this:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          assert(var1 == var2);
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">In general <code style="font-size: 12px !important; line-height: 14.1667px !important;">assert</code> takes as argument a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">boolean expression</dfn>. 
If the boolean expression is true, execution continues. Otherwise the
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">abort</span></samp>¡¯ system call is invoked and the program execution is stopped. 
If a bug prevents the precondition from being true, then you
can trace the bug at the point where the precondition breaks down instead
of further down in execution or not at all. The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">assert</span></samp>¡¯ call is
implemented as a C preprocessor macro, so it can be enabled or disabled
at will.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">One way to enable assertions is to include <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">assert.h</span></samp>.
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #include &lt;assert.h&gt;
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Then it's possible to disable them by defining the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">NDEBUG</span></samp>¡¯ macro. 
Alternatively, because it is easy to provide our own assert, if your
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> invokes ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">LF_CPP_PORTABILITY</span></samp>¡¯ then ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">assert</span></samp>¡¯
will be conditionally defined for you in the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">config.h</span></samp> file. 
By default, the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp>¡¯ script will enable assertions. You can
disable assertions at configure-time like this:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % configure ... --disable-assert ...
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">During debugging and testing it is a good idea to leave assertions enabled. 
However, for production runs it's best to disable them.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If your program crashes at an assertion, then the first thing you should
do is to find out where the error happens. To do this, run the program
under the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">gdb</span></samp> debugger. First invoke the debugger:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % gdb
          ...copyright notice...
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Then load the executable and set a breakpoint at the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">abort</span></samp>¡¯ system
call:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (gdb) file "executable"
          (gdb) break abort
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Now run the program:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (gdb) run
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Instead of crashing, under the debugger the program will be paused when the
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">abort</span></samp>¡¯ system call is invoked, and you will get back the debugger
prompt. Now type:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          (gdb) where
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">to see where the crash happened. You can use the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">print</span></samp>¡¯ command to
look at the contents of variables and you can use the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">up</span></samp>¡¯ and
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">down</span></samp>¡¯ commands to navigate the stack. For more information, see
the GDB documentation or type ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">help</span></samp>¡¯ at the prompt of gdb.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Another suggestion is to never call the <code style="font-size: 12px !important; line-height: 14.1667px !important;">abort</code> system call directly. 
Instead, please do this:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          assert(false);
          exit(1);
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This way if assertions are enabled, the program will stop and the stack will
be retained. Otherwise the program will simply exit.

   </p></li></ul>

<!-- =========================================================================== -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Writing-portable-C++" style="font-size: 16px !important;"></a>
<a name="Writing-portable-C_002b_002b" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Hello-world-revisited-again" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello world revisited again</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#The-features-of-LF_005fCPP_005fPORTABILITY" style="font-size: 16px !important; line-height: 16.6667px !important;">The features of LF_CPP_PORTABILITY</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Autotoolset" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Autotoolset</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">8.4 Writing portable C++</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">The C++ language has been standardized very recently. As a result, not all
compilers fully support all the features that the ANSI C++ standard requires,
including the <code style="font-size: 12px !important; line-height: 14.1667px !important;">g++</code> compiler itself. Some of the problems commonly
encountered, such as incorrect scoping in for-loops and lack of the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">bool</code> data type can be easily worked around. In this section we
give some tips for avoiding more portability problems. I welcome people on
the net reading this to email me their tips, to be included in this
tutorial.
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">The following code, as much as it may seem reasonable is not correct:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          int n = 10;
          double **foo;
          foo = new (double *)[i];
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The <code style="font-size: 12px !important; line-height: 14.1667px !important;">g++</code> compiler will parse this and do the right thing, but other
compilers are more picky. The correct way to do it is:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          int n = 10;
          double **foo;
          foo = new double * [i];
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Do not use exceptions, RTTI and STL. Yes, they can make your code more spiffy,
but almost certainly you can live without them, and save yourself serious
portability pains. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Do not use templates, unless it is absolutely necessary. If you believe it
is possible to implement an idea without templates, then do it without
templates. If you do need to use templates, try to limit the amount of
features you invoke to the absolute minimum. In particular:
          <ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">A class can have a template function as a member function. Unfortunately this
is not supported by <code style="font-size: 12px !important; line-height: 14.1667px !important;">g++</code>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Some people discovered that by using templates with types that are templates
of types that are templates of types that are templates .... recursively,
they can force the C++ compiler to do computation at compile time and generate
C++ code that is highly optimized. Problems in linear algebra, FFTs and such
have been implemented in this manner, and the performance of the corresponding
C++ code beat out Fortran implementations. This is a great idea of the future,
but at the moment many compilers, including g++ can't properly cope with
such code. For now don't make templates of templates of things. Only make
templates of things. 
</li></ul>
     </li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: <em style="font-size: 16px !important; line-height: 16.6667px !important;">I need to add some stuff here.</em>

<!-- =========================================================================== -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Hello-world-revisited-again" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Invoking-acmkdir" style="font-size: 16px !important; line-height: 16.6667px !important;">Invoking acmkdir</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Writing-portable-C_002b_002b" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing portable C++</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Autotoolset" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Autotoolset</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">8.5 Hello world revisited again</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Putting all of this together, we will now show you how to create a super
Hello World package, using the <code style="font-size: 12px !important; line-height: 14.1667px !important;">LF</code> macros and the utilities that
are distributed with the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autotoolset</span></samp>¡¯ distribution.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The first step is to build a directory tree for the new project. Instead of
doing it by hand, use the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ utility. Type:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % acmkdir hello
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ prompts you with the current directory pathname. Make
sure that this is indeed the directory where you want to install the
directory tree for the new package. You will be prompted for some information
about the newly created package. 
When you are done, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ will ask you if you really want to go
for it. Say ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">y</span></samp>¡¯. Then ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ will do the following:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">Create the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello-0.1</span></samp> directory and the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">doc</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">m4</span></samp>
and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src</span></samp> subdirectories. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Generate the following <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_INIT
          AM_CONFIG_HEADER(config.h)
          AM_INIT_AUTOMAKE(test,0.1)
          LF_HOST_TYPE
          LF_CONFIGURE_CXX
          LF_SET_WARNINGS
          AC_PROG_RANLIB
          AC_OUTPUT(Makefile doc/Makefile m4/Makefile src/Makefile)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">You can edit this and customize it to your needs. More specifically, you
will need to update the version number here every time to you cut a new
distribution. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Place boilerplate <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> files on the toplevel directory as well
as the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">doc</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">m4</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src</span></samp> subdirectories. The toplevel
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> contains:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          EXTRA_DIST = reconf configure
          SUBDIRS = m4 doc src
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The ones in the <code style="font-size: 12px !important; line-height: 14.1667px !important;">src</code> and <code style="font-size: 12px !important; line-height: 14.1667px !important;">doc</code> subdirectories are empty. The
one in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">m4</span></samp> contains a template <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> which you should
edit if you want to add new macros. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Install the GPL in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">COPYING</span></samp> and a standard <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">INSTALL</span></samp> file which
you can customize. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Create the files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">AUTHORS</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">NEWS</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">README</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">THANKS</span></samp> and
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">ChangeLog</span></samp> and place some default content in them which you should
edit further. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Create a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">reconf</span></samp> script for reconfiguring your package every time
you modify the contents of the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">m4</span></samp> subdirectory and need to rebuild
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> and the makefiles:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #!/bin/sh
          rm -f config.cache
          rm -f acconfig.h
          aclocal -I m4
          autoconf
          acconfig
          autoheader
          automake -a
          exit
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The makes sure that all the utilities are invoked, and in the right order. 
Before ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ exits, it will call the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">reconf</span></samp>¡¯ script for
you once to set things up. 
</p></li></ul>
   It must be obvious that having to do these tasks manually for every package
you write can get to be tiring. With <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp> you can slap together
all this grunt-work in a matter of seconds.

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">Now enter the directory <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello-0.1/src</span></samp> and start coding:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % cd hello-0.1/src
     % gpl -cc hello.cc
     % vi hello.cc
     % vi Makefile.am
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This time we will use the following modified hello world program:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #ifdef HAVE_CONFIG_H
     #include &lt;config.h&gt;
     #endif
     
     #include &lt;iostream.h&gt;
     
     main()
     {
      cout &lt;&lt; "Welcome to " &lt;&lt; PACKAGE &lt;&lt; " version " &lt;&lt; VERSION;
      cout &lt;&lt; " for " &lt;&lt; YOUR_OS &lt;&lt; endl;
      cout &lt;&lt; "Hello World!" &lt;&lt; endl;
     }
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and for <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> the same old thing:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     bin_PROGRAMS = hello
     hello_SOURCES = hello.cc
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Now back to the toplevel directory:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % cd ..
     % reconf
     % configure
     % make
     % src/hello
     Welcome to test version 0.1 for i486-pc-linux-gnulibc1
     Hello World!
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Note that by using the special macros <code style="font-size: 12px !important; line-height: 14.1667px !important;">PACKAGE</code>, <code style="font-size: 12px !important; line-height: 14.1667px !important;">VERSION</code>,
<code style="font-size: 12px !important; line-height: 14.1667px !important;">YOUR_OS</code> the program can identify itself, its version number and the
operating system for which it was compiled. The <code style="font-size: 12px !important; line-height: 14.1667px !important;">PACKAGE</code> and
<code style="font-size: 12px !important; line-height: 14.1667px !important;">VERSION</code> are defined by <code style="font-size: 12px !important; line-height: 14.1667px !important;">AM_INIT_AUTOMAKE</code> and
<code style="font-size: 12px !important; line-height: 14.1667px !important;">YOUR_OS</code> by <code style="font-size: 12px !important; line-height: 14.1667px !important;">LF_HOST_TYPE</code>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Now you can experiment with the various options that configure offers. 
You can do:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % make distclean
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and reconfigure the package with one of the following variations in options:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % configure --disable-assert
     % configure --with-warnings
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">or a combination of the above. You can also build a distribution of your
hello world and feel cool about yourself:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % make distcheck
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The important thing is that you can write extensive programs like this
and stay focused on writing code instead of maintaining stupid header file,
scripts, makefiles and all that.

</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Invoking-acmkdir" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Handling-Embedded-text" style="font-size: 16px !important; line-height: 16.6667px !important;">Handling Embedded text</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Hello-world-revisited-again" style="font-size: 16px !important; line-height: 16.6667px !important;">Hello world revisited again</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Autotoolset" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Autotoolset</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">8.6 Invoking ¡®<samp style="font-size: 14.0333px !important; line-height: 16.6667px !important;"><span class="samp" style="font-size: 14.0333px !important; line-height: 16.6667px !important;">acmkdir</span></samp>¡¯</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ utility can be invoked in the simple manner that we
showed in the last chapter to prepare the directory tree for writing
C++ code. Alternatively, it can be instructed to create directory
trees for Fortran/C++ code as well as documentation directories.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In general, you invoke ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ in the following manner:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % acmkdir [OPTIONS] "dirname"
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">If you are creating a toplevel directory, then everything will appear
under ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">dirname-0.1</span></samp>¡¯. Otherwise, the name ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">dirname</span></samp>¡¯ will be used
instead.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ supports the following options:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">--help</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Print a short message reminding the usage of the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ command. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">--version</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Print the version information and copyright notice for ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-latex</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Instruct ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ to create a <code style="font-size: 12px !important; line-height: 14.1667px !important;">latex</code> documentation directory
(see <a href="#Writing-documentation-with-LaTeX" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing documentation with LaTeX</a>). 
If your package will have more than
one documentation texts, you usually want to invoke this under the
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">doc</span></samp>¡¯ subdirectory:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % cd doc
          % acmkdir -latex tutorial
          % acmkdir -latex manual
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Of course, the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> under the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">doc</span></samp> directory will need
to refer to these subdirectories with a <code style="font-size: 12px !important; line-height: 14.1667px !important;">SUBDIRS</code> entry:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          SUBDIRS = tutorial manual
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Alternatively, if you decide to use the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">doc</span></samp> directory itself
for documentation (and you are massively sure about this), then you can
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % rm -rf doc
          % acmkdir -latex doc
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">You should use this feature if you wish to typeset your documentation
using LaTeX instead of Texinfo. 
The disadvantage of using ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">latex</span></samp>¡¯ for your documentation
is that you can only produce a printed book; you can not also generate
on-line documentation. The advantage is that you can typeset very complex
mathematics, something which you can not do under Texinfo since it only
uses plain TeX. If you are documenting mathematical software, you may
prefer to write the documentation in Latex. Autotoolset will provide you
with LaTeX macros to make your printed documentation look like Texinfo
printed documentation. 
<br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-t, --type=TYPE</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Instruct ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ to create a top-level directory of type <code style="font-size: 12px !important; line-height: 14.1667px !important;">TYPE</code>. 
The types available are: <code style="font-size: 12px !important; line-height: 14.1667px !important;">default</code>, <code style="font-size: 12px !important; line-height: 14.1667px !important;">traditional</code>,
<code style="font-size: 12px !important; line-height: 14.1667px !important;">fortran</code>. Eventually I may implement two additional types:
<code style="font-size: 12px !important; line-height: 14.1667px !important;">f77</code>, <code style="font-size: 12px !important; line-height: 14.1667px !important;">f90</code>. 
</dd></dl>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">Now, a brief description of these toplevel types:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">default</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This is the default type of toplevel directory. It is intended for C++
programs and uses the <code style="font-size: 12px !important; line-height: 14.1667px !important;">LF</code> macros installed by Autotoolset. 
The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</span></samp> file is automagically generated and a custom
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">INSTALL</span></samp> file is installed. The defaults reflect my own personal
habits. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">traditional</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This is much closer to the FSF default habits. The default language is C,
the traditional Autoconf macros are used and the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</span></samp> file
is not automatically generated, except for adding the lines
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #undef PACKAGE
          #undef VERSION
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">which are required by Automake. 
<br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">fortran</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This is a rather complicated type. It is intended for programs that mix
C++ and Fortran. It installs an appropriate <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>, and
creates an entire directory under the toplevel directory called
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">fortran</span></samp>. In that directory, there's installed a copy of the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</code> translator. The software is configured such that if a Fortran
compiler is not available, <code style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</code> is built instead, and then used
to compile the Fortran code. We will explain all about Fortran in the
next chapter. 
</dd></dl>

<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Handling-Embedded-text" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Handling-very-deep-packages" style="font-size: 16px !important; line-height: 16.6667px !important;">Handling very deep packages</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Invoking-acmkdir" style="font-size: 16px !important; line-height: 16.6667px !important;">Invoking acmkdir</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Autotoolset" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Autotoolset</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">8.7 Handling Embedded text</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">In some cases, we want to embed text to the executable file of an application. 
This may be on-line help pages, or it may be a script of some sort that we
intend to execute by an interpreter library that we are linking with, like
Guile or Tcl. Whatever the reason, if we want to compile the application as
a stand-alone executable, it is necessary to embed the text in the source
code. Autotoolset provides with the build tools necessary to do this painlessly.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">As a tutorial example, we will write a simple program that prints the contents
of the GNU General Public License. First create the directory tree for
the program:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % acmkdir copyleft
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Enter the directory and create a copy of the <code style="font-size: 12px !important; line-height: 14.1667px !important;">txtc</code> compiler:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % cd copyleft-0.1
     % mktxtc
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Then edit the file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> and add a call to the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">LF_PROG_TXTC</code> macro. This macro depends on
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     AC_PROG_CC
     AC_PROG_AWK
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">so make sure that these are invoked also. Finally add <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">txtc.sh</span></samp> to
your <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_OUTPUT</code>. 
The end-result should look like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     AC_INIT(reconf)
     AM_CONFIG_HEADER(config.h)
     AM_INIT_AUTOMAKE(copyleft,0.1)
     LF_HOST_TYPE
     LF_CONFIGURE_CC
     LF_CONFIGURE_CXX
     LF_SET_OPTIMIZATION
     LF_SET_WARNINGS
     AC_PROG_RANLIB
     AC_PROG_AWK
     LF_PROG_TXTC
     AC_OUTPUT(Makefile txtc.sh doc/Makefile m4/Makefile src/Makefile)
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Then, enter the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src</span></samp> directory and create the following files:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % cd src
     % gpl -l gpl.txt
     % gpl -cc gpl.h
     % gpl -cc copyleft.cc
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl.txt</span></samp> file is the text that we want to print. You can substitute
it with any text you want. This file will be compiled into <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl.o</span></samp>
during the build process. The <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl.h</span></samp> file is a header file that gives
access to the symbols defined by <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl.o</span></samp>. The file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">copyleft.cc</span></samp>
is where the <code style="font-size: 12px !important; line-height: 14.1667px !important;">main</code> will be written.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Next, add content to these files as follows:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">gpl.h</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          extern int gpl_txt_length;
          extern char *gpl_txt[];
</pre>
     <p class="noindent" style="font-size: 16px !important;"><br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">copyleft.cc</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #ifdef HAVE_CONFIG_H
          #include &lt;config.h&gt;
          #endif
          
          #include &lt;iostream.h&gt;
          #include "gpl.h"
          
          main()
          {
           loop(i,1,gpl_txt_length)
           { cout &lt;&lt; gpl_txt[i] &lt;&lt; endl; }
          }
</pre>
     <p class="noindent" style="font-size: 16px !important;"><br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Makefile.am</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          SUFFIXES = .txt
          .txt.o:
                 $(TXTC) $&lt;
          
          bin_PROGRAMS = copyleft
          foo_SOURCES = copyleft.cc gpl.h gpl.txt
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></dd></dl>
   and now you're set to build. Go back to the toplevel directory and go for it:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     $ cd ..
     $ reconf
     $ configure
     $ make
     $ src/copyleft | less
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">To verify that this works properly, do the following:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     $ cd src
     $ copyleft &gt; copyleft.out
     $ diff gpl.txt copyleft.out
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The two files should be identical. 
Finally, convince yourself that you can make a distribution:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     $ make distcheck
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and there you are.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Note that in general the text file, as encoded by the text compiler, will
not be always identical to the original. There is one and only one modification
being made: If any line has any blank spaces at the end, they are trimmed off. 
This feature was introduced to deal with a bug in the Tcl interpreter, and
it is in general a good idea since it conserves a few bytes, it never hurts,
and additional whitespace at the end of a line shouldn't really be there.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">This magic is put together from many different directions. It begins with
the <code style="font-size: 12px !important; line-height: 14.1667px !important;">LF_PROG_TXTC</code> macro:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">LF_PROG_TXTC</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This macro will define the variable <code style="font-size: 12px !important; line-height: 14.1667px !important;">TXTC</code> to point to a Text-to-C
compiler. To create a copy of the compiler at the toplevel directory of your
source code, use the <code style="font-size: 12px !important; line-height: 14.1667px !important;">mktxtc</code> command:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % mktxtc
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The compiler is implemented as a shell script, and it depends on <code style="font-size: 12px !important; line-height: 14.1667px !important;">sed</code>,
<code style="font-size: 12px !important; line-height: 14.1667px !important;">awk</code> and the C compiler, so you should call the following two macros
before invoking <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_PROG_TXTC</code>:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_PROG_CC
          AC_PROG_AWK
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The compiler is intended to be used as follows:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          $(TXTC) text1.txt text2.txt text3.txt ...
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">such that given the files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">text1.txt</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">text2.txt</span></samp>, etc. 
object files <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">text1.o</span></samp>, <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">text2.o</span></samp>, etc, are
generated that contains the text from these files. 
</p></dd></dl>
   From the Automake point of view, you need to add the following two lines
to Automake:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     SUFFIXES = .txt
     .txt.o:
             $(TXTC) $&lt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">assuming that your text files will end in the <code style="font-size: 12px !important; line-height: 14.1667px !important;">.txt</code> suffix. The first
line informs Automake that there exist source files using non-standard
suffixes. Then we describe, in terms of an abstract Makefile rule, how to
build an object file from these non-standard suffixes. Recall the use of
the symbol <code style="font-size: 12px !important; line-height: 14.1667px !important;">$&lt;</code>. Also note that it is not necessary
to use <code style="font-size: 12px !important; line-height: 14.1667px !important;">$(srcdir)</code> on <code style="font-size: 12px !important; line-height: 14.1667px !important;">$&lt;</code> for VPATH builds. 
If you embed more than one type of files, then you may want to use more
than one suffixes. For example, you may have <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.hlp</span></samp> files containing
online help and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">.scm</span></samp> files containing Guile code. Then you
want to write a rule for each suffix as follows:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     SUFFIXES = .hlp .scm
     .hlp.o:
             $(TXTC) $&lt;
     .scm.o:
             $(TXTC) $&lt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">It is important to put these lines before mentioning any <code style="font-size: 12px !important; line-height: 14.1667px !important;">SOURCES</code>
assignments. Automake is smart enough to parse these abstract makefile
rules and recognize that files ending in these suffixes are valid source
code that can be built to object code. This allows you to simply list
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">gpl.txt</span></samp> with the other source files in the <code style="font-size: 12px !important; line-height: 14.1667px !important;">SOURCES</code> assignment:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     copyleft_SOURCES = copyleft.cc gpl.h gpl.txt
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">In order for this to work however, Automake must be able to see your
abstract rules first.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">When you ¡°compile¡± a text file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo.txt</span></samp> this makes an object file
that defines the following two symbols:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     int foo_txt_length;
     char *foo_txt[];
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Note that the dot characters are converted into underscores. To make these
symbols accessible, you need to define an appropriate header file with
the following general form:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     extern int foo_txt_length;
     extern char *foo_txt[];
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">When you include this header file into your other C or C++ files then:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">You can obtain the filename containing the original text from
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          foo_txt[0];
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and use it to print diagnostic messages. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You can obtain the text itself line by line:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          char *foo_txt[1];   -&gt; first line
          char *foo_txt[2];   -&gt; second line
          ...
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The last line is set to NULL and <code style="font-size: 12px !important; line-height: 14.1667px !important;">foo_txt_length</code> is defined such that
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          char *foo_txt[foo_txt_length+1] == NULL
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The last line of the text is:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          char *foo_txt[foo_txt_length];
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">You can use a <code style="font-size: 12px !important; line-height: 14.1667px !important;">for</code> loop (or the <code style="font-size: 12px !important; line-height: 14.1667px !important;">loop</code> macro defined by
LF_CPP_PORTABILITY)
together with <code style="font-size: 12px !important; line-height: 14.1667px !important;">foo_txt_length</code> to loop over the entire text, or you can
exploit the fact that the last line points to <code style="font-size: 12px !important; line-height: 14.1667px !important;">NULL</code> and do a
<code style="font-size: 12px !important; line-height: 14.1667px !important;">while</code> loop. 
</p></li></ul>
   and that's all there is to it.

<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Handling-very-deep-packages" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Handling-Embedded-text" style="font-size: 16px !important; line-height: 16.6667px !important;">Handling Embedded text</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Autotoolset" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Autotoolset</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">8.8 Handling very deep packages</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">When making a package, you can organize it as a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">flat</dfn> package or
a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">deep</dfn> package. In a flat package, all the source files are placed
under <code style="font-size: 12px !important; line-height: 14.1667px !important;">src</code> without any subdirectory structure. In a deep package,
libraries and groups of executables are separated by a subdirectory
structure. The perennial problem with deep packages is dealing with
interdirectory dependencies. What do you do if to compile one library you
need header files from another library in another directory? What do you do if
to compile the test suite of your library you need to link in another library
that has just been compiled in a different directory?

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">One approach is to just put all these interdependent things in the same
directory. This is not very unreasonable since the <code style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</code>
can document quite thoroughly where each file belongs, in case you need to
split them up in the future. On the other hand, this solution becomes less
and less preferable as your project grows. You may not want to clutter
a directory with source code for too many different things. What do you
do then?

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The second approach is to be careful about these dependencies and just
invoke the necessary features of Automake to make everything work out.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">For <code style="font-size: 12px !important; line-height: 14.1667px !important;">*.a</code> files (library binaries), the recommended thing to do
is to link them by giving the full relative pathname. Doing that allows
Automake to work out the dependencies correctly across multiple directories. 
It also allows you to easily upgrade to shared libraries with Libtool. 
To retain some flexibility it may be best to list these interdirectory
link sequences in variables and then use these variables. This way, when you
move things around you minimize the amount of editing you have to do. 
In fact, if all you need these library binaries for is to build a test suite
you can simply assign them to <code style="font-size: 12px !important; line-height: 14.1667px !important;">LDFLAGS</code>. To make these assignments
more uniform, you may want to start your pathnames with <code style="font-size: 12px !important; line-height: 14.1667px !important;">$(top_builddir)</code>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">For <code style="font-size: 12px !important; line-height: 14.1667px !important;">*.h</code> files (header files), you can include an
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     INCLUDES = -I../dir1 -I../dir2 -I../dir3 ...
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">assignment on every <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> of every directory level listing
the directories that contain include files that you want to use. If your
directory tree is very complicated, you may want to make these assignments
more uniform by starting your pathnames from <code style="font-size: 12px !important; line-height: 14.1667px !important;">$(top_srcdir)</code>. 
In your source code, you should use the syntax
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #include "foo.h"
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">for include files in the current directory and
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #include &lt;foo.h&gt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">for include files in other directories.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">There is a better third approach, provided by Autotoolset, but it only
applies to include files. There is nothing more that can be done with
library binaries; you simply have to give the path. But with header files,
it is possible to arrange at configure-time that all header files are
symlinked under the directory <code style="font-size: 12px !important; line-height: 14.1667px !important;">$(top_builddir)/include</code>. Then you will
only need to list one directory instead of many.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Autotoolset provides two Autoconf macros: <code style="font-size: 12px !important; line-height: 14.1667px !important;">LF_LINK_HEADERS</code> and
<code style="font-size: 12px !important; line-height: 14.1667px !important;">LF_SET_INCLUDES</code>, to handle this symlinking.
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">LF_LINK_HEADERS</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This macro links the public header files under a certain set of directories
under an include directory from the toplevel. A simple way to invoke this
macro is by listing the set of directories that contain public header files:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          LF_LINK_HEADERS(src/dir1 src/dir2 src/dir3 ... src/dirN)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">When this macro is invoked for the first time, the directory
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">$(top_srcdir)/include</span></samp> is erased. Then for each directory
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src/dirK</span></samp> listed, we look for the file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src/dirK/Headers</span></samp> and
link the public header files mentioned in that file under
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">$(top_srcdir)/include</span></samp>. The link will be either symbolic or hard,
depending on the capabilities of your operating system. If possible,
a symbolic link will be preferred.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">You can invoke the same macro by passing an optional argument that specifies
a directory name. For example:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          LF_LINK_HEADERS(src/dir1 src/dir2 ... src/dirN , foo)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Then the symlinks will be created under the
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">$(top_srcdir)/include/foo</span></samp> directory instead. This can be significantly
useful if you have very many header files to install and you'd like to
call them something like:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #include &lt;foo/file1.h&gt;
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">During compilation, when you try to
<br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">LF_SET_INCLUDES</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This macro will cause the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> variable
<code style="font-size: 12px !important; line-height: 14.1667px !important;">$(default_includes)</code> to contain the correct collection of <code style="font-size: 12px !important; line-height: 14.1667px !important;">-I</code>
flags, such that the include files are accessible. If you invoke it with
no arguments as
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          LF_SET_INCLUDES
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">then the following assignment will take place:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          default_includes = -I$(prefix) -I$(top_srcdir)/include
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">If you invoke it with arguments:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          LF_SET_INCLUDES(dir1 dir2 ... dirN)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">then the following assignment will take place instead:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          default_includes = -I$(prefix) -I$(top_srcdir)/include/dir1 \
                             -I$(top_srcdir)/include/dir2 ...         \
                             -I$(top_srcdir)/include/dirN
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">You may use this variable as part of your <code style="font-size: 12px !important; line-height: 14.1667px !important;">INCLUDES</code> assignment
in your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> like this:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          INCLUDES = $(default_includes)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">If your distribution has a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">lib</span></samp> directory, in which you install
various codelets and header files, then a path to that library is
added to <code style="font-size: 12px !important; line-height: 14.1667px !important;">default_includes</code> also. In that case, you have one
of the following:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          default_includes = -I$(prefix) -I$(top_srcdir)/lib -I$(top_srcdir)/include
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">or
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          default_includes = -I$(prefix) -I$(top_srcdir)/lib \
                             -I$(top_srcdir)/include/dir1 ... \
                             -I$)top_srcdir)/include/dirN
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></dd></dl>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">A typical use of this system involves invoking
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     LF_LINK_HEADERS(src/dir1 src/dir2 ... src/dirN)
     LF_SET_INCLUDES
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">in your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> and adding the following two lines in your
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     INCLUDES = $(default_includes)
     EXTRA_DIST = Headers
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The variable <code style="font-size: 12px !important; line-height: 14.1667px !important;">$(default_includes)</code> will be assigned by the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">configure</code> script to point to the Right Thing. You will also
need to include a file called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Headers</span></samp> in every directory level
that you mention in <code style="font-size: 12px !important; line-height: 14.1667px !important;">LF_LINK_HEADERS</code> containing the public header
files that you wish to symlink. The filenames need to be separated by
carriage returns in the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Headers</span></samp> file. You also need to mention
these public header files in a
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     include_HEADERS = foo1.h foo2.h ...
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">assignment, in your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>, to make sure that they are installed.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">With this usage, other programs can access the installed header files
as:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #include &lt;foo1.h&gt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Other directories within the same package can access the uninstalled yet
header files in exactly the same manner. Finally, in the same directory
you should access the header files as
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #include "foo1.h"
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This will force the header file in the current directory to be installed,
even when there is a similar header file already installed. This is very
important when you are rebuilding a new version of an already installed
library. Otherwise, building might be confused if your code tries to
include the already installed, and not up-to-date, header files from the
older version.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Alternatively, you can categorize the header files under a directory,
by invoking
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     LF_LINK_HEADERS(src/dir1 src/dir2 , name1)
     LF_LINK_HEADERS(src/dir3 src/dir4 , name2)
     LF_SET_INCLUDES(name1 name2)
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">in your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>. In your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> files you still
add the same two lines:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     INCLUDES = $(default_includes)
     EXTRA_DIST = Headers
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and maintain the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Headers</span></samp> file as before. However, now the header files
will be symlinked to subdirectories of <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">$(top_srcdir)/include</span></samp>. 
This means that although uninstalled header files in all directories must
be included by code in the same directory as:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #include "header.h"
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">code in other directories must access these uninstalled header files as
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #include &lt;name1/header.h&gt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">if the header file is under <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src/dir1</span></samp> or <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src/dir2</span></samp> or as
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #include &lt;name2/header.h&gt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">if the header file is under <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src/dir3</span></samp> or <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src/dir4</span></samp>. 
It follows that you probably intend for these header files to be installed
correspondingly in such a manner so that other programs can also include them
the same way. To accomplish that, under <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src/dir1</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src/dir2</span></samp>
you should list the header files in your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     name1dir = $(includedir)/name1
     name1_HEADERS = header.h ...
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and under <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src/dir3</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src/dir4</span></samp> like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     name2dir = $(includedir)/name2
     name2_HEADERS = header.h
     
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">One disadvantage of this approach is that the source tree is modified
during configure-time, even during a VPATH build. Some may not like that, but
it suits me just fine. 
Unfortunately, because Automake requires the GNU compiler to compute
dependencies, the header files need to be placed in a constant location
with respect to the rest of the source code. If a <code style="font-size: 12px !important; line-height: 14.1667px !important;">mkdep</code> utility
were to be distributed by Automake to compute dependencies when the installer
installs the software and not when the developer builds a source code
distribution, then it would be possible to allow the location of the header
files to be dynamic. If that development ever takes place in Automake,
Autotoolset will immediate follow. If you really don't like this,
then don't use this feature.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Usually, if you are installing one or two header files per library you
want them to be installed under <code style="font-size: 12px !important; line-height: 14.1667px !important;">$(includedir)</code> and be includeable
with
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #include &lt;foo.h&gt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">On the other hand, there are many applications that install a lot of header
files, just for one library. In that case, you should put them under a
prefix and let them be included as:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #include &lt;prefix/foo.h&gt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Examples of libraries doing this X11 and Mesa.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">This mechanism for tracking include files is most useful for very large
projects. You may not want to bother for simple homework-like throwaway
hacks. When a project starts to grow, it is very easy to switch.

<!-- Copyright (C) 1998 Eleftherios Gkioulekas <lf@amath.washington.edu> -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Using-C-and-C++-effectively" style="font-size: 16px !important;"></a>
<a name="Using-C-and-C_002b_002b-effectively" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Using-Fortran-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Fortran effectively</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-Autotoolset" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Autotoolset</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="chapter" style="font-size: 24px !important; line-height: 25px !important;">9 Using C and C++ effectively</h2>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">In this chapter I will discuss in extreme detail the portability issues
with C++. Most of this work will be based on <code style="font-size: 12px !important; line-height: 14.1667px !important;">bzconfig</code> which I
will adapt to include in Autotoolset eventually. I don't know the structure
of this chapter yet.

<!-- Copyright (C) 1998 Eleftherios Gkioulekas <lf@amath.washington.edu> -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
<!-- ============================================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Using-Fortran-effectively" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Internationalization" style="font-size: 16px !important; line-height: 16.6667px !important;">Internationalization</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-C-and-C_002b_002b-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using C and C++ effectively</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="chapter" style="font-size: 24px !important; line-height: 25px !important;">10 Using Fortran effectively</h2>

<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="1" href="#Introduction-to-Fortran-support" style="font-size: 16px !important; line-height: 16.6667px !important;">Introduction to Fortran support</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="2" href="#Fortran-compilers-and-linkage" style="font-size: 16px !important; line-height: 16.6667px !important;">Fortran compilers and linkage</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="3" href="#Walk-through-a-simple-example" style="font-size: 16px !important; line-height: 16.6667px !important;">Walk through a simple example</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="4" href="#The-gory-details" style="font-size: 16px !important; line-height: 16.6667px !important;">The gory details</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="5" href="#Portability-problems-with-Fortran" style="font-size: 16px !important; line-height: 16.6667px !important;">Portability problems with Fortran</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="6" href="#Other-Fortran-dialects" style="font-size: 16px !important; line-height: 16.6667px !important;">Other Fortran dialects</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="7" href="#Popular-free-software-in-Fortran" style="font-size: 16px !important; line-height: 16.6667px !important;">Popular free software in Fortran</a>
</li></ul>

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Introduction-to-Fortran-support" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Fortran-compilers-and-linkage" style="font-size: 16px !important; line-height: 16.6667px !important;">Fortran compilers and linkage</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-Fortran-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Fortran effectively</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Fortran-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Fortran effectively</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">10.1 Introduction to Fortran support</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">This chapter is devoted to Fortran. We will show you how to build programs
that combine Fortran and C or C++ code in a portable manner. The main reason
for wanting to do this is because there is a lot of free software written
in Fortran. If you browse ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">http://www.netlib.org/</span></samp>¡¯ you will find a
repository of lots of old, archaic, but very reliable free sources. 
These programs encapsulate a lot of experience in numerical analysis research
over the last couple of decades, which is crucial to getting work done. 
All of these sources
have been written in Fortran. As a developer today, if you know other
programming languages, it is unlikely that you
will want to write original code in Fortran. You may need, however, to use
legacy Fortran code, or the code of a neighbour who still writes in Fortran.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The most portable way to mix Fortran with your C/C++ programs is to translate
the Fortran code to C with the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</span></samp>¡¯ compiler and compile everything with
a C/C++ compiler. The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</span></samp>¡¯ compiler is available at
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">http://www.netlib.org/</span></samp>¡¯ but as we will soon explain, it is also
distributed with the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autotools</span></samp>¡¯ package. Another alternative is to use
the GNU Fortran compiler ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">g77</span></samp>¡¯ with ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">g++</span></samp>¡¯ and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">gcc</span></samp>¡¯. This
compiler is portable among many platforms, so if you want to use a native
Fortran compiler without sacrificing portability, this is one way to do it. 
Another way is to use your OS's native Fortran compiler, which is usually
called ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f77</span></samp>¡¯, <strong style="font-size: 16px !important; line-height: 16.6667px !important;">if</strong> it is compatible with ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">g77</span></samp>¡¯ and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f77</span></samp>¡¯. 
Because performance is also very important in numerical codes, a good
strategy is to prefer to use the native compiler if it is compatible,
and support ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">g77</span></samp>¡¯ as a fall-back option. Because many sysadmins don't
install ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">g77</span></samp>¡¯ supporting ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</span></samp>¡¯ as a third fall-back is also
a good idea.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Autotools provides support for configuring and building source code written
in part or in whole in Fortran. The implementation is based on the build
system used by GNU Octave, which has been generalized for use by any program.

<!-- ========================================================================= -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Fortran-compilers-and-linkage" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Walk-through-a-simple-example" style="font-size: 16px !important; line-height: 16.6667px !important;">Walk through a simple example</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Introduction-to-Fortran-support" style="font-size: 16px !important; line-height: 16.6667px !important;">Introduction to Fortran support</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Fortran-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Fortran effectively</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">10.2 Fortran compilers and linkage</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">The traditional Hello world program in Fortran looks like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     c....:++++++++++++++=
           PROGRAM MAIN
           PRINT*,'Hello World!'
           END
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">All lines that begin with ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">c</span></samp>¡¯ are comments. The first line is the
equivalent of <code style="font-size: 12px !important; line-height: 14.1667px !important;">main()</code> in C. The second line says hello, and the
third line indicates the end of the code. It is important that all command
lines are indented by 7 spaces, otherwise the compiler will issue a syntax
error. Also, if you want to be ANSI compliant, you must write your code all
in caps. Nowadays most compilers don't care, but some may still do.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To compile this with ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">g77</span></samp>¡¯ (or ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f77</span></samp>¡¯) you do something like:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % g77 -o hello hello.f
     % hello
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">To compile it with the f2c translator:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % f2c hello.f
     % gcc -o hello hello.c -lf2c -lm
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">where ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-lf2c</span></samp>¡¯ links in the translator's system library. 
In order for this to work, you will have to make sure that the header file
<code style="font-size: 12px !important; line-height: 14.1667px !important;">f2c.h</code> is present since the translated code in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello.c</span></samp> includes
it with a statement like
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #include "f2c.h"
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">which explicitly requires it to be present in the current working directory.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In this case, the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">main</span></samp>¡¯ is written in Fortran. However most of the
Fortran you will be using will actually be subroutines and functions. 
A subroutine looks like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     c....:++++++++++++++
           SUBROUTINE FHELLO (C)
           CHARACTER *(*) C
           PRINT*,'From Fortran: ',C
           RETURN
           END
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This is the analog of a ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">void</span></samp>¡¯ function in C, because it takes
arguments but doesn't return anything. The prototype declaration is
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">K&amp;R</dfn> style: you list all the arguments in parenthesis, separated with
commas, and you declare the types of the variables in the subsequent lines.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Suppose that this subroutine is saved as <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">fhello.f</span></samp>. To call it from
C you need to know what it looks like from the point of the C compiler. 
To find out type:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % f2c -P fhello.f
     % cat fhello.P
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">You will find that this subroutine has the following prototype declaration:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     extern int fhello_(char *c__, ftnlen c_len);
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">It may come as a surprise, and this is a moment of revelation, but although
in Fortran it appears that the subroutine is taking <em style="font-size: 16px !important; line-height: 16.6667px !important;">one</em> argument, in
C it appears that it takes <strong style="font-size: 16px !important; line-height: 16.6667px !important;">two</strong>! And this is what makes
it difficult to link code in a portable manner between C and Fortran. In
C, everything is what it appears to be. If a function takes two arguments,
then this means that down to the machine language level, there is two
arguments that are being passed around. In Fortran, things are being hidden
from you and done in a magic fashion. The Fortran programmer thinks that he
is passing one argument, but the compiler compiles code that actually passes
two arguments around. In this particular case, the reason for this is that
the argument you are passing is a string. In Fortran, strings are not
null-terminated, so the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</span></samp>¡¯ compiler passes the length of the string
as an extra hidden argument. This is called the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">linkage method</dfn> of the
compiler. Unfortunately, linkage in Fortran is not standard, and there
exist compilers that handle strings differently. For example, some compilers
will prepend the string with a few bytes containing the length and pass
a pointer to the whole thing. This problem is not limited to strings. 
It happens in many other instances. 
The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</span></samp>¡¯ and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">g77</span></samp>¡¯ compilers follow compatible linkage, and
we will use this linkage as the <em style="font-size: 16px !important; line-height: 16.6667px !important;">ad-hoc standard</em>. A few proprietary
Fortran compilers like the Dec Alpha ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f77</span></samp>¡¯ and the Irix ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f77</span></samp>¡¯
are also ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</span></samp>¡¯-compatible. The reason for this is because most of
the compiler developers derived their code from ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</span></samp>¡¯. So although
a standard was not really intended, there we have one anyway.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">A few things to note about the above prototype declaration is that the
symbol ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">fhello</span></samp>¡¯ is in lower-case, even though in Fortran we write
everything uppercase, and it is appended with an underscore. On some platforms,
the proprietary Fortran compiler deviates from the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</span></samp>¡¯ standard either
by forcing
the name to be in upper-case or by omitting the underscore. Fortunately,
these cases can be detected with Autoconf and can be worked around with
conditional compilation. However, beyond this, other portability problems,
such as the strings issue, are too involved to deal with and it is best
in these cases that you fall back to ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</span></samp>¡¯ or ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">g77</span></samp>¡¯. 
A final thing to note is that although ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">fhello</span></samp>¡¯ doesn't return anything,
it has return type ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">int</span></samp>¡¯ and not ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">void</span></samp>¡¯. The reason for this is
that ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">int</span></samp>¡¯ is the default return type for functions that are not
declared. Therefore, to prevent compilation problems, in case the user forgets
to declare a Fortran function, ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</span></samp>¡¯ uses ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">int</span></samp>¡¯ as the return
type for subroutines.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In Fortran parlance, a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">subroutine</dfn> is what we'd call a ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">void</span></samp>¡¯
function. To Fortran programmers in order for something to be a
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">function</dfn> it has to return something back. This reflects on the syntax. 
For example, here's a function that adds two numbers and returns the
result:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     c....:++++++++++++++++
           DOUBLE PRECISION FUNCTION ADD(A,B)
           DOUBLE PRECISION A,B
           ADD = A + B
           RETURN
           END
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The name of the function is also the name of the return variable. 
If you run this one through ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c -P</span></samp>¡¯ you will find that the C prototype
is:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     extern doublereal add_(doublereal *a, doublereal *b);
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">There's plenty of things to note here:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">The typenames being used are funny. ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">doublereal</span></samp>¡¯? what's that!? 
These are all defined in a header file called ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c.h</span></samp>¡¯ which you are
supposed to include in your source code before declaring any prototypes. 
We will show you how this is all done in the next section. The following
table shows the types that are most likely to interest you. For more info,
take a look at the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c.h</span></samp>¡¯ file itself:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">            integer         -&gt; int
            real            -&gt; float
            doublereal      -&gt; double
            complex         -&gt; struct { real r,i; };
            doublecomplex   -&gt; struct { doublereal r,i; };
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The arguments are passed by pointer. In Fortran all arguments are passed
by reference. The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</span></samp>¡¯ compiler implements this by passing the
arguments by pointer. On the C/C++ level you may want to wrap the fortran
routine with another routine so that you don't have to directly deal with
pointers all of the time. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The value returned now is not an ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">int</span></samp>¡¯ but ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">doublereal</span></samp>¡¯. 
Of course, the name of the function is lower-case, as always, and
there is an underscore at the end. 
</li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">A more interesting case is when we deal with complex numbers. Consider
a function that multiplies two complex numbers:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     c....:++++++++++++++++++++++++++++++
           COMPLEX*16 FUNCTION MULT(A,B)
           COMPLEX*16 A,B
           MULT = A*B
           RETURN
           END
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">As it turns out, the prototype for this function is:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     extern Z_f mult_(doublecomplex *ret_val, doublecomplex *a, doublecomplex *b);
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Because complex numbers are not a native type in C, they can not be returned
efficiently without going through at least one copy. Therefore, for this
special case the return value is placed as the first argument in the prototype! 
Actually despite many people's feelings that Fortran must die, it is still
the best tool to use to write optimized functions that are heavy on complex
arithmetic.

<!-- ========================================================================== -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Walk-through-a-simple-example" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#The-gory-details" style="font-size: 16px !important; line-height: 16.6667px !important;">The gory details</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Fortran-compilers-and-linkage" style="font-size: 16px !important; line-height: 16.6667px !important;">Fortran compilers and linkage</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Fortran-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Fortran effectively</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">10.3 Walk through a simple example</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Now that we have brought up some of the issues about Fortran linkage, let's
show you how to work around them. We will write a simple Fortran function,
and a C program that calls it, and then show you how to turn these two into
a GNU-like package, enhanced with a configure script and the works. 
This discussion assumes that you have installed the utilities in
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">autotools</span></samp>¡¯, the package with which this tutorial is being distributed.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">First, begin by building a directory for your new package. Because this project
will involve Fortran, you need to pass the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-f</span></samp>¡¯ flag to ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % acmkdir -t fortran foo
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">-t</span></samp>¡¯ flag directs ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ to unpack a copy of the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</span></samp>¡¯
translator and to build proper toplevel ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>¡¯ and
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>¡¯ files. This will take a while, so relax and stretch a
little bit.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Now enter the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo-0.1</span></samp> directory and look around:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % cd foo-0.1
     % cat configure.in
     AC_INIT(hello,0.1)
     AM_CONFIG_HEADER(config.h)
     AM_INIT_AUTOMAKE
     LF_CONFIGURE_CC
     LF_CONFIGURE_CXX
     AC_PROG_RANLIB
     LF_HOST_TYPE
     LF_PROG_F77_PREFER_F2C_COMPATIBILITY
     dnl LF_PROG_F77_PREFER_NATIVE_VERSION
     LF_PROG_F77
     LF_SET_WARNINGS
     AC_CONFIG_SUBDIRS(fortran/f2c fortran/libf2c)
     AC_CONFIG_FILES([Makefile fortran/Makefile f2c_comp
             doc/Makefile m4/Makefile src/Makefile ])
     
     % cat Makefile.am
     EXTRA_DIST = reconf configure
     SUBDIRS = fortran m4 doc src
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">There are some new macros in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> and a new subdirectory:
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">fortran</span></samp>. There is also a file that looks like a shell script
called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c_comp.in</span></samp>. 
We will discuss the gory details about all this in the
next section. 
Now let's write the code. Enter the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">src</span></samp> directory and type:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     $ cd src
     $ mkf2c
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This creates the following files:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c.h</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This is the header file that we alluded to in the previous section. It
needs to be present on all directory levels that contain Fortran code. 
It defines all the funny typenames that appear in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</span></samp> compatible
prototype declarations. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c-main.c</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This file contains some silly definitions. You need to link it in whenever
you link together a program, but don't add it to various libraries, because
then, when you link some of the libraries together you will get error
messages for duplicate symbols. 
The contents of this file are:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #ifdef __cplusplus
          extern "C" {
          #endif
          
          #if defined (sun)
          int MAIN_ () { return 0; }
          #elif defined (linux) &amp;&amp; defined(__ELF__)
          int MAIN__ () { return 0; }
          #endif
          
          #ifdef __cplusplus
          }
          #endif
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></dd></dl>
   Now, time to write some code:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     $ vi fhello.f
     $ vi hello.cc
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">with
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">fhello.f</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          c....:++++++++++++++++++++++++++++++
                SUBROUTINE FHELLO (C)
                CHARACTER *(*) C
                PRINT*,'From Fortran: ',C
                RETURN
                END
</pre>
     <p class="noindent" style="font-size: 16px !important;"><br></p></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello.cc</span></samp></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          #ifdef HAVE_CONFIG_H
          #include &lt;config.h&gt;
          #endif
          #include &lt;string.h&gt;
          #include "f2c.h"
          #include "f77-fcn.h"
          
          extern "C"
          {
           extern int f77func(fhello,FHELLO)(char *c__, ftnlen c_len);
          }
          
          main()
          {
           char s[30];
           strcpy(s,"Hello world!");
           f77func(fhello,FHELLO)(s,ftnlen(strlen(s)));
          }
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></dd></dl>
   The definition of the <code style="font-size: 12px !important; line-height: 14.1667px !important;">f77func</code> macro is included in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">acconfig.h</span></samp>
automatically for you if the <code style="font-size: 12px !important; line-height: 14.1667px !important;">LF_CONFIGURE_FORTRAN</code> macro is included
in your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>. The definition is as follows:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #ifndef f77func
     #if defined (F77_APPEND_UNDERSCORE)
     #  if defined (F77_UPPERCASE_NAMES)
     #    define f77func(f, F) F##_
     #  else
     #    define f77func(f, F) f##_
     #  endif
     #else
     #  if defined (F77_UPPERCASE_NAMES)
     #    define f77func(f, F) F
     #  else
     #    define f77func(f, F) f
     #  endif
     #endif
     #endif
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Recall that we said that the issue of whether to add an underscore and
whether to capitalize the name of the routine can be dealt with conditional
compilation. This macro is where this conditional compilation happens. 
The <code style="font-size: 12px !important; line-height: 14.1667px !important;">LF_PROG_F77</code> macro will define
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     F77_APPEND_UNDERSCORE
     F77_UPPERCASE_NAMES
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">appropriately so that <code style="font-size: 12px !important; line-height: 14.1667px !important;">f77func</code> does the right thing.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To compile this, create a <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> as follows:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     SUFFIXES = .f
     .f.o:
             $(F77) -c $&lt;
     
     bin_PROGRAMS = hello
     hello_SOURCES = hello.cc fhello.f f2c.h f2c-main.c
     hello_LDADD = $(FLIBS)
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Note that the above <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> is only compatible with version
1.3 of Automake, or newer versions. The previous versions don't grok
Fortran filenames on the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello_SOURCES</span></samp> so you may want to upgrade.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Now you can compile and run the program:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     $ cd ..
     $ reconf
     $ configure
     $ make
     $ src/hello
      From Fortran: Hello world!
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">If you have a native ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f77</span></samp>¡¯ compiler that was used, or the portable
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">g77</span></samp>¡¯ compiler you missed out the coolness of using ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</span></samp>¡¯. 
In order to check <em style="font-size: 16px !important; line-height: 16.6667px !important;">that</em> out do:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     $ make distclean
     $ configure --with-f2c
     $ make
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and witness the beauty! The package will begin by building an <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</span></samp>
binary for your system. Then it will build the Fortran libraries. And finally,
it will build the hello world program which you can run as before:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     $ src/hello
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">It may seem an overkill to carry around a Fortran compiler. On the other hand
you will find it very convenient, and the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</span></samp>¡¯ compiler isn't really
that big. If you are spoiled on a system that is well equipped and with a good
system administrator, you may find it a nasty surprise one day when you
discover that the rest of the world is not necessarily like that.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If you download a real Fortran package from Netlib you might find it very
annoying having to enter the filenames for all the Fortran files in
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">*_SOURCES</span></samp>¡¯. A work-around is to put all these files in their own
directory and then do this <code style="font-size: 12px !important; line-height: 14.1667px !important;">awk</code> trick:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % ls *.f | awk '{ printf("%s ", $1) }' &gt; tmp
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The awk filter will line-up the output of <code style="font-size: 12px !important; line-height: 14.1667px !important;">ls</code> in one line. You can use
your editor to insert its contents to your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>. Eventually
I may come around to write a utility for doing this automagically.

<!-- ========================================================================= -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="The-gory-details" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Portability-problems-with-Fortran" style="font-size: 16px !important; line-height: 16.6667px !important;">Portability problems with Fortran</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Walk-through-a-simple-example" style="font-size: 16px !important; line-height: 16.6667px !important;">Walk through a simple example</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Fortran-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Fortran effectively</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">10.4 The gory details</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">The best way to get started is by building the initial directory tree with
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">acmkdir</span></samp>¡¯ like this:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     % acmkdir -t fortran &lt;directory-filename&gt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This will install all the standard stuff. It will also install a directory
called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">fortran</span></samp> containing a copy of the f2c compiler and
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c_comp</span></samp>, a shell script invoking the compiler in a way that it
looks the same as invoking a real compiler

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> uses the following special macros:
     </p><dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">LF_PROG_F77_PREFER_F2C_COMPATIBILITY</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This macro directs Autoconf that the user prefers <code style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</code> compatibility
over performance. In general Fortran programmers are willing to sacrifice
everything for the sake of performance. However, if you want to use
Fortran code with C and C++ code, you will have many reasons to also
give importance to <code style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</code> compatibility. Use this macro to state this
preference. The effect is that if the installer's platform has a native
Fortran compiler installed, it will be used only if it is <code style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</code>
compatible. This macro must be invoked before invoking
<code style="font-size: 12px !important; line-height: 14.1667px !important;">LF_PROG_F77</code>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">LF_PROG_F77_PREFER_NATIVE_VERSION</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This macro directs Autoconf that the user prefers performance and
doesn't care about <code style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</code> compatibility. You may want to invoke this
instead if your entire program is written in Fortran. 
This macro must be invoked before invoking <code style="font-size: 12px !important; line-height: 14.1667px !important;">LF_PROG_F77</code>. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">LF_PROG_F77</strong></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">This macro probes the installer platform for an appropriate Fortran
compiler. It exports the following variables to Automake:
          <dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">F77</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The name of the Fortran compiler
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">FFLAGS</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Flags for the Fortran compiler
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;">¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">FLIBS</span></samp>¡¯</dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">The link sequence for the compiler runtime libraries
</dd></dl>
     It also checks whether the compiler appends underscores to the symbols
and whether the symbols are written in lowercase or uppercase characters
and defines the following preprocessor macros:
          <dl style="font-size: 16px !important; line-height: 16.6667px !important;">
<dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">F77_APPEND_UNDERSCORE</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Define if the compiler appends an underscore to the symbol names. 
<br></dd><dt style="font-size: 16px !important; line-height: 16.6667px !important;"><code style="font-size: 12px !important; line-height: 14.1667px !important;">F77_UPPERCASE_NAMES</code></dt><dd style="font-size: 16px !important; line-height: 16.6667px !important;">Define if the compiler uses uppercase for symbol names. 
</dd></dl>
     These macros are used to define ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f77func</span></samp>¡¯ macro which takes two arguments;
the name of the Fortran subroutine or function in lower case, and then in
upper case, and returns the correct symbol name to use for invoking it from
C or C++. To obtain the calling sequence for the symbol do:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % f2c -P foo.f
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">on the file containing the subroutine and examine the file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">foo.P</span></samp>. 
In order for this macro to work properly you must precede it with calls
to
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_PROG_CC
          AC_PROG_RANLIB
          LF_HOST_TYPE
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">You also need to call one of the two <code style="font-size: 12px !important; line-height: 14.1667px !important;">*_PREFER_*</code> macros. The default
is to prefer <code style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</code> compatibility. 
</p></dd></dl>
   In addition to invoking all of the above, you need to make provision for
the bundled fortran compiler by adding the following lines at the end of
your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>:
<pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     AC_CONFIG_SUBDIRS(fortran/f2c fortran/libf2c)
     AC_OUTPUT([Makefile fortran/Makefile f2c_comp
                doc/Makefile m4/Makefile src/Makefile])
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_CONFIG_SUBDIRS</code> macro directs <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure</span></samp> to execute the
configure scripts in <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">fortran/f2c</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">fortran/libf2c</span></samp>. 
The stuff in <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_OUTPUT</code> that are important to Fortran support are
building <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">fortran/Makefile</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c_comp</span></samp>. Because,
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c_comp</span></samp> is mention in <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_OUTPUT</code>, Automake will automagically
bundle it when you build a source code distribution.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If you have originally set up your directory tree for a C or C++ only
project and later you realize that you need to also use Fortran, you can
upgrade your directory tree to Fortran as follows:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">Create the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">fortran</span></samp> directory by invoking
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % mkfortran
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c_oomp</span></samp> by invoking
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % mkf2c_comp
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">both on the toplevel directory level. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Add the following macro invocations in the middle of <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp>, in
this order:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_PROG_CC
          AC_PROG_RANLIB
          LF_HOST_TYPE
          LF_PROG_F77_PREFER_F2C_COMPATIBILITY
          LF_PROG_F77
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">If you have invoked <code style="font-size: 12px !important; line-height: 14.1667px !important;">LF_CONFIGURE_CC</code> then there is no need to
invoke <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_PROG_CC</code> again. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Add the following invocation just before <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_OUTPUT</code>:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          AC_CONFIG_SUBDIRS([fortran/f2c fortran/libf2c])
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">and add the following files to <code style="font-size: 12px !important; line-height: 14.1667px !important;">AC_OUTPUT</code>:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          fortran/Makefile f2c_comp
</pre>
     <p class="noindent" style="font-size: 16px !important;"></p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Rebuild with
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          % make distclean
          % ./reconf
          % ./configure
          % make
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">It is important to call <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">reconf</span></samp> for the changes to take effect. 
</p></li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">If a directory level contains Fortran source code, then it is important
to let Automake know about it by adding the following lines in the
beginning.
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     SUFFIXES = .f
     .f.o:
             $(F77) -c $&lt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This is pretty much the same idea with the embedded text compiler. 
You can list the Fortran source code filenames in the <code style="font-size: 12px !important; line-height: 14.1667px !important;">SOURCES</code>
assignments together with your C and C++ code. To link executables,
you must add <code style="font-size: 12px !important; line-height: 14.1667px !important;">$(FLIBS)</code> to <code style="font-size: 12px !important; line-height: 14.1667px !important;">LDADD</code> and link against
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c-main.c</span></samp> just as in the hello world example. Please do
not include <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c-main.c</span></samp> in any libraries however.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Now consider the file <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">hello.cc</span></samp> line by line. 
First we include the standard configuration stuff:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #ifdef HAVE_CONFIG_H
     #include &lt;config.h&gt;
     #endif
     #include &lt;string.h&gt;
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Then we include the Fortran related header files:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     #include "f2c.h"
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Then we declare the prototypes for the Fortran subroutine:
</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     extern "C"
     {
      extern int f77func(fhello,FHELLO)(char *c__, ftnlen c_len);
     }
</pre>
   <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">There is a few things to note here:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">You should never ever declare Fortran prototypes in header files. The
definition of prototypes is dependent on the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f77func</span></samp>¡¯ macro,
which is dependent on a correct definition of the
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">F77_APPEND_UNDERSCORE</span></samp>¡¯ and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">F77_UPPERCASE_NAMES</span></samp>¡¯ C preprocessor
macros. You should be nice and not force people who don't want to use Fortran
to have to get these macros defined in order to use your header files. 
If you want to export functionality written in Fortran to C users, then wrap
the Fortran subroutines and functions with corresponding C subroutines and
functions and export these instead on your header file. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You should never use the actual name of the Fortran routine in C, because
doing so is not portable. Instead you should use the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">f77func</span></samp>¡¯ macro,
which takes two arguments: the name of the routine in small letters, and
the name of the routine in all-caps. The right name of the two is chosen,
and the underscore is appended if necessary. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If the source file in which you are writing down the Fortran declarations
is compiled with a C++ compiler, as is true in this case, then you must
surround the declarations with:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          extern "C"
          {
          }
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">The C++ language uses <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">name mangling</dfn> to support function overloading. 
This means that if you have two C++ functions called:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          int foo(double x);
          int foo(double x,double y);
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">the C++ compiler internally assigns them different names in an intelligent
fashion to avoid conflict. Just like the Fortran compiler does things
behind your back, so does the C++ compiler to support some of its special
features. Any code written between ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">extern "C"</span></samp>¡¯ is compiled with name
mangling disabled. This is necessary for the Fortran declarations because
we don't want the names of the Fortran subroutines to be mangled. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">When we actually invoke the Fortran subroutine in the ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">main</span></samp>¡¯ we
make sure to type-cast all the types to what appears on the prototype
above. In this case we do:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          f77func(fhello,FHELLO)(s,ftnlen(strlen(s)));
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This may seem pedantic but it is necessary for the C++ compiler,
and it is a good habit even for C programmers. Since Fortran routines
are supposed to be wrapped, this is not too much to ask. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You need to be very careful with integers. On some systems ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">long int</span></samp>¡¯
is 64 bit and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">int</span></samp>¡¯ is 32 bit. This means that you should avoid
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">long int</span></samp>¡¯ like the plague! The safest way to deal with integers is to
make sure that you always cast your integer stuff to <code style="font-size: 12px !important; line-height: 14.1667px !important;">integer</code>
explicitly. Unfortunately the standard header file distributed with
<code style="font-size: 12px !important; line-height: 14.1667px !important;">f2c</code> defines <code style="font-size: 12px !important; line-height: 14.1667px !important;">integer</code> as <code style="font-size: 12px !important; line-height: 14.1667px !important;">long int</code> to account for 16-bit
machines. That's a bad idea, and on the 64-bit Dec Alpha it is a bug. The
header file distributed with
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">mkf2c</span></samp> does the right thing. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Make sure to list both <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c.h</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">f2c-main.c</span></samp> in
<code style="font-size: 12px !important; line-height: 14.1667px !important;">SOURCES</code> assignments on your <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp> to make sure that
they are included in the source code distribution. 
</li></ul>

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Portability-problems-with-Fortran" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Other-Fortran-dialects" style="font-size: 16px !important; line-height: 16.6667px !important;">Other Fortran dialects</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#The-gory-details" style="font-size: 16px !important; line-height: 16.6667px !important;">The gory details</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Fortran-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Fortran effectively</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">10.5 Portability problems with Fortran</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Fortran is infested with portability problems. There exist two important
Fortran standards: one that was written in 1966 and one that was written
in 1977. The 1977 standard is considered to be <em style="font-size: 16px !important; line-height: 16.6667px !important;">the</em> standard Fortran. 
Most of the Fortran code is written by scientists who have never had any
formal training in computer programming. As a result, they often write
code that is dependent on vendor-extensions to the standard, and not
necessarily easy to port. The standard itself is to blame as well, since
it is sorely lacking in many aspects. For example, even though standard
Fortran has both <code style="font-size: 12px !important; line-height: 14.1667px !important;">REAL</code> and <code style="font-size: 12px !important; line-height: 14.1667px !important;">DOUBLE PRECISION</code> data types
(corresponding to <code style="font-size: 12px !important; line-height: 14.1667px !important;">float</code> and <code style="font-size: 12px !important; line-height: 14.1667px !important;">double</code>) the standard only
supports single precision complex numbers (<code style="font-size: 12px !important; line-height: 14.1667px !important;">COMPLEX</code>). Since many
people will also want double precision complex numbers, many vendors provided
extensions. Most commonly, the double precision complex number is called
<code style="font-size: 12px !important; line-height: 14.1667px !important;">COMPLEX*16</code> but you might also see it called <code style="font-size: 12px !important; line-height: 14.1667px !important;">DOUBLE COMPLEX</code>. 
Other such vendors extensions include providing a <code style="font-size: 12px !important; line-height: 14.1667px !important;">flush</code> operation
of some sort for file I/O, and other such esoteric things.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To make things
worse (or better) now there are two more standards out there: the 1990
standard and the 1995 standard. A 2000 standard is also at work. 
Fortran 90 and its successors try to make Fortran more like C and C++, and
even though <em style="font-size: 16px !important; line-height: 16.6667px !important;">there are no free compilers</em> for both variants,
they are becoming alarmingly popular with the scientific community. 
In fact, I think that the main reason why these variants of Fortran are
being developed is to make more business for proprietary compiler
developers. So far as I know, Fortran 90 does not provide any features
that C++ can not  support with a class library extension. Moreover
Fortran 90 does not have the comprehensive foundation that allows C++ to be
a self-extensible language. This makes it less worthwhile to invest effort
on Fortran 90, because it means that eventually people will want features that
can only be implemented by redefining the language and rewriting the
compilers for it. Instead, in C++, you can add features to the language
simply by writing C++ code, because it has enough core features to allow
virtually unlimited self-extensibility.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If your primary interest is portability and free software, you should stay
away from Fortran
90 as well as Fortran 95, until someone writes a free compiler for them. 
You will be better off developing in <code style="font-size: 12px !important; line-height: 14.1667px !important;">C++</code> and only migrating to
Fortran 77 the parts that are performance critical. This way you get the
best of both worlds.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">On the flip side, if you limit your Fortran code just to number-crunching,
then it becomes much easier to write portable code. There are still a few
things you should take into account however. 
Some Fortran code has been written in the archaic 1966 style. An example
of such code is the <code style="font-size: 12px !important; line-height: 14.1667px !important;">fftpack</code> package from <code style="font-size: 12px !important; line-height: 14.1667px !important;">netlib</code>. The main
problems with such code are the following:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Implicit types</strong>:
In Fortran 66, programmers were too lazy to define the types of their variables. 
The idea was that the type was inferred by the first letter of the variable
name. That's horror for you! The convention then is that all variables with
initial <code style="font-size: 12px !important; line-height: 14.1667px !important;">I,J,...,N</code> are type <code style="font-size: 12px !important; line-height: 14.1667px !important;">INTEGER</code>. All others are <code style="font-size: 12px !important; line-height: 14.1667px !important;">REAL</code>
To compile this code with
modern compilers it is necessary to add the following line to every source
file:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          IMPLICIT DOUBLE PRECISION (A-H,O-Z)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This instructs the compiler to do the right thing, which is to implicitly
assume that all variables starting with <code style="font-size: 12px !important; line-height: 14.1667px !important;">A-H</code> and <code style="font-size: 12px !important; line-height: 14.1667px !important;">O-Z</code> are
double precision and all other variables are integers. Alternatively you can
say
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          IMPLICIT REAL (A-H,O-Z)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">but it is very rarely that you will ever want to go with single precision. 
Occasionally, you may find that the programmer breaks the rules. For example,
in <code style="font-size: 12px !important; line-height: 14.1667px !important;">fftpack</code> the array <code style="font-size: 12px !important; line-height: 14.1667px !important;">IFAC</code> is supposed to be a <code style="font-size: 12px !important; line-height: 14.1667px !important;">double</code>
even though implicitly it is suggested to be an <code style="font-size: 12px !important; line-height: 14.1667px !important;">int</code>. Such inconstancies
will probably show up in compiler errors. To fix them, declare the type
of these variables explicitly. If it's an array then you do it like this:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          DOUBLE PRECISION IFAC(*)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">If the variable also appears in a <code style="font-size: 12px !important; line-height: 14.1667px !important;">DIMENSION</code> declaration, then you
should remove it from the declaration since the two can't coexist in
<em style="font-size: 16px !important; line-height: 16.6667px !important;">some</em> compilers. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Pseudo-pointers</strong>:
In archaic Fortran, a dimension declaration of the form:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          DIMENSION C(1)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">means that <code style="font-size: 12px !important; line-height: 14.1667px !important;">C</code> has an unknown length, instead of meaning that it has
length 1. In modern Fortran, this is an unacceptable notation and modern
compilers do get confused over it. So all such instances must be replaced
with the correct form which is:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          DIMENSION C(*)
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">Such ¡°arrays¡± in reality are just pointers. The user can reference the
array as far as he likes, but of course, if he takes it too far, the
program will either do the Wrong Thing or crash with a segmentation fault. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Constants</strong>:
A most insidious problem has to do with constants and it is confined, to
the best of my knowledge, to the GNU Fortran compiler, but it could
very well be a problem in other compilers to which I have no access to. 
Constants tend to appear in ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">DATA</span></samp>¡¯ statements or variable assignments. 
The problem is that whenever a constant is in use, the context is never
a determining factor for the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">type</dfn> of the constant, unlike C which
does automatic casting. Examples: ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">1</span></samp>¡¯ is always type <code style="font-size: 12px !important; line-height: 14.1667px !important;">INTEGER</code>,
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">9.435784839284958</span></samp>¡¯ is always type <code style="font-size: 12px !important; line-height: 14.1667px !important;">REAL</code>
(even if the additional precision specified is lost, and even when used in
a ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">DOUBLE PRECISION</span></samp>¡¯ context such as being assigned to a
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">DOUBLE PRECISION</span></samp>¡¯ variable!). On the other hand, <code style="font-size: 12px !important; line-height: 14.1667px !important;">1E0</code> is
always <code style="font-size: 12px !important; line-height: 14.1667px !important;">REAL</code> and <code style="font-size: 12px !important; line-height: 14.1667px !important;">1D0</code> is always ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">DOUBLE PRECISION</span></samp>¡¯. 
If you want your code to be exclusively double precision, then you should
scan the entire source for constants, and make sure that they all have the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">D0</code> suffix at the end. Many compilers will tolerate this omission while
others will not and go ahead and introduce single precision error to your
computations leading to hard to find bugs. 
</li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">In general the code in <code style="font-size: 12px !important; line-height: 14.1667px !important;">http://www.netlib.org/</code> is very reliable and
portable, but you do need to keep your eyes open for little problems like
the above.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Other-Fortran-dialects" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Popular-free-software-in-Fortran" style="font-size: 16px !important; line-height: 16.6667px !important;">Popular free software in Fortran</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Portability-problems-with-Fortran" style="font-size: 16px !important; line-height: 16.6667px !important;">Portability problems with Fortran</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Fortran-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Fortran effectively</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">10.6 Other Fortran dialects</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">There are many variants of Fortran like Fortran 90, and HPF. 
Fortran 90 attempts, quite miserably, to make Fortran 77 more like
C++. HPF allows engineers to write numerical code that runs on parallel
computers. These variants should be avoided for two reasons:
     </p><ol start="1" style="font-size: 16px !important; line-height: 16.6667px !important;" type="1">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">There are no free compilers for Fortran 90 or HPF. 
If you happen to use a proprietary
operating system, you might as well make use of proprietary compilers
if they generate highly optimized code and that is important to you. 
Nevertheless, in order for your software to be free in a useful way, it
should be possible to compile it with free tools on a free operating system. 
A common objection is that since there are no parallel computers running
a free operating ysstem, the point is moot so one might as well use
HPF or Fortran 90, if doing so is convenient. 
This objection
is based on a premise that is now out of date. Nowadays, it is possible to
build parallel computers using commodity hardware, a modified
version of the Linux kernel, called Beowulf, and the GNU system. 
Parallelized software
can also be free. Therefore both Fortran 90 and HPF should be avoided,
whenever that is possible until we have a free compiler for them. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Another problem with these variants is that they are ad hoc languages
that have been invented to enable Fortran to do things that it can not
do by design. Eventually, when engineers will like to do things that Fortran
90 can't do either, it will be necessary to extend Fortran again, rewrite the
compilers and produce yet another variant. What engineers really need is
a <em style="font-size: 16px !important; line-height: 16.6667px !important;">real</em> solid programming language, and a collection of well-designed
scientific libraries written in that language.
        </li></ol>
Please don't contribute to the spread of these dialects. Instead contribute
infrastructure to better languages, like C and C++, to support the features
that compel you to use Fortran 90 or HPF.

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Popular-free-software-in-Fortran" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Other-Fortran-dialects" style="font-size: 16px !important; line-height: 16.6667px !important;">Other Fortran dialects</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Fortran-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Fortran effectively</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">10.7 Popular free software in Fortran</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;"><em style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: New section. Needs to be written</em>

<!-- ============================================================================ -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
<!-- ============================================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Internationalization" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Maintaining-Documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining Documentation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-Fortran-effectively" style="font-size: 16px !important; line-height: 16.6667px !important;">Using Fortran effectively</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="chapter" style="font-size: 24px !important; line-height: 25px !important;">11 Internationalization</h2>

<p style="font-size: 16px !important; line-height: 16.6667px !important;"><em style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: Needs to be written</em>

<!-- ============================================================================ -->
<!-- Copyright (C) 1998 Eleftherios Gkioulekas <lf@amath.washington.edu> -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
<!-- ============================================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Maintaining-Documentation" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Portable-shell-programming" style="font-size: 16px !important; line-height: 16.6667px !important;">Portable shell programming</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Internationalization" style="font-size: 16px !important; line-height: 16.6667px !important;">Internationalization</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="chapter" style="font-size: 24px !important; line-height: 25px !important;">12 Maintaining Documentation</h2>

<ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="1" href="#Browsing-documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Browsing documentation</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="2" href="#Writing-proper-manuals" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing proper manuals</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="3" href="#Introduction-to-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">Introduction to Texinfo</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="4" href="#Markup-in-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">Markup in Texinfo</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="5" href="#GNU-Emacs-support-for-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">GNU Emacs support for Texinfo</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="6" href="#Writing-man-pages" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing man pages</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="7" href="#Writing-documentation-with-LaTeX" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing documentation with LaTeX</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="8" href="#Creating-a-LaTeX-package" style="font-size: 16px !important; line-height: 16.6667px !important;">Creating a LaTeX package</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="9" href="#Further-reading-about-LaTeX" style="font-size: 16px !important; line-height: 16.6667px !important;">Further reading about LaTeX</a>
</li></ul>

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Browsing-documentation" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Writing-proper-manuals" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing proper manuals</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Maintaining-Documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining Documentation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Maintaining-Documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining Documentation</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">12.1 Browsing documentation</h3>

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Writing-proper-manuals" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Introduction-to-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">Introduction to Texinfo</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Browsing-documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Browsing documentation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Maintaining-Documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining Documentation</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">12.2 Writing proper manuals</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;"><em style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: Advice on how to write a good manual</em>
<em style="font-size: 16px !important; line-height: 16.6667px !important;">General stuff. Reference manual vs user manual.</em>
<em style="font-size: 16px !important; line-height: 16.6667px !important;">When to write a manual.</em>
<em style="font-size: 16px !important; line-height: 16.6667px !important;">How to structure a manual.</em>
<em style="font-size: 16px !important; line-height: 16.6667px !important;">Texinfo vs. Latex</em>
<em style="font-size: 16px !important; line-height: 16.6667px !important;">Copyright issues.</em>

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Introduction-to-Texinfo" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Markup-in-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">Markup in Texinfo</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Writing-proper-manuals" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing proper manuals</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Maintaining-Documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining Documentation</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">12.3 Introduction to Texinfo</h3>

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Markup-in-Texinfo" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#GNU-Emacs-support-for-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">GNU Emacs support for Texinfo</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Introduction-to-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">Introduction to Texinfo</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Maintaining-Documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining Documentation</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">12.4 Markup in Texinfo</h3>

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="GNU-Emacs-support-for-Texinfo" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Writing-man-pages" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing man pages</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Markup-in-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">Markup in Texinfo</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Maintaining-Documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining Documentation</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">12.5 GNU Emacs support for Texinfo</h3>

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Writing-man-pages" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Writing-documentation-with-LaTeX" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing documentation with LaTeX</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#GNU-Emacs-support-for-Texinfo" style="font-size: 16px !important; line-height: 16.6667px !important;">GNU Emacs support for Texinfo</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Maintaining-Documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining Documentation</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">12.6 Writing man pages</h3>

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Writing-documentation-with-LaTeX" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Creating-a-LaTeX-package" style="font-size: 16px !important; line-height: 16.6667px !important;">Creating a LaTeX package</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Writing-man-pages" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing man pages</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Maintaining-Documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining Documentation</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">12.7 Writing documentation with LaTeX</h3>

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Creating-a-LaTeX-package" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Further-reading-about-LaTeX" style="font-size: 16px !important; line-height: 16.6667px !important;">Further reading about LaTeX</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Writing-documentation-with-LaTeX" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing documentation with LaTeX</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Maintaining-Documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining Documentation</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">12.8 Creating a LaTeX package</h3>

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Further-reading-about-LaTeX" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Creating-a-LaTeX-package" style="font-size: 16px !important; line-height: 16.6667px !important;">Creating a LaTeX package</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Maintaining-Documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining Documentation</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">12.9 Further reading about LaTeX</h3>

<!-- ============================================================================ -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
<!-- ============================================================================ -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Portable-shell-programming" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Writing-Autoconf-macros" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Autoconf macros</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Maintaining-Documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Maintaining Documentation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="chapter" style="font-size: 24px !important; line-height: 25px !important;">13 Portable shell programming</h2>

<p style="font-size: 16px !important; line-height: 16.6667px !important;"><em style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: Needs to be written</em>

<!-- ============================================================================ -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
<!-- ============================================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Writing-Autoconf-macros" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Legal-issues-with-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Legal issues with Free Software</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Portable-shell-programming" style="font-size: 16px !important; line-height: 16.6667px !important;">Portable shell programming</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="chapter" style="font-size: 24px !important; line-height: 25px !important;">14 Writing Autoconf macros</h2>

<p style="font-size: 16px !important; line-height: 16.6667px !important;"><em style="font-size: 16px !important; line-height: 16.6667px !important;">FIXME: Needs to be written</em>

<!-- ============================================================================ -->
   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The appendices

<!-- Copyright (C) 1998 Eleftherios Gkioulekas <lf@amath.washington.edu> -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
<!-- ============================================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Legal-issues-with-Free-Software" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Philosophical-issues" style="font-size: 16px !important; line-height: 16.6667px !important;">Philosophical issues</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Writing-Autoconf-macros" style="font-size: 16px !important; line-height: 16.6667px !important;">Writing Autoconf macros</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="appendix" style="font-size: 24px !important; line-height: 25px !important;">Appendix A Legal issues with Free Software</h2>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">If you want to give your programs to other people or use programs that were
written by other people, then you need to worry about copyright. 
The main reason why <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">autoconf</span></samp> and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">automake</span></samp> were developed
was to make sharing software easier. So, if you want to use these
tools to develop free software, it is important to understand copyright. 
In this chapter we will address the legal issues involved with releasing
software to the public. See <a href="#Philosophical-issues" style="font-size: 16px !important; line-height: 16.6667px !important;">Philosophical issues</a>, for a discussion
of the philosophical issues involved.

</p><ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="1" href="#Understanding-Copyright" style="font-size: 16px !important; line-height: 16.6667px !important;">Understanding Copyright</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="2" href="#Software-patents" style="font-size: 16px !important; line-height: 16.6667px !important;">Software patents</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="3" href="#Export-restrictions-on-encryption-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Export restrictions on encryption software</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="4" href="#Freeing-your-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Freeing your software</a>
</li></ul>

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Understanding-Copyright" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Software-patents" style="font-size: 16px !important; line-height: 16.6667px !important;">Software patents</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Legal-issues-with-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Legal issues with Free Software</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Legal-issues-with-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Legal issues with Free Software</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">A.1 Understanding Copyright</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">When you create an original work, like a computer program, or a novel, and so
on, the government automatically grants you a set of legal rights called
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">copyright</dfn>. 
Copyright is the right to obstruct others from <em style="font-size: 16px !important; line-height: 16.6667px !important;">using</em>, <em style="font-size: 16px !important; line-height: 16.6667px !important;">modifying</em>
and <em style="font-size: 16px !important; line-height: 16.6667px !important;">redistributing</em> your work. Anyone that would like to use, modify
or redistribute your work needs to enter an agreement with you. By granting
you this monopoly, the government limits the freedom of the public to
express themselves in ways that involve infringing your copyright. The
government justifies copyright by claiming that it is a bargain that
benefits the public because it encourages the creation of more works. 
<a rel="footnote" href="#fn-9" name="fnd-9" style="font-size: 16px !important; line-height: 16.6667px !important;"><sup style="font-size: 13.3333px !important; line-height: 15px !important;">9</sup></a>
The holder of the copyright, called the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">¡°owner¡±</dfn>, is the only person
that can enforce per copyright.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Copyright ownership can be transfered to another person or organization. 
When a work is being developed by a team, it
makes legal sense to transfer the copyright to a single organization that
can then coordinate enforcement of the copyright. In the free software
community, some people assign their software to the Free Software Foundation. 
The arrangement is that copyright is transfered to the FSF. The FSF then
grants you all the rights back in the form of a license agreement, and
commits itself legally to distributing the work only as free software. 
If you want to do this, you should contact the FSF for more information. 
It is not a good idea to assign your copyright to anyone else, unless you
know what you are getting into. By assigning you rights to someone and
not getting any of those rights back in the form of an agreement, you may place
yourself in a position where you are not allowed to use your own work. 
Unfortunately, if you are employed or a student in a University you have
probably already signed many of your rights away. Universities as well as
companies like to lay as much claim on any copyrightable work you produce
as possible, even work that you do as a hobby that has little to do with
them.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Because copyright does not allow your users to do much with your software,
other than have a copy, you need to give them permissions that allow them
to freely use, modify and redistribute it. 
In the free software community, we standardize on using
a legal document, the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">GNU General Public License</dfn> to grant such
permissions. 
See <a href="#Applying-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">Applying the GPL</a>, for more details on how to use the GPL.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Copyright covers mainly original works. However, it also introduces the
concept of <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">derived works</dfn>. In general, if someone copies a portion
of your work into per work, then it becomes <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">derived work</dfn> of your
work, and both you and person share copyright interest on per work.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If the only information that you give an impartial observer is a copy of
your work and a copy of per work, the observer has no deterministic
way of deciding whether or not per work is legally derived from your work. 
The legal term <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">derived work</dfn> refers to the <em style="font-size: 16px !important; line-height: 16.6667px !important;">process</em> with
which person created per work, rather than an actual inherent property
of the end-result of the effort. 
Your copyright interest is established by
the fact that part of that process involved <em style="font-size: 16px !important; line-height: 16.6667px !important;">copying</em> some of your
work into per work (and then perhaps modifying it, but that is not
relevant to whether or not you have copyright interest).

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">So, if you and someone write two very similar programs, because the
programs are simple, then you don't have copyright interest in each others
work, because you both worked indepedently. If, however, the reason for the
similarity is that person copied your work, then you have copyright interest
on per work. 
When that happens, person can only distribute the resulting program
(i.e. source code, or the executable) under terms that are consistent
with the terms with which person was allowed to have a copy of your work
and use it in per program.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The law is less clear about what happens if person refers to your work
without actually doing any copying. A judge will have to decide this if it
goes to court. This is why when you work on a free software project,
the only way to avoid liabilities like this is by not referring to anyone
else's work, unless per work is also free software. This is one of the many
ways that copyright obstructs cooperation between citizens.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Fortunately there is a legal precedent with derived work and user interfaces. 
The courts have decided that user interfaces, such as the
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">application programming interface</dfn> (API) that a software library is
exporting to the programs that link to it can not be copyrighted. So,
if you want to clone a library, while it is not a good idea to refer
to the actual source code of the library, it is okey to refer to a
description of the interface that the library defines. It is best to
do this by reading the documentation, but if no documentation is available,
reading the header files is the next best thing.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The concept of derived work is very slippery ground and has many gray
areas, especially when it pertains to linking libraries that other
people have written to your programs. 
See <a href="#The-GPL-and-libraries" style="font-size: 16px !important; line-height: 16.6667px !important;">The GPL and libraries</a>, for more discussion on this issue.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Software-patents" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Export-restrictions-on-encryption-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Export restrictions on encryption software</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Understanding-Copyright" style="font-size: 16px !important; line-height: 16.6667px !important;">Understanding Copyright</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Legal-issues-with-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Legal issues with Free Software</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">A.2 Software patents</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">In addition to copyright law, there is another legal beast: the patent law. 
Unlike copyright, which you own automatically by the act of creating the work,
you don't get a patent unless you file an application for it. If approved,
the work is published but others must pay you royalties in order to use it
in any way.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The problem with patents is that they cover algorithms, and
if an algorithm is patented you can neither write nor use an implementation
for it, without a license. 
What makes it worse is that it is very difficult and expensive to
find out whether the algorithms that you use are patented or will be
patented in the future. What makes it insane is that the patent office,
in its infinite stupidity, has patented algorithms that are very trivial
with nothing innovative about them. For example, the use of
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">backing store</dfn> in a multiprocessing window system, like X11, is
covered by patent 4,555,775. In the spring of 1991, the owner of the
patent, AT&amp;T, threatened to sue every member of the X Consortium including
MIT. Backing store is the idea that the windowing system save the contents of
all windows at all times. This way, when a window is covered by another
window and then exposed again, it is redrawn by the windowing system, and
not the code responsible for the application. Other insane patents include
the IBM patent 4,674,040 which covers ¡°cut and paste between files¡± in
a text editor. Recently, a stupid corporation called ¡°Wang¡± tried to take
Netscape to court over a patent that covered ¡°bookmarks¡± and lost.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Even though this situation is ridiculous, software patents are
a very serious problem because they are taken very seriously by the
judicial system. Unfortunately they are not taken equally seriously
by the patent office (also called PTO) itself. The more patents the PTO
approves, the more income the PTO makes. Therefore, the PTO is very eager
to let dubious patents through. After all, they figure that if the patent
is invalid, someone will knock it down in court eventually.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">It is not necessary for someone to have a solid case
to get you into trouble. The cost of litigation is often sufficient extortion
to force small businesses, non-profit organizations and individual software
developers to settle, even when there is not solid case. The only defense
against a patent attack is to prove that there is ¡°prior art¡±; in other
words, you need to show that what is described in the patent had already
been invented before the date on which the application for that patent was
filed. Unfortunately, this is costly, not guaranteed to work, and
the burden of proof rests with the victim of the attack. Another
defense is to make sure you don't have a lot of money. If you are poor,
lawyers are less likely to waste money suing you.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Companies like to use software patents as strategic weapons for applying
extortion, which is unfortunately sanctioned by the law. They build
an arsenal of software patents by trying to pass whatever can get
through the Patent Office. Then years later, when they feel like it,
they can go through their patent arsenal and find someone to sue and
extort some cash.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">There have actually been patent attacks aimed directly against the free
software community. The GNU system does not include the Unix ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">compress</span></samp>¡¯
utility because it infringes a patent, and the patent owner has specifically
targeted the volunteer that wrote a ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">compress</span></samp>¡¯ program for the
GNU project. 
There may be more patent attacks in the future. 
On November of 1998 two
internal memos were leaked from Microsoft about our community. According to
these memos, Microsoft perceives the free software community as a competitor
and they seem to consider a patent-based attack among other things. 
It is important to note however that when an algorithm is patented,
and, worse, when that patent is asserted by the owner, this is an
attack on <em style="font-size: 16px !important; line-height: 16.6667px !important;">everyone</em> that writes software, not only to the free
software community. This is why it is not important who is being targeted
in each specific incident. Patents hurt all of us.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Export-restrictions-on-encryption-software" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Freeing-your-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Freeing your software</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Software-patents" style="font-size: 16px !important; line-height: 16.6667px !important;">Software patents</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Legal-issues-with-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Legal issues with Free Software</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">A.3 Export restrictions on encryption software</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">An additional legal burden to both copyrights and patents is governmental
boneheadedness over encryption algorithms. According to the US government,
a computer program implementing an encryption algorithm is considered
munition, therefore export-control laws on munitions apply. What is
not allowed under these laws is to export the software outside the
borders of the US. The government is pushing the issue by claiming that
making encryption software available on the internet is the same thing
as exporting it. Zimmermann, the author of a popular encryption program,
was sued by the government based on this interpretation of the law. 
However the government's position was not tested at court because the
government decided to drop the charges, after dragging the case for a few
years, long enough to send a message of terror to the internet community. 
The current wisdom seems to be
that it is okey to make encryption software available on the net provided
that you take strong measures that will prevent foreigners to download your
work. It should be noted however that doing so still <em style="font-size: 16px !important; line-height: 16.6667px !important;">is</em> taking
a legal risk that could land you to federal prison in the company of
international smugglers of TOW missiles and M1 Abrams tanks.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The reason why the government's attitude towards encryption is
unconstitutional is because it violates our inalienable right to freedom
of speech. It is the current policy of the government that publishing
a book containing the source code for encryption software is legal, but
publishing the exact same content in digital form is illegal. As the
internet increasingly becomes the library of the future, part of our
freedom will be lost. The reason why the government maintains such
a strange position today is because in the past they have tried to
assert that publishing encryption software <em style="font-size: 16px !important; line-height: 16.6667px !important;">both</em> digitally and on
books is illegal. When the RSA algorithm was discovered, the National
Security Agency (also known as NSA ¨C No Such Agency)
attempted to prevent the inventors from publishing their discovery in
journals and presenting it at conferences. Judges understand books and
conferences and the government had to give up fighting that battle. They
still haven't given up on the electronic front however.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Other countries also have restrictive laws against encryption. In certain
places, like France,  you are not be even allowed to run such programs. 
<a rel="footnote" href="#fn-10" name="fnd-10" style="font-size: 16px !important; line-height: 16.6667px !important;"><sup style="font-size: 13.3333px !important; line-height: 15px !important;">10</sup></a>
The
reason why governments are so paranoid of encryption is because it is the key
to a wide array of technologies that have the potential to empower the
individual citizens to an extent that makes governments uncomfortable. 
Encryption is routinely used now by human rights activists operating on
totalitarian countries. Encryption can also be used to create an
unsanctioned para-economy based on digital cash, and allow individuals
to carry out transactions and contracts completely anonymously. 
These prospects are not good news for Big Brother.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The Free Software Foundation is fighting the US government export
restrictions very effectively by asking volunteers in a free country
to develop free encryption software. The GNU Privacy Guard is now very
stable, and is already being used by software developers. 
For more information, see <a href="http://www.gnupg.org/" style="font-size: 16px !important; line-height: 16.6667px !important;">http://www.gnupg.org/</a>.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Freeing-your-software" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Export-restrictions-on-encryption-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Export restrictions on encryption software</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Legal-issues-with-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Legal issues with Free Software</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">A.4 Freeing your software</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Both copyright and patent laws are being used mainly to destroy our
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">freedom</dfn> to cooperate with our fellow hackers. 
By freedom we refer to three things: the freedom to
use software, the freedom to modify it and improve it, and the freedom
to redistribute it with the modifications and improvements so that the
whole community benefits. Combined with the possible default assignment of
your rights to an employer or university, the laws can actually interfere
even with your ability to write computer programs for a hobby and cooperate
with other hackers on that basis!

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To defend our freedoms from those
who would like to take them from us, the free software community uses the
General Public License, also known as the GPL. In broads strokes, the GPL
does the following:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">Grants you unrestricted permission to run the software and maintain as
many copies as you like. You can also make personal custom modifications
and use them freely. The GNU GPL does not restrict what you do in the
privacy of your own computer in any way. On the contrary it waives all
the restrictions that the copyright law applies to private use. 
It only kicks in when you
distribute the software you have received to other people. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Grants permission to redistribute the software or modified versions (derived
work) provided that you do so <strong style="font-size: 16px !important; line-height: 16.6667px !important;">only</strong> under the terms of the GNU public
license. This means that if you make any changes, they must also be
free. This protects the freedom of the package by forbidding someone
to make a free version proprietary. This measure is called
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">copyleft</dfn> because it subverts the copyright law to do the opposite of
what copyright is normally used for (i.e. to prevent a user to make a
proprietary package free). The GNU GPL does not oblige you to distribute
your modifications. It only requires that you distribute them freely,
<em style="font-size: 16px !important; line-height: 16.6667px !important;">if</em> you choose to distribute them at all. The decision of whether
or not to distribute your derived work is entirely up to you. 
The freedom to choose <em style="font-size: 16px !important; line-height: 16.6667px !important;">not</em> to distribute your modifications is
as important as the freedom to distribute them. The GPL grants you both
freedoms. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Disclaims all warranty to protect the authors from lawsuits, including
various implied warranties such as the warranty for <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">merchantability</dfn>
and <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">fitness for a particular purpose</dfn>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Protects the software's freedom from patents as much as this is possible. 
The scenario that we want to avoid is someone receiving the source code,
and then filing a patent application for the algorithms it uses, effectively
making the software proprietary. If you do that, the GPL will forbid you from
redistributing the software as well as derived work. So you will not want
to do it. The patent law itself will prevent someone else, who distributes
a competing product, to patent the algorithm if your implementation predates
his. 
</li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">The purpose of the GPL is to use the copyright law to encourage a world in
which software is not copyrighted. If copyright didn't cover software, then
we would all be free to use, modify and redistribute software,
<em style="font-size: 16px !important; line-height: 16.6667px !important;">and</em> we would not be able to restrict others from enjoying these
freedoms because there would be no law giving anyone such power. 
One way to grant the freedoms to the users of your software is
to revoke your copyright on the software completely. This is called putting
your work in the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">public domain</dfn>. The problem with this is that it
only grants the freedoms. It does not create the reality in which no-one
can take these freedoms away from derived works. In fact the copyright law
covers by default derived works regardless of whether the original was
public domain or copyrighted. By distributing your work under the GPL,
you grant the same freedoms, and at the same time you protect these freedoms
from hoarders.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU GPL is a legal instrument that has been
designed to create a
safe haven in which software can be written free from copyright law
encumbrance. It allows developers to freely share their work with
a friendly community that is also willing to share theirs, and at the
same time protect them from being exploited by publishers of proprietary
software. Many developers would not contribute to our community without
this protection.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To apply the GPL to your programs you need to do the following things:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">Attach a copy of the GNU public license to the toplevel directory of your
source code in a file called <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">COPYING</span></samp>. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Include a legal notice to <em style="font-size: 16px !important; line-height: 16.6667px !important;">every</em> file that you want covered by the GPL,
saying that it is covered by the GPL. It is important that all files that
constitute source code must include this notice, including <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">Makefile.am</span></samp>,
<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">configure.in</span></samp> files and shell scripts. 
The legal notice should look like this:
     <pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          // Copyright (C) (years) (Your Name) &lt;your@email.address&gt;
          //
          // This program is free software; you can redistribute it and/or
          // modify it under the terms of the GNU General Public License
          // as published by the Free Software Foundation; either
          // version 2 of the License, or (at your option) any later
          // version.
          //
          // This program is distributed in the hope that it will be useful,
          // but WITHOUT ANY WARRANTY; without even the implied warranty of
          // MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
          // GNU General Public License for more details.
          //
          // You should have received a copy of the GNU General Public License
          // along with this program; if not, write to the Free Software
          // Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">If you have assigned your copyright to an organization, like the Free
Software Foundation, then you should probably fashion your copyright
notice like this:
     </p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">          // Copyright (C) (years) Free Software Foundation
          // (your name) &lt;your@email.address&gt; (initial year)
          // etc...
</pre>
     <p class="noindent" style="font-size: 16px !important; line-height: 16.6667px !important;">This legal notice works like a subroutine. By invoking it, you invoke the
full text of the GNU General Public License which is too lengthy to include
in every source file. Where you see ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">(years)</span></samp>¡¯ you need to list all the
years in which you finished preparing a version that was actually released,
and which was an ancestor to the current version. This list is
<em style="font-size: 16px !important; line-height: 16.6667px !important;">not</em> the list of years in which versions were released. It is a list
of years in which versions, later released, were completed. If you finish
a version on Dec 31, 1997 and release it on Jan 1, 1998, you need to
include 1997, but you do not need to include 1998. This rule is complicated,
but it is dictated by international copyright law. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Use the <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">AUTHORS</span></samp> file to keep records of who wrote what. These
records will be important if you decide at some point to register your
copyright. They are also important if you plan to assign your work to the
FSF, because they will want to register the copyright. 
We discuss this in more detail later. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If you modify someone else's GPL covered file make sure to comply with
section 2 of the GPL. To do that place notices stating that you changed
the file and the date of the change. Also your program should advertise the
fact that it is free software, that there is no warranty and that it can
be redistributed under the condition of the GPL. A standard way of doing
this is to make your program output this notice when it is passed the
<code style="font-size: 12px !important; line-height: 14.1667px !important;">--version</code> command-line flag. For details please read the GPL. 
</li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">If you are unfamiliar with all this legalese you may find it surprising;
you might even find it stupid. This is a very natural reaction. Until 1980,
software copyright was not taken seriously in the US. In fact copyrights
then had to be registered in order to be valid, and it was very natural
for people to just copy software around, even though they knew it was
illegal. It took significant amounts of
lobbying and
propaganda by proprietary publishers to cultivate the current litigious
paranoia over copyrights and ¡°convince¡± the public that helping out their
neighbour by giving them an unauthorized copy is not only illegal, but
it also ¡°morally wrong¡±. Even though
copyright laws are international, through treaties,
there are many countries in the world, where this brainwashing hasn't yet
taken place, and where people still make unauthorized copies of software for
their friends with no second thoughts. Such people are being described
with smear words like ¡°pirates¡± by publishers and their lawyers, but
it is not true that these people do what they do because of a malicious
intent. These people do what they do, because it is natural for them to
be nice and help their friends.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">One problem with this attitude is that many of us don't want to disobey
the law, because copyright is an indiscriminate weapon that cuts both ways. 
We prefer therefore to beat the hoarders at their own game. This means
that we can not use, modify or distribute programs that are not
distributed with a copyright notice and appropriate permissions, because
the default status of such programs is that
<em style="font-size: 16px !important; line-height: 16.6667px !important;">no permissions are granted whatsoever</em>. 
If you write a program that you want to share with other people,
then please apply the terms of the GPL to the copies that you distribute,
so that your friends can use, modify and share the program with their
friends, without breaking any laws and to protect your contribution
to our community from the hoarders. Please do not violate copyright law. 
Instead, say no to proprietary software and use free software on the
free GNU/Linux operating system.

<!-- Copyright (C) 1998 Eleftherios Gkioulekas <lf@amath.washington.edu> -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Philosophical-issues" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Licensing-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Licensing Free Software</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Legal-issues-with-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Legal issues with Free Software</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="appendix" style="font-size: 24px !important; line-height: 25px !important;">Appendix B Philosophical issues</h2>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU development tools were written primarily to aid the development
and distribution of <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">free software</dfn> in the form of source code
distributions. The philosophy of the GNU project, that software should be
free, is very important to the future of our community. Now that free software
systems, like GNU/Linux, have been noticed by the mainstream media,
our community will have to face many challenges to our freedom. 
We may have a free operating system today, but if we fail to deal with
these challenges, we will not have one tomorrow. What are these challenges? 
Three that we have already had to face are: secret hardware, non-free
libraries, and software patents. Who knows what else we might have to face
tomorrow. Will we respond to these challenges and protect our freedom? 
That depends on our philosophy.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In this appendix we include a few articles written by Richard Stallman
that discuss the philosophical concerns that lead to the free software
movement. The text of these articles is included here with permission
under the following terms:

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Copying Notice</strong>
</p><pre class="display" style="font-size: 16px !important; line-height: 16.6667px !important;">     Copyright &#169; 1998 Free Software Foundation Inc
     59 Temple Place, Suite 330, Boston, MA 02111, USA
     Verbatim copying and distribution is permitted in any medium,
     provided this notice is preserved.
</pre>
   <p style="font-size: 16px !important; line-height: 16.6667px !important;">All of these articles, and others are distributed on the web at:<br>
<a href="http://www.gnu.org/philosophy/index.html" style="font-size: 16px !important; line-height: 16.6667px !important;">http://www.gnu.org/philosophy/index.html</a>

</p><ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="1" href="#The-Right-to-Read" style="font-size: 16px !important; line-height: 16.6667px !important;">The Right to Read</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="2" href="#What-is-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">What is Free Software</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="3" href="#Why-software-should-not-have-owners" style="font-size: 16px !important; line-height: 16.6667px !important;">Why software should not have owners</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="4" href="#Why-free-software-needs-free-documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Why free software needs free documentation</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="5" href="#Copyleft_003b-Pragmatic-Idealism" style="font-size: 16px !important; line-height: 16.6667px !important;">Copyleft; Pragmatic Idealism</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="6" href="#The-X-Windows-Trap" style="font-size: 16px !important; line-height: 16.6667px !important;">The X Windows Trap</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="7" href="#Categories-of-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Categories of software</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="8" href="#Confusing-words" style="font-size: 16px !important; line-height: 16.6667px !important;">Confusing words</a>
</li></ul>

<!-- ============================================================ -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="The-Right-to-Read" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#What-is-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">What is Free Software</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Philosophical-issues" style="font-size: 16px !important; line-height: 16.6667px !important;">Philosophical issues</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Philosophical-issues" style="font-size: 16px !important; line-height: 16.6667px !important;">Philosophical issues</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">B.1 The Right to Read</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;"><em style="font-size: 16px !important; line-height: 16.6667px !important;">This article appeared in the February 1997 issue of Communications of the ACM (Volume 40, Number 2).</em>

   </p><blockquote style="font-size: 16px !important; line-height: 16.6667px !important;">
  (from "The Road To Tycho", a collection of articles about the
     antecedents of the Lunarian Revolution, published in Luna City in
     2096)
</blockquote>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">For Dan Halbert, the road to Tycho began in college when Lissa Lenz
asked to borrow his computer. Hers had broken down, and unless she
could borrow another, she would fail her midterm project. There was no
one she dared ask, except Dan.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">This put Dan in a dilemma. He had to help her, but if he lent her his
computer, she might read his books. Aside from the fact that you could
go to prison for many years for letting someone else read your books,
the very idea shocked him at first. Like everyone, he had been taught
since elementary school that sharing books was nasty and
wrong, something that only pirates would do.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">And there wasn't much chance that the SPA, the Software Protection
Authority, would fail to catch him. In his software class, Dan had
learned that each book had a copyright monitor that reported when and
where it was read, and by whom, to Central Licensing. (They used this
information to catch reading pirates, but also to sell personal
interest profiles to retailers.) The next time his computer was
networked, Central Licensing would find out. He, as computer owner,
would receive the harshest punishment, for not taking pains to prevent
the crime.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Of course, Lissa did not necessarily intend to read his books. She
might want the computer only to write her midterm. But Dan knew she
came from a middle-class family and could hardly afford the tuition,
let alone her reading fees. Reading his books might be the only way
she could graduate. He understood this situation; he himself had had
to borrow to pay for all the research papers he read. (10% of those
fees went to the researchers who wrote the papers; since Dan aimed for
an academic career, he could hope that his own research papers, if
frequently referenced, would bring in enough to repay this loan.)

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Later on, Dan would learn there was a time when anyone could go to the
library and read journal articles, and even books, without having to
pay. There were independent scholars who read thousands of pages
without government library grants. But in the 1990s, both commercial
and nonprofit journal publishers had begun charging fees for access. 
By 2047, libraries offering free public access to scholarly literature
were a dim memory.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">There were ways, of course, to get around the SPA and Central
Licensing. They were themselves illegal. Dan had had a classmate in
software, Frank Martucci, who had obtained an illicit debugging tool,
and used it to skip over the copyright monitor code when reading
books. But he had told too many friends about it, and one of them
turned him in to the SPA for a reward (students deep in debt were
easily tempted into betrayal). In 2047, Frank was in prison, not for
pirate reading, but for possessing a debugger.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Dan would later learn that there was a time when anyone could have
debugging tools. There were even free debugging tools available on CD
or downloadable over the net. But ordinary users started using them to
bypass copyright monitors, and eventually a judge ruled that this had
become their principal use in actual practice. This meant they were
illegal; the debuggers' developers were sent to prison.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Programmers still needed debugging tools, of course, but debugger
vendors in 2047 distributed numbered copies only, and only to
officially licensed and bonded programmers. The debugger Dan used in
software class was kept behind a special firewall so that it could be
used only for class exercises.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">It was also possible to bypass the copyright monitors by installing a
modified system kernel. Dan would eventually find out about the free
kernels, even entire free operating systems, that had existed around
the turn of the century. But not only were they illegal, like
debuggers; you could not install one if you had one, without knowing
your computer's root password. And neither the FBI nor Microsoft
Support would tell you that.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Dan concluded that he couldn't simply lend Lissa his computer. But he
couldn't refuse to help her, because he loved her. Every chance to
speak with her filled him with delight. And that she chose him to ask
for help, that could mean she loved him too.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Dan resolved the dilemma by doing something even more unthinkable¨Che
lent her the computer, and told her his password. This way, if Lissa
read his books, Central Licensing would think he was reading them. It
was still a crime, but the SPA would not automatically find out about
it. They would only find out if Lissa reported him.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Of course, if the school ever found out that he had given Lissa his
own password, it would be curtains for both of them as students,
regardless of what she had used it for. School policy was that any
interference with their means of monitoring students' computer use was
grounds for disciplinary action. It didn't matter whether you did
anything harmful. The offense was making it hard for the
administrators to check on you. They assumed this meant you were doing
something else forbidden, and they did not need to know what it was.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Students were not usually expelled for this, not directly. Instead
they were banned from the school computer systems, and would
inevitably fail all their classes.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Later, Dan would learn that this kind of university policy started
only in the 1980s, when university students in large numbers began
using computers. Previously, universities maintained a different
approach to student discipline; they punished activities that were
harmful, not those that merely raised suspicion.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Lissa did not report Dan to the SPA. His decision to help her led to
their marriage, and also led them to question what they had been
taught about piracy as children. The couple began reading about the
history of copyright, about the Soviet Union and its restrictions on
copying, and even the original United States Constitution. They moved
to Luna, where they found others who had likewise gravitated away from
the long arm of the SPA. When the Tycho Uprising began in 2062, the
universal right to read soon became one of its central aims.

   </p><pre class="sp" style="font-size: 12px !important;">
</pre>
<strong style="font-size: 16px !important; line-height: 16.6667px !important;">Author's Note</strong>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">The right to read is a battle being fought today. Although it may take
50 years for our present way of life to fade into obscurity, most of
the specific laws and practices described above have already been
proposed, either by the Clinton Administration or by publishers.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">There is one exception: the idea that the FBI and Microsoft will keep
the root passwords for personal computers. This is an extrapolation
from the Clipper chip and similar Clinton Administration key-escrow
proposals, together with a long-term trend: computer systems are
increasingly set up to give absentee operators control over the people
actually using the computer system.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The SPA, which actually stands for Software Publisher's Association,
is not today an official police force. Unofficially, it acts like one. 
It invites people to inform on their coworkers and friends. Like the
Clinton Administration, it advocates a policy of collective
responsibility whereby computer owners must actively enforce copyright
or be punished.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The SPA is currently threatening small Internet service providers,
demanding they permit the SPA to monitor all users. Most ISPs
surrender when threatened, because they cannot afford to fight back in
court. (Atlanta Journal-Constitution, 1 Oct 96, D3.) At least one ISP,
Community ConneXion in Oakland CA, refused the demand and was actually
sued. The SPA is said to have dropped this suit recently, but they are
sure to continue the campaign in various other ways.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The university security policies described above are not imaginary. 
For example, a computer at one Chicago-area university prints this
message when you log in (quotation marks are in the original):

   </p><blockquote style="font-size: 16px !important; line-height: 16.6667px !important;">
¡°This system is for the use of authorized users only. Individuals
using this computer system without authority or in the excess of
their authority are subject to having all their activities on this
system monitored and recorded by system personnel. In the course of
monitoring individuals improperly using this system or in the
course of system maintenance, the activities of authorized user may
also be monitored. Anyone using this system expressly consents to
such monitoring and is advised that if such monitoring reveals
possible evidence of illegal activity or violation of University
regulations system personnel may provide the evidence of such
monitoring to University authorities and/or law enforcement
officials.¡±
</blockquote>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">This is an interesting approach to the Fourth Amendment: pressure most
everyone to agree, in advance, to waive their rights under it.

   </p><pre class="sp" style="font-size: 12px !important;">
</pre>
<strong style="font-size: 16px !important; line-height: 16.6667px !important;">References</strong>

     <ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">The administration's ¡°White Paper¡±: Information Infrastructure Task Force,
Intellectual Property and the National Information Infrastructure: The
Report of the Working Group on Intellectual Property Rights (1995). 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><cite style="font-size: 16px !important; line-height: 16.6667px !important;">An explanation of the White Paper: The Copyright Grab</cite>, Pamela Samuelson, Wired,
Jan. 1996
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><cite style="font-size: 16px !important; line-height: 16.6667px !important;">Sold Out</cite>, James Boyle, New York Times, 31 March 1996
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><cite style="font-size: 16px !important; line-height: 16.6667px !important;">Public Data or Private Data</cite>, Washington Post, 4 Nov 1996
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a href="http://www.public-domain.org/" style="font-size: 16px !important; line-height: 16.6667px !important;">Union for the Public Domain</a>,
a new organization which aims to resist and reverse the overextension of
intellectual property powers. 
</li></ul>

<!-- ============================================================ -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="What-is-Free-Software" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Why-software-should-not-have-owners" style="font-size: 16px !important; line-height: 16.6667px !important;">Why software should not have owners</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#The-Right-to-Read" style="font-size: 16px !important; line-height: 16.6667px !important;">The Right to Read</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Philosophical-issues" style="font-size: 16px !important; line-height: 16.6667px !important;">Philosophical issues</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">B.2 What is Free Software</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;"><dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Free software</dfn> is a matter of liberty, not price. To understand the
concept, you should think of <em style="font-size: 16px !important; line-height: 16.6667px !important;">free speech</em>, not <em style="font-size: 16px !important; line-height: 16.6667px !important;">free beer</em>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;"><dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Free software</dfn> refers to the users' freedom to run, copy,
distribute, study, change and improve the software. More precisely, it
refers to three levels of freedom:

     </p><ol start="1" style="font-size: 16px !important; line-height: 16.6667px !important;" type="1">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">The freedom to study how the program works and adapt it to your
needs. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The freedom to redistribute copies so you can share with your
neighbor. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The freedom to improve the program, and release your improvements
to the public, so that the whole community benefits.
        </li></ol>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">You may have paid money to get copies of GNU software, or you may have
obtained copies at no charge. But regardless of how you got your
copies, you always have the freedom to copy and change the software. 
In the GNU project, we use <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">copyleft</dfn> to protect these freedoms
legally for everyone.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">See <a href="#Categories-of-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Categories of software</a>, for a description of
how ¡°free software,¡± ¡°copylefted software¡± and other categories of
software relate to each other.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">When talking about free software, it is best to avoid using terms like
¡°give away¡± or ¡°for free¡±, because those terms imply that the
issue is about price, not freedom. Some common terms such as
¡°piracy¡± embody opinions we hope you won't endorse. 
See <a href="#Confusing-words" style="font-size: 16px !important; line-height: 16.6667px !important;">Confusing words</a>, for a discussion of these terms.

<!-- ============================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Why-software-should-not-have-owners" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Why-free-software-needs-free-documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Why free software needs free documentation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#What-is-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">What is Free Software</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Philosophical-issues" style="font-size: 16px !important; line-height: 16.6667px !important;">Philosophical issues</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">B.3 Why software should not have owners</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Digital information technology contributes to the world by
making it easier to copy and modify information. Computers
promise to make this easier for all of us.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Not everyone wants it to be easier. The system of copyright
gives software programs ¡°owners¡±, most of whom aim to
withhold software's potential benefit from the rest of the public. 
They would like to be the only ones who can copy and modify the
software that we use.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The copyright system grew up with printing¡ªa technology for
mass production copying. Copyright fit in well with this
technology because it restricted only the mass producers of
copies. It did not take freedom away from readers of books. An
ordinary reader, who did not own a printing press, could copy
books only with pen and ink, and few readers were sued for that.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Digital technology is more flexible than the printing press: when
information has digital form, you can easily copy it to share it
with others. This very flexibility makes a bad fit with a system
like copyright. That's the reason for the increasingly nasty and
draconian measures now used to enforce software copyright. 
Consider these four practices of the Software Publishers
Association (SPA):

     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">Massive propaganda saying it is wrong to disobey the
owners to help your friend. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Solicitation for stool pigeons to inform on their
coworkers and colleagues. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Raids (with police help) on offices and schools, in which
people are told they must prove they are innocent of
illegal copying. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Prosecution (by the US government, at the SPA's
request) of people such as MIT's David LaMacchia, not
for copying software (he is not accused of copying any),
but merely for leaving copying facilities unguarded and
failing to censor their use. 
</li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">All four practices resemble those used in the former Soviet
Union, where every copying machine had a guard to prevent
forbidden copying, and where individuals had to copy information
secretly and pass it from hand to hand as ¡°samizdat¡±. There is
of course a difference: the motive for information control in the
Soviet Union was political; in the US the motive is profit. But it
is the actions that affect us, not the motive. Any attempt to
block the sharing of information, no matter why, leads to the
same methods and the same harshness.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Owners make several kinds of arguments for giving them the
power to control how we use information:
     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Name calling</strong>:
Owners use smear words such as ¡°piracy¡± and
¡°theft¡±, as well as expert terminology such as
¡°intellectual property¡± and ¡°damage¡±, to suggest a
certain line of thinking to the public¡ªa simplistic
analogy between programs and physical objects.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">Our ideas and intuitions about property for material
objects are about whether it is right to <em style="font-size: 16px !important; line-height: 16.6667px !important;">take an object away</em>
from someone else. They don't directly apply to
<em style="font-size: 16px !important; line-height: 16.6667px !important;">making a copy</em> of something. But the owners ask us to
apply them anyway. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Exaggeration</strong>:
Owners say that they suffer ¡°harm¡± or ¡°economic
loss¡± when users copy programs themselves. But the
copying has no direct effect on the owner, and it harms
no one. The owner can lose only if the person who made
the copy would otherwise have paid for one from the
owner.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">A little thought shows that most such people would not
have bought copies. Yet the owners compute their
¡°losses¡± as if each and every one would have bought a
copy. That is exaggeration¡ªto put it kindly. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">The law</strong>:
Owners often describe the current state of the law, and
the harsh penalties they can threaten us with. Implicit in
this approach is the suggestion that today's law reflects
an unquestionable view of morality¡ªyet at the same
time, we are urged to regard these penalties as facts of
nature that can't be blamed on anyone.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">This line of persuasion isn't designed to stand up to
critical thinking; it's intended to reinforce a habitual
mental pathway.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">It's elementary that laws don't decide right and wrong. 
Every American should know that, forty years ago, it
was against the law in many states for a black person to
sit in the front of a bus; but only racists would say
sitting there was wrong. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Natural rights</strong>:
Authors often claim a special connection with programs
they have written, and go on to assert that, as a result,
their desires and interests concerning the program
simply outweigh those of anyone else¡ªor even those
of the whole rest of the world. (Typically companies, not
authors, hold the copyrights on software, but we are
expected to ignore this discrepancy.)

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">To those who propose this as an ethical axiom¡ªthe
author is more important than you¡ªI can only say that
I, a notable software author myself, call it bunk.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">But people in general are only likely to feel any
sympathy with the natural rights claims for two reasons.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">One reason is an overstretched analogy with material
objects. When I cook spaghetti, I do object if someone
else eats it, because then I cannot eat it. His action
hurts me exactly as much as it benefits him; only one of
us can eat the spaghetti, so the question is, which? The
smallest distinction between us is enough to tip the
ethical balance.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">But whether you run or change a program I wrote affects
you directly and me only indirectly. Whether you give a
copy to your friend affects you and your friend much
more than it affects me. I shouldn't have the power to
tell you not to do these things. No one should.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The second reason is that people have been told that
natural rights for authors is the accepted and
unquestioned tradition of our society.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">As a matter of history, the opposite is true. The idea of
natural rights of authors was proposed and decisively
rejected when the US Constitution was drawn up. That's
why the Constitution only permits a system of copyright
and does not require one; that's why it says that
copyright must be temporary. It also states that the
purpose of copyright is to promote progress¡ªnot to
reward authors. Copyright does reward authors
somewhat, and publishers more, but that is intended as a
means of modifying their behaviour.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The real established tradition of our society is that
copyright cuts into the natural rights of the
public¡ªand that this can only be justified for the
public's sake. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Economics</strong>
The final argument made for having owners of software
is that this leads to production of more software.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">Unlike the others, this argument at least takes a
legitimate approach to the subject. It is based on a valid
goal¡ªsatisfying the users of software. And it is
empirically clear that people will produce more of
something if they are well paid for doing so.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">But the economic argument has a flaw: it is based on the
assumption that the difference is only a matter of how
much money we have to pay. It assumes that
¡°production of software¡± is what we want, whether the
software has owners or not.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">People readily accept this assumption because it
accords with our experiences with material objects. 
Consider a sandwich, for instance. You might well be
able to get an equivalent sandwich either free or for a
price. If so, the amount you pay is the only difference. 
Whether or not you have to buy it, the sandwich has the
same taste, the same nutritional value, and in either
case you can only eat it once. Whether you get the
sandwich from an owner or not cannot directly affect
anything but the amount of money you have afterwards.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">This is true for any kind of material object¡ªwhether or
not it has an owner does not directly affect what it is, or
what you can do with it if you acquire it.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">But if a program has an owner, this very much affects
what it is, and what you can do with a copy if you buy
one. The difference is not just a matter of money. The
system of owners of software encourages software
owners to produce something¡ªbut not what society
really needs. And it causes intangible ethical pollution
that affects us all.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">What does society need? It needs information that is
truly available to its citizens¡ªfor example, programs
that people can read, fix, adapt, and improve, not just
operate. But what software owners typically deliver is a
black box that we can't study or change.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Society also needs freedom. When a program has an
owner, the users lose freedom to control part of their
own lives.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">And above all society needs to encourage the spirit of
voluntary cooperation in its citizens. When software
owners tell us that helping our neighbors in a natural
way is ¡°piracy¡±, they pollute our society's civic spirit.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">This is why we say that free software is a matter of
freedom, not price.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The economic argument for owners is erroneous, but the
economic issue is real. Some people write useful
software for the pleasure of writing it or for admiration
and love; but if we want more software than those
people write, we need to raise funds.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">For ten years now, free software developers have tried
various methods of finding funds, with some success. 
There's no need to make anyone rich; the median US
family income, around $35k, proves to be enough
incentive for many jobs that are less satisfying than
programming.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">For years, until a fellowship made it unnecessary, I
made a living from custom enhancements of the free
software I had written. Each enhancement was added to
the standard released version and thus eventually
became available to the general public. Clients paid me
so that I would work on the enhancements they wanted,
rather than on the features I would otherwise have
considered highest priority.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The Free Software Foundation (FSF), a tax-exempt
charity for free software development, raises funds by
selling GNU CD-ROMs, T-shirts, manuals, and deluxe
distributions, (all of which users are free to copy and
change), as well as from donations. It now has a staff of
five programmers, plus three employees who handle mail
orders.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Some free software developers make money by selling
support services. Cygnus Support, with around 50
employees [when this article was written], estimates
that about 15 per cent of its staff activity is free
software development¡ªa respectable percentage for a
software company.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Companies including Intel, Motorola, Texas Instruments
and Analog Devices have combined to fund the
continued development of the free GNU compiler for the
language C. Meanwhile, the GNU compiler for the Ada
language is being funded by the US Air Force, which
believes this is the most cost-effective way to get a
high quality compiler. [Air Force funding ended some
time ago; the GNU Ada Compiler is now in service, and
its maintenance is funded commercially.]

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">All these examples are small; the free software
movement is still small, and still young. But the example
of listener-supported radio in this country [the US]
shows it's possible to support a large activity without
forcing each user to pay. 
</p></li></ul>

   <p style="font-size: 16px !important; line-height: 16.6667px !important;">As a computer user today, you may find yourself using a
proprietary program. If your friend asks to
make a copy, it would be wrong to refuse. Cooperation is more
important than copyright. But underground, closet cooperation
does not make for a good society. A person should aspire to live
an upright life openly with pride, and this means saying ¡°No¡± to
proprietary software.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">You deserve to be able to cooperate openly and freely with other
people who use software. You deserve to be able to learn how
the software works, and to teach your students with it. You
deserve to be able to hire your favorite programmer to fix it when
it breaks.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">You deserve free software.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Why-free-software-needs-free-documentation" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Copyleft_003b-Pragmatic-Idealism" style="font-size: 16px !important; line-height: 16.6667px !important;">Copyleft; Pragmatic Idealism</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Why-software-should-not-have-owners" style="font-size: 16px !important; line-height: 16.6667px !important;">Why software should not have owners</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Philosophical-issues" style="font-size: 16px !important; line-height: 16.6667px !important;">Philosophical issues</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">B.4 Why free software needs free documentation</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">The biggest deficiency in free operating systems is not in the
software¨Cit is the lack of good free manuals that we can include in
these systems. Many of our most important programs do not come with
full manuals. Documentation is an essential part of any software
package; when an important free software package does not come with a
free manual, that is a major gap. We have many such gaps today.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Once upon a time, many years ago, I thought I would learn Perl. I got a
copy of a free manual, but I found it hard to read. When I asked Perl
users about alternatives, they told me that there were better introductory
manuals¨Cbut those were not free.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Why was this? The authors of the good manuals had written them for
O'Reilly Associates, which published them with restrictive terms¨Cno
copying, no modification, source files not available¨Cwhich exclude
them from the free software community.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">That wasn't the first time this sort of thing has happened, and (to our
community's great loss) it was far from the last. Proprietary manual
publishers have enticed a great many authors to restrict their manuals
since then. Many times I have heard a GNU user eagerly tell me about a
manual that he is writing, with which he expects to help the GNU
project¨Cand then had my hopes dashed, as he proceeded to explain that
he had signed a contract with a publisher that would restrict it so that
we cannot use it.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Given that writing good English is a rare skill among programmers, we
can ill afford to lose manuals this way.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Free documentation, like free software, is a matter of freedom, not price. 
The problem with these manuals was not that O'Reilly Associates
charged a price for printed copies¨Cthat in itself is fine. (The Free
Software Foundation sells printed copies of free GNU manuals, too.) 
But GNU manuals are available in source code form, while these
manuals are available only on paper. GNU manuals come with
permission to copy and modify; the Perl manuals do not. These
restrictions are the problems.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The criterion for a free manual is pretty much the same as for free
software: it is a matter of giving all users certain freedoms. 
Redistribution (including commercial redistribution) must be permitted,
so that the manual can accompany every copy of the program, on-line or
on paper. Permission for modification is crucial too.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">As a general rule, I don't believe that it is essential for people to have
permission to modify all sorts of articles and books. The issues for
writings are not necessarily the same as those for software. For
example, I don't think you or I are obliged to give permission to modify
articles like this one, which describe our actions and our views.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">But there is a particular reason why the freedom to modify is crucial for
documentation for free software. When people exercise their right to
modify the software, and add or change its features, if they are
conscientious they will change the manual too¨Cso they can provide
accurate and usable documentation with the modified program. A manual
which forbids programmers to be conscientious and finish the job, or
more precisely requires them to write a new manual from scratch if they
change the program, does not fill our community's needs.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">While a blanket prohibition on modification is unacceptable, some kinds
of limits on the method of modification pose no problem. For example,
requirements to preserve the original author's copyright notice, the
distribution terms, or the list of authors, are ok. It is also no problem to
require modified versions to include notice that they were modified, even
to have entire sections that may not be deleted or changed, as long as
these sections deal with nontechnical topics. (Some GNU manuals have
them.)

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">These kinds of restrictions are not a problem because, as a practical
matter, they don't stop the conscientious programmer from adapting the
manual to fit the modified program. In other words, they don't block the
free software community from doing its thing with the program and the
manual together.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">However, it must be possible to modify all the technical content of the
manual; otherwise, the restrictions do block the community, the manual
is not free, and so we need another manual.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Unfortunately, it is often hard to find someone to write another manual
when a proprietary manual exists. The obstacle is that many users think
that a proprietary manual is good enough¨Cso they don't see the need to
write a free manual. They do not see that the free operating system has
a gap that needs filling.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Why do users think that proprietary manuals are good enough? Some
have not considered the issue. I hope this article will do something to
change that.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Other users consider proprietary manuals acceptable for the same
reason so many people consider proprietary software acceptable: they
judge in purely practical terms, not using freedom as a criterion. These
people are entitled to their opinions, but since those opinions spring from
values which do not include freedom, they are no guide for those of us
who do value freedom.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Please spread the word about this issue. We continue to lose manuals to
proprietary publishing. If we spread the word that proprietary manuals
are not sufficient, perhaps the next person who wants to help GNU by
writing documentation will realize, before it is too late, that he must
above all make it free.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">We can also encourage commercial publishers to sell free, copylefted
manuals instead of proprietary ones. One way you can help this is to
check the distribution terms of a manual before you buy it, and prefer
copylefted manuals to non-copylefted ones.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Copyleft;-Pragmatic-Idealism" style="font-size: 16px !important;"></a>
<a name="Copyleft_003b-Pragmatic-Idealism" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#The-X-Windows-Trap" style="font-size: 16px !important; line-height: 16.6667px !important;">The X Windows Trap</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Why-free-software-needs-free-documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Why free software needs free documentation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Philosophical-issues" style="font-size: 16px !important; line-height: 16.6667px !important;">Philosophical issues</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">B.5 Copyleft; Pragmatic Idealism</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Every decision a person makes stems from the person's values and
goals.  People can have many different goals and values; fame, profit,
love, survival, fun, and freedom, are just some of the goals that a
good person might have.  When the goal is to help others as well as
oneself, we call that idealism.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">My work on free software is motivated by an idealistic goal: spreading
freedom and cooperation.  I want to encourage free software to spread,
replacing proprietary software which forbids cooperation, and thus
make our society better.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">That's the basic reason why the GNU General Public License is written
the way it is¨Cas a copyleft.  All code added to a GPL-covered program
must be free software, even if it is put in a separate file.  I make
my code available for use in free software, and not for use in
proprietary software, in order to encourage other people who write
software to make it free as well.  I figure that since proprietary
software developers use copyright to stop us from sharing, we
cooperators can use copyright to give other cooperators an advantage
of their own: they can use our code.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Not everyone who uses the GNU GPL has this goal.  Many years ago, a
friend of mine was asked to rerelease a copylefted program under
non-copyleft terms, and he responded more or less like this:
</p><pre class="display" style="font-size: 16px !important; line-height: 16.6667px !important;">     Sometimes I work on free software, and sometimes I work on
     proprietary software¨Cbut when I work on proprietary software, I
     expect to get <em style="font-size: 16px !important; line-height: 16.6667px !important;">paid</em>.
</pre>
   <p style="font-size: 16px !important; line-height: 16.6667px !important;">He was willing to share his work with a community that shares
software, but saw no reason to give a handout to a business.  His goal
was different from mine, but he decided that the GNU GPL was useful
for his goal too.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If you want to accomplish something in the world, idealism is not
enough¨Cyou need to choose a method which works to achieve the goal. 
In other words, you need to be ¡°pragmatic.¡± Is the GPL pragmatic? 
Let's look at its results.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Consider GNU C++.  Why do we have a free C++ compiler?  Only because
the GNU GPL said it had to be free.  GNU C++ was developed by an
industry consortium, MCC, starting from the GNU C compiler.  MCC
normally makes its work as proprietary as can be.  But they made the
C++ front end free software, because the GNU GPL said that was the
only way they could release it.  The C++ front end included many new
files, but since they were meant to be linked with GCC, the GPL
did applied to them.  The benefit to our community is evident.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Consider GNU Objective C.  NeXT initially wanted to make this front
end proprietary; they proposed to release it as .o files, and let
users link them with the rest of GCC, thinking this might be a way
around the GPL's requirements.  But our lawyer said that this would
not evade the requirements, that it was not allowed.  And so they made
the Objective C front end free software.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Those examples happened years ago, but the GNU GPL continues
to bring us more free software.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Many GNU libraries are covered by the GNU Library General Public
License, but not all.  One GNU library which is covered by the
ordinary GNU GPL is Readline, which implements command-line editing. 
A month ago, I found out about a non-free program which was designed
to use Readline, and told the developer this was not allowed.  He
could have taken command-line editing out of the program, but what he
actually did was rerelease it under the GPL.  Now it is free software.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The programmers who write improvements to GCC (or Emacs, or Bash, or
Linux, or any GPL-covered program) are often employed by companies or
universities.  When the programmer wants to return his improvements to
the community, and see his code in the next release, the boss may say,
¡°Hold on there¨Cyour code belongs to us!  We don't want to share it;
we have decided to turn your improved version into a proprietary
software product.¡±

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Here the GNU GPL comes to the rescue.  The programmer shows the boss
that this proprietary software product would be copyright
infringement, and the boss realizes that he has only two choices:
release the new code as free software, or not at all.  Almost always
he lets the programmer do as he intended all along, and the code goes
into the next release.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU GPL is not Mr. Nice Guy.  It says ¡°no¡± to some of the things
that people sometimes want to do.  There are users who say that this
is a bad thing¨Cthat the GPL ¡°excludes¡± some proprietary software
developers who ¡°need to be brought into the free software community¡±.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">But we are not excluding them from our community; they are choosing
not to enter.  Their decision to make software proprietary is a
decision to stay out of our community.  Being in our community means
joining in cooperation with us; we cannot ¡°bring them into our
community¡± if they don't want to join.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">What we <em style="font-size: 16px !important; line-height: 16.6667px !important;">can</em> do is offer them an inducement to join.  The GNU GPL is
designed to make an inducement from our existing software: ¡°If you
will make your software free, you can use this code.¡±  Of course, it
won't win 'em all, but it wins some of the time.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Proprietary software development does not contribute to our community,
but its developers often want handouts from us.  Free software users
can offer free software developers strokes for the ego¨Crecognition
and gratitude¨Cbut it can be very tempting when a business tells you,
¡°Just let us put your package in our proprietary program, and your
program will be used by many thousands of people!¡±  The temptation can
be powerful, but in the long run we are all better off if we resist
it.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The temptation and pressure are harder to recognize when they come
indirectly, through free software organizations that have adopted a
policy of catering to proprietary software.  The X Consortium (and its
successor, the Open Group) offers an example: funded by companies that
made proprietary software, they have strived for a decade to persuade
programmers not to use copyleft.  Now that the Open Group has made
X11R6.4 non-free software, those of us who resisted that pressure are
glad that we did.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Pragmatically speaking, thinking about greater long-term goals will
strengthen your will to resist this pressure.  If you focus your mind
on the freedom and community that you can build by staying firm, you
will find the strength to do it.  ¡°Stand for something, or you will
fall for nothing.¡±

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">And if cynics ridicule freedom, ridicule community...if ¡°hard nosed
realists¡± say that profit is the only ideal...just ignore them, and
use copyleft all the same.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="The-X-Windows-Trap" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Categories-of-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Categories of software</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Copyleft_003b-Pragmatic-Idealism" style="font-size: 16px !important; line-height: 16.6667px !important;">Copyleft; Pragmatic Idealism</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Philosophical-issues" style="font-size: 16px !important; line-height: 16.6667px !important;">Philosophical issues</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">B.6 The X Windows Trap</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">To copyleft or not to copyleft?  That is one of the major
controversies in the free software community.  The idea of copyleft is
that we should fight fire with fire¨Cthat we should use copyright to
make sure our code stays free.  The GNU GPL is one example of
a copyleft license.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Some free software developers prefer non-copyleft distribution. 
Non-copyleft licenses such as the XFree86 and BSD licenses are based
on the idea of never saying no to anyone¨Cnot even to someone who
seeks to use your work as the basis for restricting other people. 
Non-copyleft licensing does nothing wrong, but it misses the
opportunity to actively protect our freedom to change and redistribute
software.  For that, we need copyleft.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">For many years, the X Consortium was the chief opponent of copyleft. 
It exerted both moral suasion and pressure to discourage free software
developers from copylefting their programs.  It used moral suasion by
suggesting that it is not nice to say no.  It used pressure through
its rule that copylefted software could not be in the X Distribution.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Why did the X Consortium adopt this policy?  It had to do with their
definition of success.  The X Consortium defined success as
popularity¨Cspecifically, getting computer companies to use X Windows. 
This definition put the computer companies in the driver's seat. 
Whatever they wanted, the X Consortium had to help them get it.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Computer companies normally distribute proprietary software.  They
wanted free software developers to donate their work for such use.  If
they had asked for this directly, people would have laughed.  But the
X Consortium, fronting for them, could present this request as an
unselfish one.  "Join us in donating our work to proprietary software
developers," they said, suggesting that this is a noble form of
self-sacrifice.  "Join us in achieving popularity", they said,
suggesting that it was not even a sacrifice.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">But self-sacrifice is not the issue: tossing away the defenses of
copyleft, which protect the freedom of everyone in the community, is
sacrificing more than yourself.  Those who granted the X Consortium's
request entrusted the community's future to the good will of the X
Consortium.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">This trust was misplaced.  In its last year, the X Consortium made a
plan to restrict the forthcoming X11R6.4 release so that it will not
be free software.  They decided to start saying no, not only to
proprietary software developers, but to our community as well.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">There is an irony here.  If you said yes when the X Consortium asked
you not to use copyleft, you put the X Consortium in a position to
license and restrict its version of your program, along with its own
code.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Te X Consortium did not carry out this plan.  Instead it closed down
and transferred X development to the Open Group, whose staff are now
carrying out a similar plan.  To give them credit, when I asked them
to release X11R6.4 under the GNU GPL in parallel with their planned
restrictive license, they were willing to consider the idea.  (They
were firmly against staying with the old X11 distribution terms.) 
Before they said yes or no to this proposal, it had already failed for
another reason: the XFree86 group follows the X Consortium's old
policy, and will not accept copylefted software.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Even if the X Consortium and the Open Group had never planned to
restrict X, someone else could have done it.  Non-copylefted software
is vulnerable from all directions; it lets anyone make a non-free
version dominant, if he will invest sufficient resources to add some
important feature using proprietary code.  Users who choose software
based on technical characteristics, rather than on freedom, could
easily be lured to the non-free version for short term convenience.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The X Consortium and Open Group can no longer exert moral suasion by
saying that it is wrong to say no.  This will make it easier to decide
to copyleft your X-related software.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">When you work on the core of X, on programs such as the X server,
Xlib, and Xt, there is a practical reason not to use copyleft.  The
XFree86 group does an important job for the community in maintaining
these programs, and the benefit of copylefting our changes would be
less than the harm done by a fork in development.  So it is better to
work with the XFree86 group and not copyleft our changes on these
programs.  Likewise for utilities such as xset and xrdb, which are
close to the core of X, and which do not need major improvements.  At
least we know that the XFree86 group has a firm commitment to
developing these programs as free software.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The issue is different for programs outside the core of X:
applications, window managers, and additional libraries and widgets. 
There is no reason not to copyleft them, and we should copyleft them.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In case anyone feels the pressure exerted by the criteria for
inclusion in X Distributions, the GNU project will undertake to
publicize copylefted packages that work with X.  If you would like to
copyleft something, and you worry that its omission from X
Distributions will impede its popularity, please ask us to help.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">At the same time, it is better if we do not feel too much need for
popularity.  When a businessman tempts you with "more popularity", he
may try to convince you that his use of your program is crucial to its
success.  Don't believe it!  If your program is good, it will find
many users anyway; you don't need to feel desperate for any particular
users, and you will be stronger if you do not.  You can get an
indescribable sense of joy and freedom by responding, "Take it or
leave it¨Cthat's no skin off my back."  Often the businessman will
turn around and accept the program with copyleft, once you call the
bluff.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Friends, free software developers, don't repeat a mistake.  If we do
not copyleft our software, we put its future at the mercy of anyone
equipped with more resources than scruples.  With copyleft, we can
defend freedom, not just for ourselves, but for our whole community.

<!--  -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Categories-of-software" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Confusing-words" style="font-size: 16px !important; line-height: 16.6667px !important;">Confusing words</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#The-X-Windows-Trap" style="font-size: 16px !important; line-height: 16.6667px !important;">The X Windows Trap</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Philosophical-issues" style="font-size: 16px !important; line-height: 16.6667px !important;">Philosophical issues</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">B.7 Categories of software</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">Here is a glossary of various categories of software that are often
mentioned in discussions of free software. It explains which categories
overlap or are part of other categories.

     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Free software</strong>:
Free software is software that comes with permission for
anyone to use, copy, and distribute, either verbatim or with
modifications, either gratis or for a fee. In particular, this means
that source code must be available. ¡°If it's not source, it's not
software.¡±

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">If a program is free, then it can potentially be included in a free
operating system such as GNU, or free GNU/Linux systems .

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">There are many different ways to make a program free¡ªmany
questions of detail, which could be decided in more than one way
and still make the program free. Some of the possible variations
are described below.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Free software is a matter of freedom, not price. But proprietary
software companies sometimes use the term ¡°free software¡± to
refer to price. Sometimes they mean that you can obtain a binary
copy at no charge; sometimes they mean that a copy is included
on a computer that you are buying. This has nothing to do with
what we mean by free software in the GNU project.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Because of this potential confusion, when a software company
says its product is free software, always check the actual
distribution terms to see whether users really have all the
freedoms that free software implies. Sometimes it really is free
software; sometimes it isn't.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Many languages have two separate words for ¡°free¡± as in
freedom and ¡°free¡± as in zero price. For example, French has
¡°libre¡± and ¡°gratuit¡±. English has a word ¡°gratis¡± that refers
unambiguously to price, but no common adjective that refers
unambiguously to freedom. This is unfortunate, because such a
word would be useful here.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Free software is often more reliable than non-free software. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Open Source software</strong>:
The term ¡°open source¡± software is used by some people to
mean more or less the same thing as free software. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Public domain software</strong>:
Public domain software is software that is not copyrighted. It is
a special case of non-copylefted free software, which means
that some copies or modified versions may not be free at all.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">Sometimes people use the term ¡°public domain¡± in a loose
fashion to mean ¡°free¡± or ¡°available gratis.¡± However, ¡°public
domain¡± is a legal term and means, precisely, ¡°not
copyrighted¡±. For clarity, we recommend using ¡°public domain¡±
for that meaning only, and using other terms to convey the other
meanings. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Copylefted software</strong>:
Copylefted software is free software whose distribution terms
do not let redistributors add any additional restrictions when
they redistribute or modify the software. This means that every
copy of the software, even if it has been modified, must be free
software.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">In the GNU Project, we copyleft almost all the software we
write, because our goal is to give every user the freedoms
implied by the term ¡°free software.¡± See Copylefted for more
explanation of how copyleft works and why we use it.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Copyleft is a general concept; to actually copyleft a program, you
need to use a specific set of distribution terms. There are many
possible ways to write copyleft distribution terms. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Non-copylefted free software</strong>:
Non-copylefted free software comes from the author with
permission to redistribute and modify, and also to add additional
restrictions to it.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">If a program is free but not copylefted, then some copies or
modified versions may not be free at all. A software company
can compile the program, with or without modifications, and
distribute the executable file as a proprietary software product.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The X Window System illustrates this. The X Consortium
releases X11 with distribution terms that make it
non-copylefted free software. If you wish, you can get a copy
which has those distribution terms and is free. However, there
are non-free versions as well, and there are popular
workstations and PC graphics boards for which non-free
versions are the only ones that work. If you are using this
hardware, X11 is not free software for you. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">GPL-covered software</strong>:
The GNU GPL is one
specific set of distribution terms for copylefting a program. The
GNU Project uses it as the distribution terms for most GNU
software. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU system</strong>:
The GNU system is a complete free Unix-like operating system.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">A Unix-like operating system consists of many programs. We
have been accumulating components for this system since 1984;
the first test release of a ¡°complete GNU system¡± was in 1996. 
We hope that in a year or so this system will be mature enough
to recommend it for ordinary users.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU system includes all the GNU software, as well as
many other packages such as the X Window System and TeX
which are not GNU software.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Since the purpose of GNU is to be free, every single component
in the GNU system has to be free software. They don't all have
to be copylefted, however; any kind of free software is legally
suitable to include if it helps meet technical goals. We can and
do use non-copylefted free software such as the X Window
System. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">GNU software</strong>:
GNU software is software that is released under the auspices of
the GNU Project. Most GNU software is copylefted, but not all;
however, all GNU software must be free software.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">Some GNU software is written by staff of the Free Software
Foundation, but most GNU software is contributed by
volunteers. Some contributed software is copyrighted by the
Free Software Foundation; some is copyrighted by the
contributors who wrote it. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Semi-free software</strong>:
Semi-free software is software that is not free, but comes with
permission for individuals to use, copy, distribute, and modify
(including distribution of modified versions) for non-profit
purposes. PGP is an example of a semi-free program.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">Semi-free software is much better than proprietary software,
but it still poses problems, and we cannot use it in a free
operating system.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The restrictions of copyleft are designed to protect the essential
freedoms for all users. For us, the only justification for any
substantive restriction on using a program is to prevent other
people from adding other restrictions. Semi-free programs have
additional restrictions, motivated by purely selfish goals.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">It is impossible to include semi-free software in a free operating
system. This is because the distribution terms for the operating
system as a whole are the conjunction of the distribution terms
for all the programs in it. Adding one semi-free program to the
system would make the system as a whole just semi-free. There
are two reasons we do not want that to happen:
          </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">We believe that free software should be for
everyone¨Cincluding businesses, not just schools and
hobbyists. We want to invite business to use the whole
GNU system, and therefore we must not include a
semi-free program in it. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Commercial distribution of free operating systems,
including Linux-based GNU systems, is very important,
and users appreciate being able to buy commercial
CD-ROM distributions. Including one semi-free
program in an operating system would cut off
commercial CD-ROM distribution for it. 
</li></ul>
     The Free Software Foundation itself is non-commercial, and
therefore we would be legally permitted to use a semi-free
program ¡°internally¡±. But we don't do that, because that would
undermine our efforts to obtain a program which we could also
include in GNU.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">If there is a job that needs doing with software, then until we
have a free program to do the job, the GNU system has a gap. 
We have to tell volunteers, ¡°We don't have a program yet to do
this job in GNU, so we hope you will write one.¡± If we ourselves
used a semi-free program to do the job, that would undermine
what we say; it would take away the impetus (on us, and on
others who might listen to our views) to write a free
replacement. So we don't do that. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Proprietary software</strong>:
Proprietary software is software that is not free or semi-free. 
Its use, redistribution or modification is prohibited, or requires
you to ask for permission, or is restricted so much that you
effectively can't do it freely.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">The Free Software Foundation follows the rule that we cannot
install any proprietary program on our computers except
temporarily for the specific purpose of writing a free replacement
for that very program. Aside from that, we feel there is no
possible excuse for installing a proprietary program.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">For example, we felt justified in installing Unix on our computer
in the 1980s, because we were using it to write a free
replacement for Unix. Nowadays, since free operating systems
are available, the excuse is no longer applicable; we have
eliminated all our non-free operating systems, and any new
computer we install must run a completely free operating
system.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">We don't insist that users of GNU, or contributors to GNU,
have to live by this rule. It is a rule we made for ourselves. But
we hope you will decide to follow it too. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Freeware</strong>:
The term ¡°freeware¡± has no clear accepted definition, but it is
commonly used for packages which permit redistribution but not
modification (and their source code is not available). These
packages are not free software, so please don't use ¡°freeware¡±
to refer to free software. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Shareware</strong>:
Shareware is software which comes with permission for people
to redistribute copies, but says that anyone who continues to
use a copy is required to pay a license fee.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">Shareware is not free software, or even semi-free. There are
two reasons it is not:
          </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">For most shareware, source code is not available; thus you cannot modiy the
program at all. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Shareware does not come with permission to make a
copy and install it without paying a license fee, not even
for individuals engaging in nonprofit activity. (In
practice, people often disregard the distribution terms
and do this anyway, but the terms don't permit it.) 
</li></ul>

     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Commercial Software</strong>:
Commercial software is software being developed by a business
which aims to make money from the use of the software. 
¡°Commercial¡± and ¡°proprietary¡± are not the same thing! Most
commercial software is proprietary , but there is commercial free
software, and there is non-commercial non-free software.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">For example, GNU Ada is always distributed under the terms of
the GNU GPL, and every copy is free software; but its
developers sell support contracts. When their salesmen speak to
prospective customers, sometimes the customers say, ¡°We
would feel safer with a commercial compiler.¡± The salesmen
reply, ¡°GNU Ada is a commercial compiler; it happens to be free
software.¡±

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">For the GNU Project, the emphasis is in the other order: the
important thing is that GNU Ada is free software; whether it is
commercial is not a crucial question. However, the additional
development of GNU Ada that results from the business that
supports it is definitely beneficial. 
</p></li></ul>

<!--  -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Confusing-words" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Categories-of-software" style="font-size: 16px !important; line-height: 16.6667px !important;">Categories of software</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Philosophical-issues" style="font-size: 16px !important; line-height: 16.6667px !important;">Philosophical issues</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">B.8 Confusing words</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">There are a number of words and phrases which we recommend
avoiding, either because they are ambiguous or because they imply an
opinion that we hope you may not entirely agree with.

     </p><ul style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">For free</strong>:
If you want to say that a program is free software, please don't say that
it is available ¡°for free.¡± That term specifically means ¡°for zero price.¡±
Free software is a matter of freedom, not price.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">Free software is often available for free¨Cfor example, on many FTP
servers. But free software copies are also available for a price on
CD-ROMs, and proprietary software copies may occasionally be
available for free. 
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Freeware</strong>:
Please don't use the term ¡°freeware¡± as a synonym for ¡°free
software.¡± The term ¡°freeware¡± was used often in the 1980s for
programs released only as executables, with source code not available. 
Today it has no clear definition. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Give away software</strong>:
It's misleading to use the term ¡°give away¡± to mean ¡°distribute a
program as free software.¡± It has the same problem as ¡°for free¡±: it
implies the issue is price, not freedom. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Intellectual property</strong>:
Publishers and lawyers like to describe copyright as ¡°intellectual
property.¡± This term carries a hidden assumption¡ªthat the most
natural way to think about the issue of copying is based on an analogy
with physical objects, and our ideas of them as property.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">But this analogy overlooks the crucial difference between material
objects and information: information can be copied and shared almost
effortlessly, while material objects can't be. Basing your thinking on this
analogy is tantamount to ignoring that difference.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Even the US legal system does not entirely accept this analogy, since it
does not treat copyrights just like physical object property rights.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If you don't want to limit yourself to this way of thinking, it is best to
avoid using the term ¡°intellectual property¡± in your words and thoughts.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">A suggestion has been made to use the term ¡°intellectual policy¡±
instead of `intellectual property.¡±
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Piracy</strong>:
Publishers often refer to prohibited copying as ¡°piracy.¡± In this way,
they imply that illegal copying is ethically equivalent to attacking ships
on the high seas, kidnaping and murdering the people on them.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">If you don't believe that illegal copying is just like kidnaping and murder,
you might prefer not to use the word ¡°piracy¡± to describe it. Neutral
terms such as ¡°prohibited copying¡± or ¡°illegal copying¡± are available
for use instead. Some of us might even prefer to use a positive term such
as ¡°sharing information with your neighbor.¡±
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Protection</strong>:
Publishers' lawyers love to use the term ¡°protection¡± to describe
copyright. This word carries the implication of preventing destruction or
suffering; therefore, it encourages people to identify with the owner and
publisher who benefit from copyright, rather than with the users who are
restricted by it.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">It is easy to avoid ¡°protection¡± and use neutral terms instead. For
example, instead of ¡°Copyright protection lasts a very long time,¡± you
can say, ¡°Copyright lasts a very long time.¡±
</p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Sell software</strong>:
The term ¡°sell software¡± is ambiguous. Strictly speaking, exchanging a
copy of a free program for a sum of money is ¡°selling¡±; but people
usually associate the term ¡°sell¡± with proprietary restrictions on the
subsequent use of the software. You can be more precise, and prevent
confusion, by saying either ¡°distributing copies of a program for a fee¡±
or ¡°imposing proprietary restrictions on the use of a program,¡±
depending on what you mean. 
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Theft</strong>:
Copyright apologists often use words like ¡°stolen¡± and ¡°theft¡± to
describe copyright infringement. At the same time, they ask us to treat
the legal system as an authority on ethics: if copying is forbidden, it
must be wrong.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">So it is pertinent to mention that the legal system¨Cat least in the
US¨Crejects the idea that copyright infringement is ¡°theft¡±. Copyright
advocates who use terms like ¡°stolen¡± are misrepresenting the
authority that they appeal to.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The idea that laws decide what is right or wrong is mistaken in general. 
Laws are, at their best, an attempt to achieve justice; to say that laws
define justice or ethical conduct is turning things upside down. 
</p></li></ul>

<!-- Copyright (C) 1998 Eleftherios Gkioulekas <lf@amath.washington.edu> -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Licensing-Free-Software" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#GNU-GENERAL-PUBLIC-LICENSE" style="font-size: 16px !important; line-height: 16.6667px !important;">GNU GENERAL PUBLIC LICENSE</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Philosophical-issues" style="font-size: 16px !important; line-height: 16.6667px !important;">Philosophical issues</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="appendix" style="font-size: 24px !important; line-height: 25px !important;">Appendix C Licensing Free Software</h2>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">The following articles by Richard Stallman describe how we license
free software in our community. The text of these articles in included
here with permission under the following terms:

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Copying Notice</strong>
</p><pre class="display" style="font-size: 16px !important; line-height: 16.6667px !important;">     Copyright &#169; 1998 Free Software Foundation Inc
     59 Temple Place, Suite 330, Boston, MA 02111, USA
     Verbatim copying and distribution is permitted in any medium,
     provided this notice is preserved.
</pre>
   <p style="font-size: 16px !important; line-height: 16.6667px !important;">An exception is the article in <a href="#Why-you-should-use-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">Why you should use the GPL</a>. 
This article was written by Eleftherios Gkioulekas to make this appendix
more self contained and you may copy it under the following terms:

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;"><strong style="font-size: 16px !important; line-height: 16.6667px !important;">Copying Notice</strong>
</p><pre class="display" style="font-size: 16px !important; line-height: 16.6667px !important;">     Copyright &#169; 1998 Eleftherios Gkioulekas
     Verbatim copying and distribution is permitted in any medium,
     provided this notice is preserved.
</pre>
   <ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="1" href="#What-is-Copyleft" style="font-size: 16px !important; line-height: 16.6667px !important;">What is Copyleft</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="2" href="#Why-you-should-use-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">Why you should use the GPL</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="3" href="#The-LGPL-vs-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">The LGPL vs the GPL</a>
</li></ul>

<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="What-is-Copyleft" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Why-you-should-use-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">Why you should use the GPL</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Licensing-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Licensing Free Software</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Licensing-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Licensing Free Software</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">C.1 What is Copyleft</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">The simplest way to make a program free is to put it in the public
domain, uncopyrighted. This allows people to share
the program and their improvements, if they are so minded. But it also
allows uncooperative people to convert the program into proprietary
software. They can make changes, many or few, and
distribute the result as a proprietary product. People who receive the
program in that modified form do not have the freedom that the
original author gave them; the middleman has stripped it away.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In the GNU project, our aim is to give all users the freedom to
redistribute and change GNU software. If middlemen could strip off the
freedom, we might have many users, but those users would not have
freedom. So instead of putting GNU software in the public domain, we
<dfn style="font-size: 16px !important; line-height: 16.6667px !important;">copyleft</dfn> it. Copyleft says that anyone who redistributes the
software, with or without changes, must pass along the freedom to
further copy and change it. Copyleft guarantees that every user has
freedom.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Copyleft also provides an incentive for other programmers to add to
free software. Important free programs such as the GNU C++ compiler
exist only because of this.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Copyleft also helps programmers who want to contribute improvements to
free software get permission to do that. These programmers often work
for companies or universities that would do almost anything to get
more money. A programmer may want to contribute her changes to the
community, but her employer may want to turn the changes into a
proprietary software product.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">When we explain to the employer that it is illegal to distribute the
improved version except as free software, the employer usually decides
to release it as free software rather than throw it away.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To copyleft a program, first we copyright it; then we add distribution
terms, which are a legal instrument that gives everyone the rights to
use, modify, and redistribute the program's code or any program
derived from it but only if the distribution terms are unchanged. 
Thus, the code and the freedoms become legally inseparable.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Proprietary software developers use copyright to take away the users'
freedom; we use copyright to guarantee their freedom. That's why we
reverse the name, changing ¡°copyright¡± into ¡°copyleft.¡±

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Copyleft is a general concept; there are many ways to fill in the
details. In the GNU Project, the specific distribution terms that we
use are contained in the GNU General Public License (GNU GPL). 
An alternate form, the GNU
Library General Public License
(GNU LGPL), applies to a few (but not all) GNU libraries. The
license permits linking the libraries into proprietary
executables under certain conditions.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The appropriate license is included in many manuals and in each GNU
source code distribution (usually in files named <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">COPYING</span></samp>
and <samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="file" style="font-size: 12px !important; line-height: 14.1667px !important;">COPYING.LIB</span></samp>).

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU GPL is designed so that you can easily apply it to your own
program if you are the copyright holder. You don't have to modify the
GNU GPL to do this, just add notices to your program which refer
properly to the GNU GPL.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If you would like to copyleft your program with the GNU GPL, please
see the instructions at the end of the GPL text. If
you would like to copyleft your library with the GNU LGPL, please see
the instructions at the end of the LGPL text
(note you can also use the ordinary GPL for libraries).

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Using the same distribution terms for many different programs makes it
easy to copy code between various different programs. Since they all
have the same distribution terms, there is no need to think about
whether the terms are compatible. The Library GPL includes a provision
that lets you alter the distribution terms to the ordinary GPL, so
that you can copy code into another program covered by the GPL.

<!-- ============================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Why-you-should-use-the-GPL" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#The-LGPL-vs-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">The LGPL vs the GPL</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#What-is-Copyleft" style="font-size: 16px !important; line-height: 16.6667px !important;">What is Copyleft</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Licensing-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Licensing Free Software</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">C.2 Why you should use the GPL</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">The GPL is not the only way to implement copyleft. However, as a practical
matter, it is convenient to standardize on using the GPL to copyleft
software because that allows to copy source code from copylefted programs
and use it on other copylefted programs without worrying about license
compatibility.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If you want your program to be free, then GPL grants all the permissions
that are necessary to make it free. Some people do not like the GPL because
they feel it gives too many permissions. In that case, these people do
not really want their program to be free. When they choose to use a more
restrictive license, as a result, they are effectively choosing not to be part
of the free software community.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">One very common restriction, that often comes up, is to allow free use only
for ¡°non-commercial¡± purposes. The idea behind such a restriction
is to prevent anyone from making any money without giving you a cut of their
profit. Copyleft actually also serves this goal, but from a different angle. 
The angle is that making money is only one of the many benefits that one
can derive from using a computer program, and it should not be discriminated
against all the other benefits. Copyleft however does prevent others from
making money by modifying your program and distributing it as proprietary
software with restrictive licensing. If person wants to distribute the program,
person also has to distribute the source code, in which case you benefit
by having access to per <em style="font-size: 16px !important; line-height: 16.6667px !important;">modifications</em>, or person has to negotiate
with you for special terms.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Another peculiar restriction that often comes up is allowing use and
modification but <em style="font-size: 16px !important; line-height: 16.6667px !important;">requiring</em> the redistribution of any modified versions. 
The reason why this is a peculiar restriction is because at first sight,
it doesn't sound that bad; it does sound like free software. 
The advocates of this idea explain that there
are certain situations where it is very anti-social to make a useful
modification on a free program, use the program and benefit from it, and
not release it. However, if you legally require your users to
release any modifications they make, then this creates another problem,
especially when this requirement conflicts with privacy rights. 
The public should be free to redistribute your program, but they
should also be free to choose not to redistribute the program at all. 
The fundamental idea behind copylefted works is that they are owned by
the public. But, ¡°the public¡± is the individual, as much as it is
the entire community. Copyleft protects the community by forbidding
hoarding, but the individual also deserves an equivalent protection;
the protection of both their privacy and their freedom.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Some developers, who do want to be part of our community, use licenses
that do not restrict any of our freedoms but which ask for a ¡°favor¡±
from the user. An example of such a favor is to request that you change the
name of the program if you modify it, or to not use the name of some
organization in advertising. There is nothing ethically wrong with
asking for such favors. Requiring them legally however creates a serious
problem; it makes their terms incompatible with the terms of the GPL. 
It is very inefficient to inflict the price of such an incompatibility
on our community for the sake of a favor. Instead, in almost all cases, it
is just as good an idea to ask for such favors in the documentation
distributed with the program, where there is more latitude in what
restrictions you can impose
(see <a href="#Why-free-software-needs-free-documentation" style="font-size: 16px !important; line-height: 16.6667px !important;">Why free software needs free documentation</a>).

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Some people complain
that the GPL is ¡°too restrictive¡± because it says no to software hoarding. 
They say that this makes the program ¡°less free¡±. They say that
¡°free flow of ideas¡± means that you should not say no to anyone. 
If you would like to give your users more permissions, than provided by the
GPL, all you need to do is append the text of these permissions to the
copyright notices that you attach to every file; there is no need to
write a new license from scratch. You can do this, if you
are the original author of the file. For files that were written by
others, you need their permission. In general, however, doing this is not
a good idea.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The GPL has been very carefully thought-out to only give
permissions that give <em style="font-size: 16px !important; line-height: 16.6667px !important;">freedom</em> to the users, without allowing any
permissions that would give <em style="font-size: 16px !important; line-height: 16.6667px !important;">power</em> to some users to take freedom from
all of the other users. As a result, even though the terms say no to certain
things, doing so guarantees that the program remains free for all the users
in our community. The US constitution guarantees some of our rights by making
them <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">inalienable</dfn>. This means that no-one, not even the person
entitled to the rights, is allowed to waive them. For example, you can't
waive your right to freedom and sell yourself as a slave. While this can
be seen as a restriction in terms of what you are allowed to do, the effect is
that this restriction gives you more freedom. It is not <em style="font-size: 16px !important; line-height: 16.6667px !important;">you</em> that
the restriction really is targetting, but all the people, that have power
over you, that might have an interest in taking your freedom away.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In many countries, other than the US, copyright law is not strictly
enforced. As a result, the citizens in these countries can afford not
to care about copyright. However, the free software community trascends
nations and borders, and many of us do not have the same latitude. 
So, if you write a program that you want to share with other people,
please be clear about the copyright terms. The easiest way to do this
is by applying the terms of the GPL.

<!-- ============================================================ -->
</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="The-LGPL-vs-the-GPL" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Why-you-should-use-the-GPL" style="font-size: 16px !important; line-height: 16.6667px !important;">Why you should use the GPL</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Licensing-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Licensing Free Software</a>

</div>

<h3 class="section" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">C.3 The LGPL vs the GPL</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">The GNU Project has two principal licenses to use for libraries.  One
is the GNU Library GPL; the other is the ordinary GNU GPL.  The choice
of license makes a big difference: using the Library GPL permits use
of the library in proprietary programs; using the ordinary GPL for a
library makes it available only for free programs.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Which license is best for a given library is a matter of strategy, and
it depends on the details of the situation.  At present, most GNU
libraries are covered by the Library GPL, and that means we are using
only one of these two strategies, neglecting the other.  So we are
now seeking more libraries to release <em style="font-size: 16px !important; line-height: 16.6667px !important;">under the ordinary GPL</em>.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Proprietary software developers have the advantage of money; free
software developers need to make advantages for each other.  Using the
ordinary GPL for a library gives free software developers an advantage
over proprietary developers: a library that they can use, while
proprietary developers cannot use it.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Using the ordinary GPL is not advantageous for every library.  There
are reasons that can make it better to use the Library GPL in certain
cases.  The most common case is when a free library's features are
readily available for proprietary software through other alternative
libraries.  In that case, the library cannot give free software any
particular advantage, so it is better to use the Library GPL for that
library.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">This is why we used the Library GPL for the GNU C library.  After all,
there are plenty of other C libraries; using the GPL for ours would
have driven proprietary software developers to use another¨Cno problem
for them, only for us.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">However, when a library provides a significant unique capability, like
GNU Readline, that's a horse of a different color.  The Readline
library implements input editing and history for interactive programs,
and that's a facility not generally available elsewhere.  Releasing it
under the GPL and limiting its use to free programs gives our
community a real boost.  At least one application program is free
software today specifically because that was necessary for using
Readline.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If we amass a collection of powerful GPL-covered libraries that have
no parallel available to proprietary software, they will provide a
range of useful modules to serve as building blocks in new free
programs.  This will be a significant advantage for further free
software development, and some projects will decide to make software
free in order to use these libraries.  University projects can easily
be influenced; nowadays, as companies begin to consider making
software free, even some commercial projects can be influenced in this
way.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Proprietary software developers, seeking to deny the free competition
an important advantage, will try to convince authors not to contribute
libraries to the GPL-covered collection.  For example, they may appeal
to the ego, promising ¡°more users for this library¡± if we let them use
the code in proprietary software products.  Popularity is tempting,
and it is easy for a library developer to rationalize the idea that
boosting the popularity of that one library is what the community
needs above all.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">But we should not listen to these temptations, because we can achieve
much more if we stand together.  We free software developers should
support one another.  By releasing libraries that are limited to free
software only, we can help each other's free software packages outdo
the proprietary alternatives.  The whole free software movement will
have more popularity, because free software as a whole will stack up
better against the competition.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Since the name ¡°Library GPL¡± conveys the wrong idea about this
question, we are planning to change the name to ¡°Lesser GPL.¡±
Actually implementing the name change may take some time, but you
don't have to wait¨Cyou can release GPL-covered libraries now.

<!-- Copyright (C) 1998 Eleftherios Gkioulekas <lf@amath.washington.edu> -->
<!-- Permission is granted to make and distribute verbatim copies of -->
<!-- this manual provided the copyright notice and this permission notice -->
<!-- are preserved on all copies. -->
<!-- Permission is granted to process this file through TeX and print the -->
<!-- results, provided the printed document carries copying permission -->
<!-- notice identical to this one except for the removal of this paragraph -->
<!-- (this paragraph not being relevant to the printed manual). -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Permission is granted to copy and distribute translations of this manual -->
<!-- into another language, under the above conditions for modified versions, -->
<!-- except that this permission notice may be stated in a translation -->
<!-- approved by the Free Software Foundation -->
<!-- ============================================================ -->
<!-- ============================================================ -->
   </p><p style="font-size: 16px !important;"><a name="index-warranty-2" style="font-size: 16px !important;"></a><a name="index-copyright-3" style="font-size: 16px !important;"></a></p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="GNU-GENERAL-PUBLIC-LICENSE" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Licensing-Free-Software" style="font-size: 16px !important; line-height: 16.6667px !important;">Licensing Free Software</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top" style="font-size: 16px !important; line-height: 16.6667px !important;">Top</a>

</div>

<h2 class="appendix" style="font-size: 24px !important; line-height: 25px !important;">Appendix D GNU GENERAL PUBLIC LICENSE</h2>

<div style="font-size: 16px !important; line-height: 16.6667px !important;" align="center">Version 2, June 1991</div>

<pre class="display" style="font-size: 16px !important; line-height: 16.6667px !important;">     Copyright &#169; 1989, 1991 Free Software Foundation, Inc.
     59 Temple Place - Suite 330, Boston, MA  02111-1307, USA
     
     Everyone is permitted to copy and distribute verbatim copies
     of this license document, but changing it is not allowed.
</pre>
   <ul class="menu" style="font-size: 16px !important; line-height: 16.6667px !important;">
<li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="1" href="#Preamble" style="font-size: 16px !important; line-height: 16.6667px !important;">Preamble</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="2" href="#Terms-and-Conditions" style="font-size: 16px !important; line-height: 16.6667px !important;">Terms and Conditions</a>
</li><li style="font-size: 16px !important; line-height: 16.6667px !important;"><a accesskey="3" href="#Appendix-_002d-How-to-Apply-These-Terms-to-Your-New-Programs" style="font-size: 16px !important; line-height: 16.6667px !important;">Appendix - How to Apply These Terms to Your New Programs</a>
</li></ul>

<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Preamble" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Terms-and-Conditions" style="font-size: 16px !important; line-height: 16.6667px !important;">Terms and Conditions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#GNU-GENERAL-PUBLIC-LICENSE" style="font-size: 16px !important; line-height: 16.6667px !important;">GNU GENERAL PUBLIC LICENSE</a>

</div>

<h3 class="appendixsec" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">D.1 Preamble</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">The licenses for most software are designed to take away your
freedom to share and change it.  By contrast, the GNU General Public
License is intended to guarantee your freedom to share and change free
software¡ªto make sure the software is free for all its users.  This
General Public License applies to most of the Free Software
Foundation's software and to any other program whose authors commit to
using it.  (Some other Free Software Foundation software is covered by
the GNU Library General Public License instead.)  You can apply it to
your programs, too.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">When we speak of free software, we are referring to freedom, not
price.  Our General Public Licenses are designed to make sure that you
have the freedom to distribute copies of free software (and charge for
this service if you wish), that you receive source code or can get it
if you want it, that you can change the software or use pieces of it
in new free programs; and that you know you can do these things.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To protect your rights, we need to make restrictions that forbid
anyone to deny you these rights or to ask you to surrender the rights. 
These restrictions translate to certain responsibilities for you if you
distribute copies of the software, or if you modify it.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">For example, if you distribute copies of such a program, whether
gratis or for a fee, you must give the recipients all the rights that
you have.  You must make sure that they, too, receive or can get the
source code.  And you must show them these terms so they know their
rights.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">We protect your rights with two steps: (1) copyright the software, and
(2) offer you this license which gives you legal permission to copy,
distribute and/or modify the software.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Also, for each author's protection and ours, we want to make certain
that everyone understands that there is no warranty for this free
software.  If the software is modified by someone else and passed on, we
want its recipients to know that what they have is not the original, so
that any problems introduced by others will not reflect on the original
authors' reputations.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Finally, any free program is threatened constantly by software
patents.  We wish to avoid the danger that redistributors of a free
program will individually obtain patent licenses, in effect making the
program proprietary.  To prevent this, we have made it clear that any
patent must be licensed for everyone's free use or not licensed at all.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">The precise terms and conditions for copying, distribution and
modification follow.

</p><div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Terms-and-Conditions" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Next:&nbsp;<a rel="next" accesskey="n" href="#Appendix-_002d-How-to-Apply-These-Terms-to-Your-New-Programs" style="font-size: 16px !important; line-height: 16.6667px !important;">Appendix - How to Apply These Terms to Your New Programs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Preamble" style="font-size: 16px !important; line-height: 16.6667px !important;">Preamble</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#GNU-GENERAL-PUBLIC-LICENSE" style="font-size: 16px !important; line-height: 16.6667px !important;">GNU GENERAL PUBLIC LICENSE</a>

</div>

<h3 class="appendixsec" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">D.2 TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</h3>

<!-- @iftex -->
<!-- @appendixsec TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION -->
<!-- @end iftex -->
<!-- @ifinfo -->
<!-- @center TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION -->
<!-- @end ifinfo -->
     <ol start="0" style="font-size: 16px !important; line-height: 16.6667px !important;" type="1">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">This License applies to any program or other work which contains
a notice placed by the copyright holder saying it may be distributed
under the terms of this General Public License.  The ¡°Program¡±, below,
refers to any such program or work, and a ¡°work based on the Program¡±
means either the Program or any derivative work under copyright law:
that is to say, a work containing the Program or a portion of it,
either verbatim or with modifications and/or translated into another
language.  (Hereinafter, translation is included without limitation in
the term ¡°modification¡±.)  Each licensee is addressed as ¡°you¡±.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">Activities other than copying, distribution and modification are not
covered by this License; they are outside its scope.  The act of
running the Program is not restricted, and the output from the Program
is covered only if its contents constitute a work based on the
Program (independent of having been made by running the Program). 
Whether that is true depends on what the Program does.

     </p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You may copy and distribute verbatim copies of the Program's
source code as you receive it, in any medium, provided that you
conspicuously and appropriately publish on each copy an appropriate
copyright notice and disclaimer of warranty; keep intact all the
notices that refer to this License and to the absence of any warranty;
and give any other recipients of the Program a copy of this License
along with the Program.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">You may charge a fee for the physical act of transferring a copy, and
you may at your option offer warranty protection in exchange for a fee.

     </p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You may modify your copy or copies of the Program or any portion
of it, thus forming a work based on the Program, and copy and
distribute such modifications or work under the terms of Section 1
above, provided that you also meet all of these conditions:

          <ol start="1" style="font-size: 16px !important; line-height: 16.6667px !important;" type="a">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">You must cause the modified files to carry prominent notices
stating that you changed the files and the date of any change.

          </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You must cause any work that you distribute or publish, that in
whole or in part contains or is derived from the Program or any
part thereof, to be licensed as a whole at no charge to all third
parties under the terms of this License.

          </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If the modified program normally reads commands interactively
when run, you must cause it, when started running for such
interactive use in the most ordinary way, to print or display an
announcement including an appropriate copyright notice and a
notice that there is no warranty (or else, saying that you provide
a warranty) and that users may redistribute the program under
these conditions, and telling the user how to view a copy of this
License.  (Exception: if the Program itself is interactive but
does not normally print such an announcement, your work based on
the Program is not required to print an announcement.)
          </li></ol>

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">These requirements apply to the modified work as a whole.  If
identifiable sections of that work are not derived from the Program,
and can be reasonably considered independent and separate works in
themselves, then this License, and its terms, do not apply to those
sections when you distribute them as separate works.  But when you
distribute the same sections as part of a whole which is a work based
on the Program, the distribution of the whole must be on the terms of
this License, whose permissions for other licensees extend to the
entire whole, and thus to each and every part regardless of who wrote it.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">Thus, it is not the intent of this section to claim rights or contest
your rights to work written entirely by you; rather, the intent is to
exercise the right to control the distribution of derivative or
collective works based on the Program.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">In addition, mere aggregation of another work not based on the Program
with the Program (or with a work based on the Program) on a volume of
a storage or distribution medium does not bring the other work under
the scope of this License.

     </p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You may copy and distribute the Program (or a work based on it,
under Section 2) in object code or executable form under the terms of
Sections 1 and 2 above provided that you also do one of the following:

          <ol start="1" style="font-size: 16px !important; line-height: 16.6667px !important;" type="a">
<li style="font-size: 16px !important; line-height: 16.6667px !important;">Accompany it with the complete corresponding machine-readable
source code, which must be distributed under the terms of Sections
1 and 2 above on a medium customarily used for software interchange; or,

          </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Accompany it with a written offer, valid for at least three
years, to give any third party, for a charge no more than your
cost of physically performing source distribution, a complete
machine-readable copy of the corresponding source code, to be
distributed under the terms of Sections 1 and 2 above on a medium
customarily used for software interchange; or,

          </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Accompany it with the information you received as to the offer
to distribute corresponding source code.  (This alternative is
allowed only for noncommercial distribution and only if you
received the program in object code or executable form with such
an offer, in accord with Subsection b above.)
          </li></ol>

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">The source code for a work means the preferred form of the work for
making modifications to it.  For an executable work, complete source
code means all the source code for all modules it contains, plus any
associated interface definition files, plus the scripts used to
control compilation and installation of the executable.  However, as a
special exception, the source code distributed need not include
anything that is normally distributed (in either source or binary
form) with the major components (compiler, kernel, and so on) of the
operating system on which the executable runs, unless that component
itself accompanies the executable.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If distribution of executable or object code is made by offering
access to copy from a designated place, then offering equivalent
access to copy the source code from the same place counts as
distribution of the source code, even though third parties are not
compelled to copy the source along with the object code.

     </p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You may not copy, modify, sublicense, or distribute the Program
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense or distribute the Program is
void, and will automatically terminate your rights under this License. 
However, parties who have received copies, or rights, from you under
this License will not have their licenses terminated so long as such
parties remain in full compliance.

     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">You are not required to accept this License, since you have not
signed it.  However, nothing else grants you permission to modify or
distribute the Program or its derivative works.  These actions are
prohibited by law if you do not accept this License.  Therefore, by
modifying or distributing the Program (or any work based on the
Program), you indicate your acceptance of this License to do so, and
all its terms and conditions for copying, distributing or modifying
the Program or works based on it.

     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">Each time you redistribute the Program (or any work based on the
Program), the recipient automatically receives a license from the
original licensor to copy, distribute or modify the Program subject to
these terms and conditions.  You may not impose any further
restrictions on the recipients' exercise of the rights granted herein. 
You are not responsible for enforcing compliance by third parties to
this License.

     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If, as a consequence of a court judgment or allegation of patent
infringement or for any other reason (not limited to patent issues),
conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot
distribute so as to satisfy simultaneously your obligations under this
License and any other pertinent obligations, then as a consequence you
may not distribute the Program at all.  For example, if a patent
license would not permit royalty-free redistribution of the Program by
all those who receive copies directly or indirectly through you, then
the only way you could satisfy both it and this License would be to
refrain entirely from distribution of the Program.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">If any portion of this section is held invalid or unenforceable under
any particular circumstance, the balance of the section is intended to
apply and the section as a whole is intended to apply in other
circumstances.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">It is not the purpose of this section to induce you to infringe any
patents or other property right claims or to contest validity of any
such claims; this section has the sole purpose of protecting the
integrity of the free software distribution system, which is
implemented by public license practices.  Many people have made
generous contributions to the wide range of software distributed
through that system in reliance on consistent application of that
system; it is up to the author/donor to decide if he or she is willing
to distribute software through any other system and a licensee cannot
impose that choice.

     </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">This section is intended to make thoroughly clear what is believed to
be a consequence of the rest of this License.

     </p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If the distribution and/or use of the Program is restricted in
certain countries either by patents or by copyrighted interfaces, the
original copyright holder who places the Program under this License
may add an explicit geographical distribution limitation excluding
those countries, so that distribution is permitted only in or among
countries not thus excluded.  In such case, this License incorporates
the limitation as if written in the body of this License.

     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">The Free Software Foundation may publish revised and/or new versions
of the General Public License from time to time.  Such new versions will
be similar in spirit to the present version, but may differ in detail to
address new problems or concerns.

     <p style="font-size: 16px !important; line-height: 16.6667px !important;">Each version is given a distinguishing version number.  If the Program
specifies a version number of this License which applies to it and ¡°any
later version¡±, you have the option of following the terms and conditions
either of that version or of any later version published by the Free
Software Foundation.  If the Program does not specify a version number of
this License, you may choose any version ever published by the Free Software
Foundation.

     </p></li><li style="font-size: 16px !important; line-height: 16.6667px !important;">If you wish to incorporate parts of the Program into other free
programs whose distribution conditions are different, write to the author
to ask for permission.  For software which is copyrighted by the Free
Software Foundation, write to the Free Software Foundation; we sometimes
make exceptions for this.  Our decision will be guided by the two goals
of preserving the free status of all derivatives of our free software and
of promoting the sharing and reuse of software generally.

     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY
FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN
OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES
PROVIDE THE PROGRAM ¡°AS IS¡± WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED
OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS
TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE
PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,
REPAIR OR CORRECTION.

     </li><li style="font-size: 16px !important; line-height: 16.6667px !important;">IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR
REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING
OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED
TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY
YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER
PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.
     </li></ol>

<div class="node" style="font-size: 16px !important; line-height: 16.6667px !important;">
<a name="Appendix---How-to-Apply-These-Terms-to-Your-New-Programs" style="font-size: 16px !important;"></a>
<a name="Appendix-_002d-How-to-Apply-These-Terms-to-Your-New-Programs" style="font-size: 16px !important;"></a>
<p style="font-size: 16px !important;"></p><hr style="font-size: 16px !important;">
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Terms-and-Conditions" style="font-size: 16px !important; line-height: 16.6667px !important;">Terms and Conditions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#GNU-GENERAL-PUBLIC-LICENSE" style="font-size: 16px !important; line-height: 16.6667px !important;">GNU GENERAL PUBLIC LICENSE</a>

</div>

<h3 class="appendixsec" style="font-size: 18.7167px !important; line-height: 19.1667px !important;">D.3 Appendix: How to Apply These Terms to Your New Programs</h3>

<p style="font-size: 16px !important; line-height: 16.6667px !important;">If you develop a new program, and you want it to be of the greatest
possible use to the public, the best way to achieve this is to make it
free software which everyone can redistribute and change under these terms.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">To do so, attach the following notices to the program.  It is safest
to attach them to the start of each source file to most effectively
convey the exclusion of warranty; and each file should have at least
the ¡°copyright¡± line and a pointer to where the full notice is found.

</p><pre class="smallexample" style="font-size: 10px !important; line-height: 11.6667px !important;">     <var style="font-size: 10px !important; line-height: 11.6667px !important;">one line to give the program's name and a brief idea of what it does.</var>
     Copyright (C) 19<var style="font-size: 10px !important; line-height: 11.6667px !important;">yy</var>  <var style="font-size: 10px !important; line-height: 11.6667px !important;">name of author</var>
     
     This program is free software; you can redistribute it and/or modify
     it under the terms of the GNU General Public License as published by
     the Free Software Foundation; either version 2 of the License, or
     (at your option) any later version.
     
     This program is distributed in the hope that it will be useful,
     but WITHOUT ANY WARRANTY; without even the implied warranty of
     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     GNU General Public License for more details.
     
     You should have received a copy of the GNU General Public License
     along with this program; if not, write to the Free Software
     Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
     02111-1307, USA.
</pre>
   <p style="font-size: 16px !important; line-height: 16.6667px !important;">Also add information on how to contact you by electronic and paper mail.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">If the program is interactive, make it output a short notice like this
when it starts in an interactive mode:

</p><pre class="smallexample" style="font-size: 10px !important; line-height: 11.6667px !important;">     Gnomovision version 69, Copyright (C) 19<var style="font-size: 10px !important; line-height: 11.6667px !important;">yy</var> <var style="font-size: 10px !important; line-height: 11.6667px !important;">name of author</var>
     Gnomovision comes with ABSOLUTELY NO WARRANTY; for details
     type `show w'.  This is free software, and you are welcome
     to redistribute it under certain conditions; type `show c'
     for details.
</pre>
   <p style="font-size: 16px !important; line-height: 16.6667px !important;">The hypothetical commands ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">show w</span></samp>¡¯ and ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">show c</span></samp>¡¯ should show
the appropriate parts of the General Public License.  Of course, the
commands you use may be called something other than ¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">show w</span></samp>¡¯ and
¡®<samp style="font-size: 12px !important; line-height: 14.1667px !important;"><span class="samp" style="font-size: 12px !important; line-height: 14.1667px !important;">show c</span></samp>¡¯; they could even be mouse-clicks or menu items¡ªwhatever
suits your program.

   </p><p style="font-size: 16px !important; line-height: 16.6667px !important;">You should also get your employer (if you work as a programmer) or your
school, if any, to sign a ¡°copyright disclaimer¡± for the program, if
necessary.  Here is a sample; alter the names:

</p><pre class="example" style="font-size: 12px !important; line-height: 14.1667px !important;">     Yoyodyne, Inc., hereby disclaims all copyright interest in the program
     `Gnomovision' (which makes passes at compilers) written by James Hacker.
     
     <var style="font-size: 12px !important; line-height: 14.1667px !important;">signature of Ty Coon</var>, 1 April 1989
     Ty Coon, President of Vice
</pre>
   <p style="font-size: 16px !important; line-height: 16.6667px !important;">This General Public License does not permit incorporating your program into
proprietary programs.  If your program is a subroutine library, you may
consider it more useful to permit linking proprietary applications with the
library.  If this is what you want to do, use the GNU Library General
Public License instead of this License.

<!-- =================================================================== -->
<!-- =================================================================== -->
   </p><div class="footnote" style="font-size: 16px !important; line-height: 16.6667px !important;">
<hr style="font-size: 16px !important;">
<a name="texinfo-footnotes-in-document" style="font-size: 16px !important;"></a><h4 style="font-size: 16px !important; line-height: 16.6667px !important;">Footnotes</h4><p class="footnote" style="font-size: 16px !important; line-height: 16.6667px !important;"><small style="font-size: 13.3333px !important; line-height: 15px !important;">[<a name="fn-1" href="#fnd-1" style="font-size: 13.3333px !important; line-height: 15px !important;">1</a>]</small> GUI is an abbreviation for <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">graphical user interface</dfn></p>

   <p class="footnote" style="font-size: 16px !important; line-height: 16.6667px !important;"><small style="font-size: 13.3333px !important; line-height: 15px !important;">[<a name="fn-2" href="#fnd-2" style="font-size: 13.3333px !important; line-height: 15px !important;">2</a>]</small> The author is also a former ¡°vi¡± user that has found much
happiness and bliss in Emacs</p>

   <p class="footnote" style="font-size: 16px !important; line-height: 16.6667px !important;"><small style="font-size: 13.3333px !important; line-height: 15px !important;">[<a name="fn-3" href="#fnd-3" style="font-size: 13.3333px !important; line-height: 15px !important;">3</a>]</small> Note that in Emacs parlance a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">window</dfn> is not an X window. 
A frame is an X window. A <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">window</dfn> is a region within the frame.</p>

   <p class="footnote" style="font-size: 16px !important; line-height: 16.6667px !important;"><small style="font-size: 13.3333px !important; line-height: 15px !important;">[<a name="fn-4" href="#fnd-4" style="font-size: 13.3333px !important; line-height: 15px !important;">4</a>]</small> M-x means <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">&lt;ALT&gt;-x</kbd>. If you do not have an &lt;ALT&gt; key,
then use <kbd style="font-size: 12px !important; line-height: 14.1667px !important;">&lt;ESC&gt; x</kbd> instead.</p>

   <p class="footnote" style="font-size: 16px !important; line-height: 16.6667px !important;"><small style="font-size: 13.3333px !important; line-height: 15px !important;">[<a name="fn-5" href="#fnd-5" style="font-size: 13.3333px !important; line-height: 15px !important;">5</a>]</small> Many individuals refer to <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">Microsoft Windows 95</dfn> as Win95. 
In hacker terminology, a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">win</dfn> is something that is good. We do not
believe that Microsoft Windows 95 is a good operating system, therefore
we call it Lose95</p>

   <p class="footnote" style="font-size: 16px !important; line-height: 16.6667px !important;"><small style="font-size: 13.3333px !important; line-height: 15px !important;">[<a name="fn-6" href="#fnd-6" style="font-size: 13.3333px !important; line-height: 15px !important;">6</a>]</small> Note that in Emacs lingo a <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">window</dfn> does not correspond
to an X window. It is the <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">frame</dfn> that corresponds to an X window. 
A <dfn style="font-size: 16px !important; line-height: 16.6667px !important;">window</dfn> is merely a region within the frame. And the same Emacs
process can actually be responsible for more than one frame</p>

   <p class="footnote" style="font-size: 16px !important; line-height: 16.6667px !important;"><small style="font-size: 13.3333px !important; line-height: 15px !important;">[<a name="fn-7" href="#fnd-7" style="font-size: 13.3333px !important; line-height: 15px !important;">7</a>]</small>
 Proposed Federal censorship regulations may prohibit us from giving you
 information about the possibility of aborting Emacs functions. We would
 be required to say that this is not an acceptable way of terminating an
 unwanted  function</p>

   <p class="footnote" style="font-size: 16px !important; line-height: 16.6667px !important;"><small style="font-size: 13.3333px !important; line-height: 15px !important;">[<a name="fn-8" href="#fnd-8" style="font-size: 13.3333px !important; line-height: 15px !important;">8</a>]</small> In the event that the minor number has already grown larger than 90, I guess you can call your prerelease 0.900</p>

   <p class="footnote" style="font-size: 16px !important; line-height: 16.6667px !important;"><small style="font-size: 13.3333px !important; line-height: 15px !important;">[<a name="fn-9" href="#fnd-9" style="font-size: 13.3333px !important; line-height: 15px !important;">9</a>]</small> The Free Software Foundation and many others however believe that
the current policies fall short of this justification and need to be
re-evaluated</p>

   <p class="footnote" style="font-size: 16px !important; line-height: 16.6667px !important;"><small style="font-size: 13.3333px !important; line-height: 15px !important;">[<a name="fn-10" href="#fnd-10" style="font-size: 13.3333px !important; line-height: 15px !important;">10</a>]</small> The laws in France are now changing and they might be completely
different by the time you read this book</p>

   <hr style="font-size: 16px !important;"></div>



</body></html>